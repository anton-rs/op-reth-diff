<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <title>op-reth</title>

    <link rel="icon" type="image/x-icon" href=./anton.png>

    <style>
        .line-stat {
            width: 14rem;
            float: right;
        }
        .line-stat div {
            width: 50%;
        }
    </style>

    
<style>
    .term-container {
        background: #171717;
        border-radius: 5px;
        color: white;
        word-break: break-word;
        overflow-wrap: break-word;
        font-family: "SFMono-Regular", Monaco, Menlo, Consolas, "Liberation Mono", Courier, monospace;
        font-size: 12px;
        line-height: 20px;
        padding: 14px 18px;
        white-space: pre-wrap;
    }

    .term-container img { max-width: 100%; }

    .term a { color: inherit; text-decoration: underline; text-decoration-style: dashed; }
    .term a:hover { color: #2882F9 }

    @keyframes blink-animation {
        to {
            visibility: hidden;
        }
    }

    .term-fg1 { } /* don't bold beccause it looks weird */
    .term-fg2 { color: #838887; } /* faint (decreased intensity) - same as gray really */
    .term-fg3 { font-style: italic; } /* italic */
    .term-fg4 { text-decoration: underline; } /* underline */
    .term-fg5 { animation: blink-animation 1s steps(3, start) infinite; } /* blink */
    .term-fg9 { text-decoration: line-through; } /* crossed-out */

    .term-fg30 { color: #666666; } /* black (but we can't use black, so a diff color) */
    .term-fg31 { color: #ff7070; } /* red */
    .term-fg32 { color: #b0f986; } /* green */
    .term-fg33 { color: #c6c502; } /* yellow */
    .term-fg34 { color: #8db7e0; } /* blue */
    .term-fg35 { color: #f271fb; } /* magenta */
    .term-fg36 { color: #6bf7ff; } /* cyan */

    /* high intense colors */
    .term-fgi1 { color: #5ef765; }
    .term-fgi90 { color: #838887; } /* grey */
    .term-fgi91 { color: #ff3333; } /* red */
    .term-fgi92 { color: #00FF00; } /* green */
    .term-fgi93 { color: #fffc67; } /* yellow */
    .term-fgi94 { color: #6871ff; } /* blue */
    .term-fgi95 { color: #ff76ff; } /* magenta */
    .term-fgi96 { color: #60fcff; } /* cyan */

    /* background colors */
    .term-bg40 { background: #676767; } /* grey */
    .term-bg41 { background: #ff4343; } /* red */
    .term-bg42 { background: #99ff5f; } /* green */

    /* custom foreground/background combos for readability */
    .term-fg31.term-bg40 { color: #F8A39F; }

    /* xterm colors */
    .term-fgx16 { color: #000000; }
    .term-fgx17 { color: #00005f; }
    .term-fgx18 { color: #000087; }
    .term-fgx19 { color: #0000af; }
    .term-fgx20 { color: #0000d7; }
    .term-fgx21 { color: #0000ff; }
    .term-fgx22 { color: #005f00; }
    .term-fgx23 { color: #005f5f; }
    .term-fgx24 { color: #005f87; }
    .term-fgx25 { color: #005faf; }
    .term-fgx26 { color: #005fd7; }
    .term-fgx27 { color: #005fff; }
    .term-fgx28 { color: #008700; }
    .term-fgx29 { color: #00875f; }
    .term-fgx30 { color: #008787; }
    .term-fgx31 { color: #0087af; }
    .term-fgx32 { color: #0087d7; }
    .term-fgx33 { color: #0087ff; }
    .term-fgx34 { color: #00af00; }
    .term-fgx35 { color: #00af5f; }
    .term-fgx36 { color: #00af87; }
    .term-fgx37 { color: #00afaf; }
    .term-fgx38 { color: #00afd7; }
    .term-fgx39 { color: #00afff; }
    .term-fgx40 { color: #00d700; }
    .term-fgx41 { color: #00d75f; }
    .term-fgx42 { color: #00d787; }
    .term-fgx43 { color: #00d7af; }
    .term-fgx44 { color: #00d7d7; }
    .term-fgx45 { color: #00d7ff; }
    .term-fgx46 { color: #00ff00; }
    .term-fgx47 { color: #00ff5f; }
    .term-fgx48 { color: #00ff87; }
    .term-fgx49 { color: #00ffaf; }
    .term-fgx50 { color: #00ffd7; }
    .term-fgx51 { color: #00ffff; }
    .term-fgx52 { color: #5f0000; }
    .term-fgx53 { color: #5f005f; }
    .term-fgx54 { color: #5f0087; }
    .term-fgx55 { color: #5f00af; }
    .term-fgx56 { color: #5f00d7; }
    .term-fgx57 { color: #5f00ff; }
    .term-fgx58 { color: #5f5f00; }
    .term-fgx59 { color: #5f5f5f; }
    .term-fgx60 { color: #5f5f87; }
    .term-fgx61 { color: #5f5faf; }
    .term-fgx62 { color: #5f5fd7; }
    .term-fgx63 { color: #5f5fff; }
    .term-fgx64 { color: #5f8700; }
    .term-fgx65 { color: #5f875f; }
    .term-fgx66 { color: #5f8787; }
    .term-fgx67 { color: #5f87af; }
    .term-fgx68 { color: #5f87d7; }
    .term-fgx69 { color: #5f87ff; }
    .term-fgx70 { color: #5faf00; }
    .term-fgx71 { color: #5faf5f; }
    .term-fgx72 { color: #5faf87; }
    .term-fgx73 { color: #5fafaf; }
    .term-fgx74 { color: #5fafd7; }
    .term-fgx75 { color: #5fafff; }
    .term-fgx76 { color: #5fd700; }
    .term-fgx77 { color: #5fd75f; }
    .term-fgx78 { color: #5fd787; }
    .term-fgx79 { color: #5fd7af; }
    .term-fgx80 { color: #5fd7d7; }
    .term-fgx81 { color: #5fd7ff; }
    .term-fgx82 { color: #5fff00; }
    .term-fgx83 { color: #5fff5f; }
    .term-fgx84 { color: #5fff87; }
    .term-fgx85 { color: #5fffaf; }
    .term-fgx86 { color: #5fffd7; }
    .term-fgx87 { color: #5fffff; }
    .term-fgx88 { color: #870000; }
    .term-fgx89 { color: #87005f; }
    .term-fgx90 { color: #870087; }
    .term-fgx91 { color: #8700af; }
    .term-fgx92 { color: #8700d7; }
    .term-fgx93 { color: #8700ff; }
    .term-fgx94 { color: #875f00; }
    .term-fgx95 { color: #875f5f; }
    .term-fgx96 { color: #875f87; }
    .term-fgx97 { color: #875faf; }
    .term-fgx98 { color: #875fd7; }
    .term-fgx99 { color: #875fff; }
    .term-fgx100 { color: #878700; }
    .term-fgx101 { color: #87875f; }
    .term-fgx102 { color: #878787; }
    .term-fgx103 { color: #8787af; }
    .term-fgx104 { color: #8787d7; }
    .term-fgx105 { color: #8787ff; }
    .term-fgx106 { color: #87af00; }
    .term-fgx107 { color: #87af5f; }
    .term-fgx108 { color: #87af87; }
    .term-fgx109 { color: #87afaf; }
    .term-fgx110 { color: #87afd7; }
    .term-fgx111 { color: #87afff; }
    .term-fgx112 { color: #87d700; }
    .term-fgx113 { color: #87d75f; }
    .term-fgx114 { color: #87d787; }
    .term-fgx115 { color: #87d7af; }
    .term-fgx116 { color: #87d7d7; }
    .term-fgx117 { color: #87d7ff; }
    .term-fgx118 { color: #87ff00; }
    .term-fgx119 { color: #87ff5f; }
    .term-fgx120 { color: #87ff87; }
    .term-fgx121 { color: #87ffaf; }
    .term-fgx122 { color: #87ffd7; }
    .term-fgx123 { color: #87ffff; }
    .term-fgx124 { color: #af0000; }
    .term-fgx125 { color: #af005f; }
    .term-fgx126 { color: #af0087; }
    .term-fgx127 { color: #af00af; }
    .term-fgx128 { color: #af00d7; }
    .term-fgx129 { color: #af00ff; }
    .term-fgx130 { color: #af5f00; }
    .term-fgx131 { color: #af5f5f; }
    .term-fgx132 { color: #af5f87; }
    .term-fgx133 { color: #af5faf; }
    .term-fgx134 { color: #af5fd7; }
    .term-fgx135 { color: #af5fff; }
    .term-fgx136 { color: #af8700; }
    .term-fgx137 { color: #af875f; }
    .term-fgx138 { color: #af8787; }
    .term-fgx139 { color: #af87af; }
    .term-fgx140 { color: #af87d7; }
    .term-fgx141 { color: #af87ff; }
    .term-fgx142 { color: #afaf00; }
    .term-fgx143 { color: #afaf5f; }
    .term-fgx144 { color: #afaf87; }
    .term-fgx145 { color: #afafaf; }
    .term-fgx146 { color: #afafd7; }
    .term-fgx147 { color: #afafff; }
    .term-fgx148 { color: #afd700; }
    .term-fgx149 { color: #afd75f; }
    .term-fgx150 { color: #afd787; }
    .term-fgx151 { color: #afd7af; }
    .term-fgx152 { color: #afd7d7; }
    .term-fgx153 { color: #afd7ff; }
    .term-fgx154 { color: #afff00; }
    .term-fgx155 { color: #afff5f; }
    .term-fgx156 { color: #afff87; }
    .term-fgx157 { color: #afffaf; }
    .term-fgx158 { color: #afffd7; }
    .term-fgx159 { color: #afffff; }
    .term-fgx160 { color: #d70000; }
    .term-fgx161 { color: #d7005f; }
    .term-fgx162 { color: #d70087; }
    .term-fgx163 { color: #d700af; }
    .term-fgx164 { color: #d700d7; }
    .term-fgx165 { color: #d700ff; }
    .term-fgx166 { color: #d75f00; }
    .term-fgx167 { color: #d75f5f; }
    .term-fgx168 { color: #d75f87; }
    .term-fgx169 { color: #d75faf; }
    .term-fgx170 { color: #d75fd7; }
    .term-fgx171 { color: #d75fff; }
    .term-fgx172 { color: #d78700; }
    .term-fgx173 { color: #d7875f; }
    .term-fgx174 { color: #d78787; }
    .term-fgx175 { color: #d787af; }
    .term-fgx176 { color: #d787d7; }
    .term-fgx177 { color: #d787ff; }
    .term-fgx178 { color: #d7af00; }
    .term-fgx179 { color: #d7af5f; }
    .term-fgx180 { color: #d7af87; }
    .term-fgx181 { color: #d7afaf; }
    .term-fgx182 { color: #d7afd7; }
    .term-fgx183 { color: #d7afff; }
    .term-fgx184 { color: #d7d700; }
    .term-fgx185 { color: #d7d75f; }
    .term-fgx186 { color: #d7d787; }
    .term-fgx187 { color: #d7d7af; }
    .term-fgx188 { color: #d7d7d7; }
    .term-fgx189 { color: #d7d7ff; }
    .term-fgx190 { color: #d7ff00; }
    .term-fgx191 { color: #d7ff5f; }
    .term-fgx192 { color: #d7ff87; }
    .term-fgx193 { color: #d7ffaf; }
    .term-fgx194 { color: #d7ffd7; }
    .term-fgx195 { color: #d7ffff; }
    .term-fgx196 { color: #ff0000; }
    .term-fgx197 { color: #ff005f; }
    .term-fgx198 { color: #ff0087; }
    .term-fgx199 { color: #ff00af; }
    .term-fgx200 { color: #ff00d7; }
    .term-fgx201 { color: #ff00ff; }
    .term-fgx202 { color: #ff5f00; }
    .term-fgx203 { color: #ff5f5f; }
    .term-fgx204 { color: #ff5f87; }
    .term-fgx205 { color: #ff5faf; }
    .term-fgx206 { color: #ff5fd7; }
    .term-fgx207 { color: #ff5fff; }
    .term-fgx208 { color: #ff8700; }
    .term-fgx209 { color: #ff875f; }
    .term-fgx210 { color: #ff8787; }
    .term-fgx211 { color: #ff87af; }
    .term-fgx212 { color: #ff87d7; }
    .term-fgx213 { color: #ff87ff; }
    .term-fgx214 { color: #ffaf00; }
    .term-fgx215 { color: #ffaf5f; }
    .term-fgx216 { color: #ffaf87; }
    .term-fgx217 { color: #ffafaf; }
    .term-fgx218 { color: #ffafd7; }
    .term-fgx219 { color: #ffafff; }
    .term-fgx220 { color: #ffd700; }
    .term-fgx221 { color: #ffd75f; }
    .term-fgx222 { color: #ffd787; }
    .term-fgx223 { color: #ffd7af; }
    .term-fgx224 { color: #ffd7d7; }
    .term-fgx225 { color: #ffd7ff; }
    .term-fgx226 { color: #ffff00; }
    .term-fgx227 { color: #ffff5f; }
    .term-fgx228 { color: #ffff87; }
    .term-fgx229 { color: #ffffaf; }
    .term-fgx230 { color: #ffffd7; }
    .term-fgx231 { color: #ffffff; }
    .term-fgx232 { color: #080808; }
    .term-fgx233 { color: #121212; }
    .term-fgx234 { color: #1c1c1c; }
    .term-fgx235 { color: #262626; }
    .term-fgx236 { color: #303030; }
    .term-fgx237 { color: #3a3a3a; }
    .term-fgx238 { color: #444444; }
    .term-fgx239 { color: #4e4e4e; }
    .term-fgx240 { color: #585858; }
    .term-fgx241 { color: #626262; }
    .term-fgx242 { color: #6c6c6c; }
    .term-fgx243 { color: #767676; }
    .term-fgx244 { color: #808080; }
    .term-fgx245 { color: #8a8a8a; }
    .term-fgx246 { color: #949494; }
    .term-fgx247 { color: #9e9e9e; }
    .term-fgx248 { color: #a8a8a8; }
    .term-fgx249 { color: #b2b2b2; }
    .term-fgx250 { color: #bcbcbc; }
    .term-fgx251 { color: #c6c6c6; }
    .term-fgx252 { color: #d0d0d0; }
    .term-fgx253 { color: #dadada; }
    .term-fgx254 { color: #e4e4e4; }
    .term-fgx255 { color: #eeeeee; }
</style>

</head>
<body>
    <div class="col-xl-10 col-xxl-8 mx-auto px-3 py-1 py-md-3">
        <main class="container-fluid">
            <div class="row">
                <div>
                    <div class="float-end">
                        <div class="form-check form-switch">
                            <i class="bi bi-brightness-low" id="dark-mode-icon"></i>
                            <input class="form-check-input" type="checkbox" role="switch" id="dark-mode-toggle" data-bs-toggle="tooltip"
                                   data-bs-placement="bottom" data-bs-title="Toggle Dark Mode"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"role="button" aria-expanded="true" aria-controls="id-21acad3f28d2e072d91ff4ac">
        
            <div class="col-12 col-sm-9 text-start"><h1>op-reth</h1></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+1306</span></div>
                <div class="text-start"><span class="text-danger">-747</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse show border-1 ps-3 my-3" id="id-21acad3f28d2e072d91ff4ac">
        <div><p>This is an overview of the changes in <a href="https://github.com/anton-rs/op-reth">op-reth</a>, a fork of <a href="https://github.com/paradigmxyz/reth">reth</a>, part of the <a href="https://github.com/ethereum-optimism/optimism">OP Stack</a>.
<br />
<br />
Similar minimal-diff forks of Ethereum Execution Clients for the <a href="https://github.com/ethereum-optimism/optimism">OP Stack</a> include:
  <br />
  - <a href="https://github.com/testinprod-io/op-erigon">op-erigon</a> built by <a href="https://github.com/testinprod-io">testinprod-io</a>.
  <br />
  - <a href="https://github.com/ethereum-optimism/op-geth">op-geth</a> built by <a href="https://github.com/ethereum-optimism/optimism">optimism</a>.</p>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-8cda2657a98b3acc8352aeee"role="button" aria-expanded="false" aria-controls="id-8cda2657a98b3acc8352aeee">
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-8cda2657a98b3acc8352aeee">
        <div><p>This fork tests the modifications to <code>greeter.go</code> and utils.</p>
</div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-99a3f16da276326206f40d34"role="button" aria-expanded="false" aria-controls="id-99a3f16da276326206f40d34">
        
            <div class="col-12 col-sm-9 text-start"><h2>modifications to hello/printer</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-99a3f16da276326206f40d34">
        <div><p>The <code>printer</code> package prints greetings</p>
</div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-7e1c7fceb7a83c16caa6363f"role="button" aria-expanded="false" aria-controls="id-7e1c7fceb7a83c16caa6363f">
        
            <div class="col-12 col-sm-9 text-start"><h2>MOTD</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-7e1c7fceb7a83c16caa6363f">
        <div><p>New package that generates a message of the day (MOTD) to add to the greeting</p>
</div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-b72f9d4cf1095ee09c007b88"role="button" aria-expanded="false" aria-controls="id-b72f9d4cf1095ee09c007b88">
        
            <div class="col-12 col-sm-9 text-start"><h2>Other changes</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+1306</span></div>
                <div class="text-start"><span class="text-danger">-747</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-b72f9d4cf1095ee09c007b88">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-626eb8394796fd1e32c80134" role="button"
                   aria-expanded="false" aria-controls="id-626eb8394796fd1e32c80134">
                    <code>.github/workflows/bench.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/.github/workflows/bench.yml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/.github/workflows/bench.yml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-626eb8394796fd1e32c80134"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;bench.yml anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;bench.yml</span>
<span class="term-fg1">index 8dec739e70235b21d62543694c2b8ac90dfe2d4b..5fec9c0790dadedf77af764599cdb0f2064c3648 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;bench.yml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;bench.yml</span>
<span class="term-fg36">@@ -1,8 +1,6 @@</span>
 on:
   pull_request:
   merge_group:
<span class="term-fg31">-  push:</span>
<span class="term-fg31">-    branches: [main]</span>
&nbsp;
 env:
   RUSTFLAGS: -D warnings
<span class="term-fg36">@@ -81,4 +79,4 @@</span>     steps:
       - name: Decide whether the needed jobs succeeded or failed
         uses: re-actors&#47;alls-green@release&#47;v1
         with:
<span class="term-fg31">-          jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">+          jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c69f9b8380131cf75d66cfb5" role="button"
                   aria-expanded="false" aria-controls="id-c69f9b8380131cf75d66cfb5">
                    <code>.github/workflows/ci.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/.github/workflows/ci.yml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/.github/workflows/ci.yml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c69f9b8380131cf75d66cfb5"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;ci.yml anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg1">index f977091274256cbde3f6d84e7ee4fc354a242015..0164ead1a15ff357b798d04c45c8b7c58fc1669a 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;ci.yml</span>
<span class="term-fg36">@@ -1,8 +1,6 @@</span>
 on:
   pull_request:
   merge_group:
<span class="term-fg31">-  push:</span>
<span class="term-fg31">-    branches: [main]</span>
&nbsp;
 env:
   RUSTFLAGS: -D warnings
<span class="term-fg36">@@ -70,4 +68,4 @@</span>     steps:
       - name: Decide whether the needed jobs succeeded or failed
         uses: re-actors&#47;alls-green@release&#47;v1
         with:
<span class="term-fg31">-          jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">+          jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-34ea3b8abf6fc63a24c6e4b1" role="button"
                   aria-expanded="false" aria-controls="id-34ea3b8abf6fc63a24c6e4b1">
                    <code>.github/workflows/fuzz.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/.github/workflows/fuzz.yml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/.github/workflows/fuzz.yml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-34ea3b8abf6fc63a24c6e4b1"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;fuzz.yml anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;fuzz.yml</span>
<span class="term-fg1">index 8f2760024bdd5991ba6761c2bd722318650f00d6..61459252cbd9628072e26927dac25bbe8620d7d3 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;fuzz.yml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;fuzz.yml</span>
<span class="term-fg36">@@ -1,8 +1,6 @@</span>
 on:
   pull_request:
   merge_group:
<span class="term-fg31">-  push:</span>
<span class="term-fg31">-    branches: [main]</span>
&nbsp;
 env:
   RUSTFLAGS: -D warnings
<span class="term-fg36">@@ -72,4 +70,4 @@</span>       - run: echo OK.
       #- name: Decide whether the needed jobs succeeded or failed
       #  uses: re-actors&#47;alls-green@release&#47;v1
       #  with:
<span class="term-fg31">-      #    jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">+      #    jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-85f3e04dcddffb804d30b13d" role="button"
                   aria-expanded="false" aria-controls="id-85f3e04dcddffb804d30b13d">
                    <code>.github/workflows/integration.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/.github/workflows/integration.yml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/.github/workflows/integration.yml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-85f3e04dcddffb804d30b13d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;integration.yml anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;integration.yml</span>
<span class="term-fg1">index 7bb68ccac4e654d1d5e8fa4503f6ee37af8d398c..07c58b8675df12e9e1e3955ef34a887311227f4f 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;integration.yml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;integration.yml</span>
<span class="term-fg36">@@ -1,8 +1,6 @@</span>
 on:
   pull_request:
   merge_group:
<span class="term-fg31">-  push:</span>
<span class="term-fg31">-    branches: [main]</span>
&nbsp;
 env:
   RUSTFLAGS: -D warnings</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-311faf7fa223311ebdcafb3c" role="button"
                   aria-expanded="false" aria-controls="id-311faf7fa223311ebdcafb3c">
                    <code>.github/workflows/unit.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/.github/workflows/unit.yml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/.github/workflows/unit.yml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-311faf7fa223311ebdcafb3c"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;unit.yml anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;unit.yml</span>
<span class="term-fg1">index d0aa7243eed70ac39ce4910013f0c97433f6f138..041eadbe800ade62863497c2e50c886971bdbaec 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;.github&#47;workflows&#47;unit.yml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;.github&#47;workflows&#47;unit.yml</span>
<span class="term-fg36">@@ -1,8 +1,6 @@</span>
 on:
   pull_request:
   merge_group:
<span class="term-fg31">-  push:</span>
<span class="term-fg31">-    branches: [main]</span>
&nbsp;
 env:
   RUSTFLAGS: -D warnings
<span class="term-fg36">@@ -20,7 +18,7 @@</span>     name: test (partition ${{ matrix.partition }}&#47;${{ strategy.job-total }})
     runs-on: ubuntu-20.04
     strategy:
       matrix:
<span class="term-fg31">-        partition: [1, 2, 3, 4, 5]</span>
<span class="term-fg32">+        partition: [1, 2, 3, 4]</span>
     steps:
       - name: Checkout sources
         uses: actions&#47;checkout@v3
<span class="term-fg36">@@ -103,4 +101,4 @@</span>     steps:
       - name: Decide whether the needed jobs succeeded or failed
         uses: re-actors&#47;alls-green@release&#47;v1
         with:
<span class="term-fg31">-          jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">+          jobs: ${{ toJSON(needs) }}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9f1fbbe95fb515fe53baa87e" role="button"
                   aria-expanded="false" aria-controls="id-9f1fbbe95fb515fe53baa87e">
                    <code>.gitignore</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/.gitignore" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/.gitignore" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9f1fbbe95fb515fe53baa87e"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;.gitignore anton-rs&#47;op-reth&#47;.gitignore</span>
<span class="term-fg1">index c2c144f4a1c6b093f4011478ad6936c840fc8c30..2cebc21f55e2d06aa4f3250390613a1df506e7ef 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;.gitignore</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;.gitignore</span>
<span class="term-fg36">@@ -9,6 +9,9 @@</span>
 # MSVC Windows builds of rustc generate these, which store debugging information
 *.pdb
&nbsp;
<span class="term-fg32">+# Generated by VSCode</span>
<span class="term-fg32">+.vscode</span>
<span class="term-fg32">+</span>
&nbsp;
 # Generated by Intellij-based IDEs.
 .idea</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8ddc6071e7c54711cdf02e5a" role="button"
                   aria-expanded="false" aria-controls="id-8ddc6071e7c54711cdf02e5a">
                    <code>bin/reth/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/bin/reth/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/bin/reth/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8ddc6071e7c54711cdf02e5a"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;bin&#47;reth&#47;Cargo.toml anton-rs&#47;op-reth&#47;bin&#47;reth&#47;Cargo.toml</span>
<span class="term-fg1">index 2c0965dfaa322857984af7a7020d25604c7f4476..5d98c73e012ce747fbf3b70d363c6d2c2fb67c42 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;bin&#47;reth&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;bin&#47;reth&#47;Cargo.toml</span>
<span class="term-fg36">@@ -99,6 +99,16 @@</span> min-warn-logs = [&quot;tracing&#47;release_max_level_warn&quot;]
 min-info-logs = [&quot;tracing&#47;release_max_level_info&quot;]
 min-debug-logs = [&quot;tracing&#47;release_max_level_debug&quot;]
 min-trace-logs = [&quot;tracing&#47;release_max_level_trace&quot;]
<span class="term-fg32">+optimism = [</span>
<span class="term-fg32">+  &quot;reth-primitives&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-revm&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-interfaces&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-rpc-engine-api&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-transaction-pool&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-provider&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-beacon-consensus&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-basic-payload-builder&#47;optimism&quot;,</span>
<span class="term-fg32">+]</span>
&nbsp;
 [build-dependencies]
 vergen = { version = &quot;8.0.0&quot;, features = [&quot;build&quot;, &quot;cargo&quot;, &quot;git&quot;, &quot;gitcl&quot;] }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-50ed401cae9ddd1a3f0b26df" role="button"
                   aria-expanded="false" aria-controls="id-50ed401cae9ddd1a3f0b26df">
                    <code>bin/reth/src/args/rpc_server_args.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/bin/reth/src/args/rpc_server_args.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/bin/reth/src/args/rpc_server_args.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-6</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-50ed401cae9ddd1a3f0b26df"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;bin&#47;reth&#47;src&#47;args&#47;rpc_server_args.rs anton-rs&#47;op-reth&#47;bin&#47;reth&#47;src&#47;args&#47;rpc_server_args.rs</span>
<span class="term-fg1">index a38cd699445016137214bd9c027311d424f705a4..4dbde75cbd41849daad86f147af1af62148bfb57 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;bin&#47;reth&#47;src&#47;args&#47;rpc_server_args.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;bin&#47;reth&#47;src&#47;args&#47;rpc_server_args.rs</span>
<span class="term-fg36">@@ -17,13 +17,13 @@</span>         cache::{
             DEFAULT_BLOCK_CACHE_MAX_LEN, DEFAULT_ENV_CACHE_MAX_LEN, DEFAULT_RECEIPT_CACHE_MAX_LEN,
         },
         gas_oracle::GasPriceOracleConfig,
<span class="term-fg31">-        RPC_DEFAULT_GAS_CAP,</span>
     },
     JwtError, JwtSecret,
 };
 use reth_rpc_builder::{
     auth::{AuthServerConfig, AuthServerHandle},
     constants,
<span class="term-fg32">+    constants::RPC_DEFAULT_GAS_CAP,</span>
     error::RpcError,
     EthConfig, IpcServerBuilder, RethRpcModule, RpcModuleBuilder, RpcModuleConfig,
     RpcModuleSelection, RpcServerConfig, RpcServerHandle, ServerBuilder, TransportRpcModuleConfig,
<span class="term-fg36">@@ -43,9 +43,7 @@</span> pub(crate) const RPC_DEFAULT_MAX_SUBS_PER_CONN: u32 = 1024;
 &#47;&#47;&#47; Default max request size in MB.
 pub(crate) const RPC_DEFAULT_MAX_REQUEST_SIZE_MB: u32 = 15;
 &#47;&#47;&#47; Default max response size in MB.
<span class="term-fg31">-&#47;&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47;&#47; This is only relevant for very large trace responses.</span>
<span class="term-fg31">-pub(crate) const RPC_DEFAULT_MAX_RESPONSE_SIZE_MB: u32 = 115;</span>
<span class="term-fg32">+pub(crate) const RPC_DEFAULT_MAX_RESPONSE_SIZE_MB: u32 = 100;</span>
 &#47;&#47;&#47; Default number of incoming connections.
 pub(crate) const RPC_DEFAULT_MAX_CONNECTIONS: u32 = 100;
 &#47;&#47;&#47; Default number of incoming connections.
<span class="term-fg36">@@ -141,7 +139,7 @@</span>         long,
         alias = &quot;rpc.gascap&quot;,
         value_name = &quot;GAS_CAP&quot;,
         value_parser = RangedU64ValueParser::&lt;u64&gt;::new().range(1..),
<span class="term-fg31">-        default_value_t = RPC_DEFAULT_GAS_CAP.into()</span>
<span class="term-fg32">+        default_value_t = RPC_DEFAULT_GAS_CAP</span>
     )]
     pub rpc_gas_cap: u64,
&nbsp;
<span class="term-fg36">@@ -515,7 +513,7 @@</span>     #[test]
     fn test_rpc_gas_cap() {
         let args = CommandParser::&lt;RpcServerArgs&gt;::parse_from([&quot;reth&quot;]).args;
         let config = args.eth_config();
<span class="term-fg31">-        assert_eq!(config.rpc_gas_cap, Into::&lt;u64&gt;::into(RPC_DEFAULT_GAS_CAP));</span>
<span class="term-fg32">+        assert_eq!(config.rpc_gas_cap, RPC_DEFAULT_GAS_CAP);</span>
&nbsp;
         let args =
             CommandParser::&lt;RpcServerArgs&gt;::parse_from([&quot;reth&quot;, &quot;--rpc.gascap&quot;, &quot;1000&quot;]).args;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5c007a084cf67eff787c420a" role="button"
                   aria-expanded="false" aria-controls="id-5c007a084cf67eff787c420a">
                    <code>bin/reth/src/init.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/bin/reth/src/init.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/bin/reth/src/init.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5c007a084cf67eff787c420a"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;bin&#47;reth&#47;src&#47;init.rs anton-rs&#47;op-reth&#47;bin&#47;reth&#47;src&#47;init.rs</span>
<span class="term-fg1">index a70949dbbe9d76a9d94d7abbc46ebbcfd0e03ab1..4c45edbe25b4f0b56c679c8d02d5b3700f565ed1 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;bin&#47;reth&#47;src&#47;init.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;bin&#47;reth&#47;src&#47;init.rs</span>
<span class="term-fg36">@@ -272,6 +272,8 @@</span>             hardforks: BTreeMap::default(),
             fork_timestamps: ForkTimestamps { shanghai: None },
             genesis_hash: None,
             paris_block_and_final_difficulty: None,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            optimism: None,</span>
         });
&nbsp;
         let db = create_test_rw_db();</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eef0d0744ed64b124d9d23b4" role="button"
                   aria-expanded="false" aria-controls="id-eef0d0744ed64b124d9d23b4">
                    <code>book/SUMMARY.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/book/SUMMARY.md" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/book/SUMMARY.md" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eef0d0744ed64b124d9d23b4"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;book&#47;SUMMARY.md anton-rs&#47;op-reth&#47;book&#47;SUMMARY.md</span>
<span class="term-fg1">index 21a98cbaf6e694a45bbcc5e2cd90fdd195e71437..8faf1b1ab3be56cb2562fe89be219c537a5b2160 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;book&#47;SUMMARY.md</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;book&#47;SUMMARY.md</span>
<span class="term-fg36">@@ -5,7 +5,6 @@</span> 1. [Installation](.&#47;installation&#47;installation.md)
    1. [Pre-Built Binaries](.&#47;installation&#47;binaries.md)
    1. [Docker](.&#47;installation&#47;docker.md)
    1. [Build from Source](.&#47;installation&#47;source.md)
<span class="term-fg31">-   1. [Build for ARM devices](.&#47;installation&#47;build-for-arm-devices.md)</span>
    1. [Update Priorities](.&#47;installation&#47;priorities.md)
 1. [Run a Node](.&#47;run&#47;run-a-node.md)
    1. [Mainnet or official testnets](.&#47;run&#47;mainnet.md)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a60dd31f6456436daf4671b1" role="button"
                   aria-expanded="false" aria-controls="id-a60dd31f6456436daf4671b1">
                    <code>book/installation/build-for-arm-devices.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/book/installation/build-for-arm-devices.md" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-49</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a60dd31f6456436daf4671b1"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;book&#47;installation&#47;build-for-arm-devices.md anton-rs&#47;op-reth&#47;book&#47;installation&#47;build-for-arm-devices.md</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index ac95f16939f827e4cf403486dac3f773869569da..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;book&#47;installation&#47;build-for-arm-devices.md</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,49 +0,0 @@</span>
<span class="term-fg31">-# Building for ARM devices</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Reth can be build for and run on ARM devices, but there are a few things to take into considerations before.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-## CPU Architecture</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-First, you must have a 64-bit CPU and Operating System, otherwise some of the project dependencies will not be able to compile or be executed.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-## Memory Layout on AArch64</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Then, you must setup the virtual memory layout in such a way that the user space is sufficiently large.</span>
<span class="term-fg31">-From [the Linux Kernel documentation](https:&#47;&#47;www.kernel.org&#47;doc&#47;html&#47;v5.3&#47;arm64&#47;memory.html#:~:text=AArch64%20Linux%20uses%20either%203,for%20both%20user%20and%20kernel.), you can see that the memory layout with 4KB pages and a level-3 translation table limits the user space to 512GB, which is too low for Reth to sync on Ethereum mainnet.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-## Build Reth</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-If both your CPU architecture and the memory layout are valid, the instructions for building Reth will not differ from [the standard process](https:&#47;&#47;paradigmxyz.github.io&#47;reth&#47;installation&#47;source.html).</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-## Troubleshooting</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&gt; If you ever need to recompile the Linux Kernel because the official OS images for your ARM board don&#39;t have the right memory layout configuration, you can use [the Armbian build framework](https:&#47;&#47;github.com&#47;armbian&#47;build).</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-### Failed to open database</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&gt; This error is documented [here](https:&#47;&#47;github.com&#47;paradigmxyz&#47;reth&#47;issues&#47;2211).</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-This error is raised whenever MBDX can not open a database due to the limitations imposed by the memory layout of your kernel. If the user space is limited to 512GB, the database will not be able to grow below this size.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-You will need to recompile the Linux Kernel to fix the issue.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-A simple and safe approach to achieve this is to use the Armbian build framework to create a new image of the OS that will be flashed to a storage device of your choice - an SD card for example - with the following kernel feature values:</span>
<span class="term-fg31">-- **Page Size**: 64 KB</span>
<span class="term-fg31">-- **Virtual Address Space Size**: 48 Bits</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-To be able to build an Armbian image and set those values, you will need to:</span>
<span class="term-fg31">-- Clone the Armbian build framework repository</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-git clone https:&#47;&#47;github.com&#47;armbian&#47;build</span>
<span class="term-fg31">-cd build</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-- Run the compile script with the following parameters:</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-.&#47;compile.sh \</span>
<span class="term-fg31">-BUILD_MINIMAL=yes \</span>
<span class="term-fg31">-BUILD_DESKTOP=no \</span>
<span class="term-fg31">-KERNEL_CONFIGURE=yes \</span>
<span class="term-fg31">-CARD_DEVICE=&quot;&#47;dev&#47;sdX&quot; # Replace sdX with your own storage device</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-- From there, you will be able to select the target board, the OS release and branch. Then, once you get in the **Kernel Configuration** screen, select the **Kernel Features options** and set the previous values accordingly.</span>
<span class="term-fg31">-- Wait for the process to finish, plug your storage device into your board and start it. You can now download or install Reth and it should work properly.</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-98a2621849f4255503584621" role="button"
                   aria-expanded="false" aria-controls="id-98a2621849f4255503584621">
                    <code>book/installation/source.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/book/installation/source.md" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/book/installation/source.md" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-98a2621849f4255503584621"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;book&#47;installation&#47;source.md anton-rs&#47;op-reth&#47;book&#47;installation&#47;source.md</span>
<span class="term-fg1">index a76326ba5f32cc18ac3ff4128385d93004fe540d..a4448482d421edfe175f7ad41eda0198229feb06 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;book&#47;installation&#47;source.md</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;book&#47;installation&#47;source.md</span>
<span class="term-fg36">@@ -1,6 +1,6 @@</span>
 # Build from Source
&nbsp;
<span class="term-fg31">-You can build Reth on Linux, macOS, Windows, and Windows WSL2.</span>
<span class="term-fg32">+You can build Reth on Linux, macOS, and Windows WSL2.</span>
&nbsp;
 &gt; **Note**
 &gt;
<span class="term-fg36">@@ -28,7 +28,6 @@</span> operating system:
&nbsp;
 - **Ubuntu**: `apt-get install libclang-dev pkg-config build-essential`
 - **macOS**: `brew install llvm pkg-config`
<span class="term-fg31">-- **Windows**: `choco install llvm` or `winget install LLVM.LLVM`</span>
&nbsp;
 These are needed to build bindings for Reth&#39;s database.
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-58a75345d76c1ed710a5a995" role="button"
                   aria-expanded="false" aria-controls="id-58a75345d76c1ed710a5a995">
                    <code>book/run/observability.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/book/run/observability.md" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/book/run/observability.md" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-10</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-58a75345d76c1ed710a5a995"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;book&#47;run&#47;observability.md anton-rs&#47;op-reth&#47;book&#47;run&#47;observability.md</span>
<span class="term-fg1">index 4ab2951805e429d5935aa1aee40ce0a2a1f25554..9eb3e99a5e8d36a27991853e3fb9524710157591 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;book&#47;run&#47;observability.md</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;book&#47;run&#47;observability.md</span>
<span class="term-fg36">@@ -43,19 +43,11 @@</span> brew services start prometheus
 brew services start grafana
 ```
&nbsp;
<span class="term-fg31">-This will start a Prometheus service which [by default scrapes itself about the current instance](https:&#47;&#47;prometheus.io&#47;docs&#47;introduction&#47;first_steps&#47;#:~:text=The%20job%20contains%20a%20single,%3A%2F%2Flocalhost%3A9090%2Fmetrics.). So you&#39;ll need to change its config to hit your Reth nodes metrics endpoint at `localhost:9001` which you set using the `--metrics` flag.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-You can find an example config for the Prometheus service in the repo here: [`etc&#47;prometheus&#47;prometheus.yml`](https:&#47;&#47;github.com&#47;paradigmxyz&#47;reth&#47;blob&#47;main&#47;etc&#47;prometheus&#47;prometheus.yml)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Depending on your installation you may find the config for your Prometheus service at:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-- OSX: `&#47;opt&#47;homebrew&#47;etc&#47;prometheus.yml`</span>
<span class="term-fg31">-- Linuxbrew: `&#47;home&#47;linuxbrew&#47;.linuxbrew&#47;etc&#47;prometheus.yml`</span>
<span class="term-fg31">-- Others: `&#47;usr&#47;local&#47;etc&#47;prometheus&#47;prometheus.yml`</span>
<span class="term-fg32">+This will start a Prometheus service which by default scrapes the metrics exposed at `localhost:9001`. If you launched reth with a different `--metrics` endpoint, you can change the Prometheus config file at `&#47;usr&#47;local&#47;etc&#47;prometheus&#47;prometheus.yml` to point to the correct endpoint, and then restart the Prometheus service. You can also stop the service and launch Prometheus with a custom `prometheus.yml` like the one provided under [`etc&#47;prometheus&#47;prometheus.yml`](https:&#47;&#47;github.com&#47;paradigmxyz&#47;reth&#47;blob&#47;main&#47;etc&#47;prometheus&#47;prometheus.yml) in this repo.</span>
&nbsp;
 Next, open up &quot;localhost:3000&quot; in your browser, which is the default URL for Grafana. Here, &quot;admin&quot; is the default for both the username and password.
&nbsp;
<span class="term-fg31">-Once you&#39;ve logged in, click on the gear icon in the lower left, and select &quot;Data Sources&quot;. Click on &quot;Add data source&quot;, and select &quot;Prometheus&quot; as the type. In the HTTP URL field, enter `http:&#47;&#47;localhost:9090`. Finally, click &quot;Save &amp; Test&quot;.</span>
<span class="term-fg32">+Once you&#39;ve logged in, click on the gear icon in the lower left, and select &quot;Data Sources&quot;. Click on &quot;Add data source&quot;, and select &quot;Prometheus&quot; as the type. In the HTTP URL field, enter `http:&#47;&#47;localhost:9090`, this is the default endpoint for the Prometheus scrape endpoint. Finally, click &quot;Save &amp; Test&quot;.</span>
&nbsp;
 As this might be a point of confusion, `localhost:9001`, which we supplied to `--metrics`, is the endpoint that Reth exposes, from which Prometheus collects metrics. Prometheus then exposes `localhost:9090` (by default) for other services (such as Grafana) to consume Prometheus metrics.
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ce78d94f72a1bbccbc1a9b9c" role="button"
                   aria-expanded="false" aria-controls="id-ce78d94f72a1bbccbc1a9b9c">
                    <code>crates/blockchain-tree/src/blockchain_tree.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/blockchain-tree/src/blockchain_tree.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/blockchain-tree/src/blockchain_tree.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ce78d94f72a1bbccbc1a9b9c"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;blockchain-tree&#47;src&#47;blockchain_tree.rs anton-rs&#47;op-reth&#47;crates&#47;blockchain-tree&#47;src&#47;blockchain_tree.rs</span>
<span class="term-fg1">index 6c5f2fe3d626e4647d61c3b62a52e756a87e671d..819d60d4c38c09c4cfa416d40bf9500b005ec47d 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;blockchain-tree&#47;src&#47;blockchain_tree.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;blockchain-tree&#47;src&#47;blockchain_tree.rs</span>
<span class="term-fg36">@@ -1003,7 +1003,6 @@</span>                     new: Arc::new(new_canon_chain.clone()),
                 };
                 &#47;&#47; insert old canon chain
                 self.insert_chain(AppendableChain::new(old_canon_chain));
<span class="term-fg31">-                self.metrics.reorgs.increment(1);</span>
             } else {
                 &#47;&#47; error here to confirm that we are reverting nothing from db.
                 error!(target: &quot;blockchain_tree&quot;, &quot;Reverting nothing from db on block: #{:?}&quot;, block_hash);</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-97dfff5f4f76489843c3072d" role="button"
                   aria-expanded="false" aria-controls="id-97dfff5f4f76489843c3072d">
                    <code>crates/blockchain-tree/src/metrics.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/blockchain-tree/src/metrics.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/blockchain-tree/src/metrics.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-97dfff5f4f76489843c3072d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;blockchain-tree&#47;src&#47;metrics.rs anton-rs&#47;op-reth&#47;crates&#47;blockchain-tree&#47;src&#47;metrics.rs</span>
<span class="term-fg1">index 864fac9474c51a59fddccb80f22d48a6abfa689b..38610c5a69bde1193f3c9e50c6488eceb811f461 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;blockchain-tree&#47;src&#47;metrics.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;blockchain-tree&#47;src&#47;metrics.rs</span>
<span class="term-fg36">@@ -1,5 +1,5 @@</span>
 use reth_metrics::{
<span class="term-fg31">-    metrics::{self, Counter, Gauge},</span>
<span class="term-fg32">+    metrics::{self, Gauge},</span>
     Metrics,
 };
&nbsp;
<span class="term-fg36">@@ -11,8 +11,6 @@</span>     &#47;&#47;&#47; Total number of sidechains (not including the canonical chain)
     pub sidechains: Gauge,
     &#47;&#47;&#47; The highest block number in the canonical chain
     pub canonical_chain_height: Gauge,
<span class="term-fg31">-    &#47;&#47;&#47; The number of reorgs</span>
<span class="term-fg31">-    pub reorgs: Counter,</span>
 }
&nbsp;
 &#47;&#47;&#47; Metrics for the blockchain tree block buffer</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a3e788dcb87578da8c475f02" role="button"
                   aria-expanded="false" aria-controls="id-a3e788dcb87578da8c475f02">
                    <code>crates/consensus/auto-seal/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/consensus/auto-seal/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/consensus/auto-seal/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-140</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a3e788dcb87578da8c475f02"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;lib.rs</span>
<span class="term-fg1">index c9f41a010c6b3c636c467213b987452559b079e6..2cff15528c1f53d94b9a1208ab21e36c70dcdedd 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -21,26 +21,16 @@</span> &#47;&#47;! These downloaders poll the miner, assemble the block, and return transactions that are ready to
 &#47;&#47;! be mined.
&nbsp;
 use reth_beacon_consensus::BeaconEngineMessage;
<span class="term-fg31">-use reth_interfaces::{</span>
<span class="term-fg31">-    consensus::{Consensus, ConsensusError},</span>
<span class="term-fg31">-    executor::{BlockExecutionError, BlockValidationError},</span>
<span class="term-fg31">-};</span>
<span class="term-fg32">+use reth_interfaces::consensus::{Consensus, ConsensusError};</span>
 use reth_primitives::{
<span class="term-fg31">-    constants::{EMPTY_RECEIPTS, EMPTY_TRANSACTIONS, ETHEREUM_BLOCK_GAS_LIMIT},</span>
<span class="term-fg31">-    proofs, Address, Block, BlockBody, BlockHash, BlockHashOrNumber, BlockNumber, ChainSpec,</span>
<span class="term-fg31">-    Header, ReceiptWithBloom, SealedBlock, SealedHeader, TransactionSigned, EMPTY_OMMER_ROOT, H256,</span>
<span class="term-fg31">-    U256,</span>
<span class="term-fg32">+    BlockBody, BlockHash, BlockHashOrNumber, BlockNumber, ChainSpec, Header, SealedBlock,</span>
<span class="term-fg32">+    SealedHeader, H256, U256,</span>
 };
<span class="term-fg31">-use reth_provider::{BlockReaderIdExt, CanonStateNotificationSender, PostState, StateProvider};</span>
<span class="term-fg31">-use reth_revm::executor::Executor;</span>
<span class="term-fg32">+use reth_provider::{BlockReaderIdExt, CanonStateNotificationSender};</span>
 use reth_transaction_pool::TransactionPool;
<span class="term-fg31">-use std::{</span>
<span class="term-fg31">-    collections::HashMap,</span>
<span class="term-fg31">-    sync::Arc,</span>
<span class="term-fg31">-    time::{SystemTime, UNIX_EPOCH},</span>
<span class="term-fg31">-};</span>
<span class="term-fg32">+use std::{collections::HashMap, sync::Arc};</span>
 use tokio::sync::{mpsc::UnboundedSender, RwLock, RwLockReadGuard, RwLockWriteGuard};
<span class="term-fg31">-use tracing::{trace, warn};</span>
<span class="term-fg32">+use tracing::trace;</span>
&nbsp;
 mod client;
 mod mode;
<span class="term-fg36">@@ -192,7 +182,6 @@</span>         self.inner.read().await
     }
 }
&nbsp;
<span class="term-fg31">-&#47;&#47;&#47; In-memory storage for the chain the auto seal engine is building.</span>
 #[derive(Default, Debug)]
 pub(crate) struct StorageInner {
     &#47;&#47;&#47; Headers buffered for download.
<span class="term-fg36">@@ -242,128 +231,5 @@</span>         trace!(target: &quot;consensus::auto&quot;, num=self.best_block, hash=?self.best_hash, &quot;inserting new block&quot;);
         self.headers.insert(header.number, header);
         self.bodies.insert(self.best_hash, body);
         self.hash_to_number.insert(self.best_hash, self.best_block);
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Fills in pre-execution header fields based on the current best block and given</span>
<span class="term-fg31">-    &#47;&#47;&#47; transactions.</span>
<span class="term-fg31">-    pub(crate) fn build_header_template(&amp;self, transactions: &amp;Vec&lt;TransactionSigned&gt;) -&gt; Header {</span>
<span class="term-fg31">-        &#47;&#47; check previous block for base fee</span>
<span class="term-fg31">-        let base_fee_per_gas =</span>
<span class="term-fg31">-            self.headers.get(&amp;self.best_block).and_then(|parent| parent.next_block_base_fee());</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        let mut header = Header {</span>
<span class="term-fg31">-            parent_hash: self.best_hash,</span>
<span class="term-fg31">-            ommers_hash: EMPTY_OMMER_ROOT,</span>
<span class="term-fg31">-            beneficiary: Default::default(),</span>
<span class="term-fg31">-            state_root: Default::default(),</span>
<span class="term-fg31">-            transactions_root: Default::default(),</span>
<span class="term-fg31">-            receipts_root: Default::default(),</span>
<span class="term-fg31">-            withdrawals_root: None,</span>
<span class="term-fg31">-            logs_bloom: Default::default(),</span>
<span class="term-fg31">-            difficulty: U256::from(2),</span>
<span class="term-fg31">-            number: self.best_block + 1,</span>
<span class="term-fg31">-            gas_limit: ETHEREUM_BLOCK_GAS_LIMIT,</span>
<span class="term-fg31">-            gas_used: 0,</span>
<span class="term-fg31">-            timestamp: SystemTime::now().duration_since(UNIX_EPOCH).unwrap_or_default().as_secs(),</span>
<span class="term-fg31">-            mix_hash: Default::default(),</span>
<span class="term-fg31">-            nonce: 0,</span>
<span class="term-fg31">-            base_fee_per_gas,</span>
<span class="term-fg31">-            extra_data: Default::default(),</span>
<span class="term-fg31">-        };</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        header.transactions_root = if transactions.is_empty() {</span>
<span class="term-fg31">-            EMPTY_TRANSACTIONS</span>
<span class="term-fg31">-        } else {</span>
<span class="term-fg31">-            proofs::calculate_transaction_root(transactions)</span>
<span class="term-fg31">-        };</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        header</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Executes the block with the given block and senders, on the provided [Executor].</span>
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; This returns the poststate from execution and post-block changes, as well as the gas used.</span>
<span class="term-fg31">-    pub(crate) fn execute&lt;DB: StateProvider&gt;(</span>
<span class="term-fg31">-        &amp;mut self,</span>
<span class="term-fg31">-        block: &amp;Block,</span>
<span class="term-fg31">-        executor: &amp;mut Executor&lt;DB&gt;,</span>
<span class="term-fg31">-        senders: Vec&lt;Address&gt;,</span>
<span class="term-fg31">-    ) -&gt; Result&lt;(PostState, u64), BlockExecutionError&gt; {</span>
<span class="term-fg31">-        trace!(target: &quot;consensus::auto&quot;, transactions=?&amp;block.body, &quot;executing transactions&quot;);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        let (post_state, gas_used) =</span>
<span class="term-fg31">-            executor.execute_transactions(block, U256::ZERO, Some(senders.clone()))?;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47; apply post block changes</span>
<span class="term-fg31">-        let post_state = executor.apply_post_block_changes(block, U256::ZERO, post_state)?;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        Ok((post_state, gas_used))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Fills in the post-execution header fields based on the given PostState and gas used.</span>
<span class="term-fg31">-    &#47;&#47;&#47; In doing this, the state root is calculated and the final header is returned.</span>
<span class="term-fg31">-    pub(crate) fn complete_header&lt;DB: StateProvider&gt;(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        mut header: Header,</span>
<span class="term-fg31">-        post_state: &amp;PostState,</span>
<span class="term-fg31">-        executor: &amp;mut Executor&lt;DB&gt;,</span>
<span class="term-fg31">-        gas_used: u64,</span>
<span class="term-fg31">-    ) -&gt; Header {</span>
<span class="term-fg31">-        let receipts = post_state.receipts(header.number);</span>
<span class="term-fg31">-        header.receipts_root = if receipts.is_empty() {</span>
<span class="term-fg31">-            EMPTY_RECEIPTS</span>
<span class="term-fg31">-        } else {</span>
<span class="term-fg31">-            let receipts_with_bloom =</span>
<span class="term-fg31">-                receipts.iter().map(|r| r.clone().into()).collect::&lt;Vec&lt;ReceiptWithBloom&gt;&gt;();</span>
<span class="term-fg31">-            proofs::calculate_receipt_root(&amp;receipts_with_bloom)</span>
<span class="term-fg31">-        };</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        header.gas_used = gas_used;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47; calculate the state root</span>
<span class="term-fg31">-        let state_root = executor.db().db.0.state_root(post_state.clone()).unwrap();</span>
<span class="term-fg31">-        header.state_root = state_root;</span>
<span class="term-fg31">-        header</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Builds and executes a new block with the given transactions, on the provided [Executor].</span>
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; This returns the header of the executed block, as well as the poststate from execution.</span>
<span class="term-fg31">-    pub(crate) fn build_and_execute&lt;DB: StateProvider&gt;(</span>
<span class="term-fg31">-        &amp;mut self,</span>
<span class="term-fg31">-        transactions: Vec&lt;TransactionSigned&gt;,</span>
<span class="term-fg31">-        executor: &amp;mut Executor&lt;DB&gt;,</span>
<span class="term-fg31">-    ) -&gt; Result&lt;(SealedHeader, PostState), BlockExecutionError&gt; {</span>
<span class="term-fg31">-        let header = self.build_header_template(&amp;transactions);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        let block = Block { header, body: transactions, ommers: vec![], withdrawals: None };</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        let senders =</span>
<span class="term-fg31">-            block.body.iter().map(|tx| tx.recover_signer()).collect::&lt;Option&lt;Vec&lt;_&gt;&gt;&gt;().ok_or(</span>
<span class="term-fg31">-                BlockExecutionError::Validation(BlockValidationError::SenderRecoveryError),</span>
<span class="term-fg31">-            )?;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        trace!(target: &quot;consensus::auto&quot;, transactions=?&amp;block.body, &quot;executing transactions&quot;);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47; now execute the block</span>
<span class="term-fg31">-        let (post_state, gas_used) = self.execute(&amp;block, executor, senders)?;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        let Block { header, body, .. } = block;</span>
<span class="term-fg31">-        let body = BlockBody { transactions: body, ommers: vec![], withdrawals: None };</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        trace!(target: &quot;consensus::auto&quot;, ?post_state, ?header, ?body, &quot;executed block, calculating state root and completing header&quot;);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47; fill in the rest of the fields</span>
<span class="term-fg31">-        let header = self.complete_header(header, &amp;post_state, executor, gas_used);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        trace!(target: &quot;consensus::auto&quot;, root=?header.state_root, ?body, &quot;calculated root&quot;);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47; finally insert into storage</span>
<span class="term-fg31">-        self.insert_new_block(header.clone(), body);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47; set new header with hash that should have been updated by insert_new_block</span>
<span class="term-fg31">-        let new_header = header.seal(self.best_hash);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        Ok((new_header, post_state))</span>
     }
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d9fe2f03281e55696c02c6fe" role="button"
                   aria-expanded="false" aria-controls="id-d9fe2f03281e55696c02c6fe">
                    <code>crates/consensus/auto-seal/src/task.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/consensus/auto-seal/src/task.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/consensus/auto-seal/src/task.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+100</span></div>
                        <div class="text-start"><span class="text-danger">-19</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d9fe2f03281e55696c02c6fe"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;task.rs anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;task.rs</span>
<span class="term-fg1">index 6d77784b1adddf27d589b645b8c5010bd5596690..5217661c4cd621eed0228151eb94460cfc23abaf 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;task.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;auto-seal&#47;src&#47;task.rs</span>
<span class="term-fg36">@@ -2,7 +2,11 @@</span> use crate::{mode::MiningMode, Storage};
 use futures_util::{future::BoxFuture, FutureExt};
 use reth_beacon_consensus::{BeaconEngineMessage, ForkchoiceStatus};
 use reth_interfaces::consensus::ForkchoiceState;
<span class="term-fg31">-use reth_primitives::{Block, ChainSpec, IntoRecoveredTransaction, SealedBlockWithSenders};</span>
<span class="term-fg32">+use reth_primitives::{</span>
<span class="term-fg32">+    constants::{EMPTY_RECEIPTS, EMPTY_TRANSACTIONS, ETHEREUM_BLOCK_GAS_LIMIT},</span>
<span class="term-fg32">+    proofs, Block, BlockBody, ChainSpec, Header, IntoRecoveredTransaction, ReceiptWithBloom,</span>
<span class="term-fg32">+    SealedBlockWithSenders, EMPTY_OMMER_ROOT, U256,</span>
<span class="term-fg32">+};</span>
 use reth_provider::{CanonChainTracker, CanonStateNotificationSender, Chain, StateProviderFactory};
 use reth_revm::{
     database::{State, SubState},
<span class="term-fg36">@@ -16,10 +20,11 @@</span>     future::Future,
     pin::Pin,
     sync::Arc,
     task::{Context, Poll},
<span class="term-fg32">+    time::{SystemTime, UNIX_EPOCH},</span>
 };
 use tokio::sync::{mpsc::UnboundedSender, oneshot};
 use tokio_stream::wrappers::UnboundedReceiverStream;
<span class="term-fg31">-use tracing::{debug, error, warn};</span>
<span class="term-fg32">+use tracing::{debug, error, trace, warn};</span>
&nbsp;
 &#47;&#47;&#47; A Future that listens for new ready transactions and puts new blocks into storage
 pub struct MiningTask&lt;Client, Pool: TransactionPool&gt; {
<span class="term-fg36">@@ -118,28 +123,104 @@</span>                 &#47;&#47; the pipeline
                 this.insert_task = Some(Box::pin(async move {
                     let mut storage = storage.write().await;
&nbsp;
<span class="term-fg31">-                    let (transactions, senders): (Vec&lt;_&gt;, Vec&lt;_&gt;) = transactions</span>
<span class="term-fg32">+                    &#47;&#47; check previous block for base fee</span>
<span class="term-fg32">+                    let base_fee_per_gas = storage</span>
<span class="term-fg32">+                        .headers</span>
<span class="term-fg32">+                        .get(&amp;storage.best_block)</span>
<span class="term-fg32">+                        .and_then(|parent| parent.next_block_base_fee());</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    let mut header = Header {</span>
<span class="term-fg32">+                        parent_hash: storage.best_hash,</span>
<span class="term-fg32">+                        ommers_hash: EMPTY_OMMER_ROOT,</span>
<span class="term-fg32">+                        beneficiary: Default::default(),</span>
<span class="term-fg32">+                        state_root: Default::default(),</span>
<span class="term-fg32">+                        transactions_root: Default::default(),</span>
<span class="term-fg32">+                        receipts_root: Default::default(),</span>
<span class="term-fg32">+                        withdrawals_root: None,</span>
<span class="term-fg32">+                        logs_bloom: Default::default(),</span>
<span class="term-fg32">+                        difficulty: U256::from(2),</span>
<span class="term-fg32">+                        number: storage.best_block + 1,</span>
<span class="term-fg32">+                        gas_limit: ETHEREUM_BLOCK_GAS_LIMIT,</span>
<span class="term-fg32">+                        gas_used: 0,</span>
<span class="term-fg32">+                        timestamp: SystemTime::now()</span>
<span class="term-fg32">+                            .duration_since(UNIX_EPOCH)</span>
<span class="term-fg32">+                            .unwrap_or_default()</span>
<span class="term-fg32">+                            .as_secs(),</span>
<span class="term-fg32">+                        mix_hash: Default::default(),</span>
<span class="term-fg32">+                        nonce: 0,</span>
<span class="term-fg32">+                        base_fee_per_gas,</span>
<span class="term-fg32">+                        extra_data: Default::default(),</span>
<span class="term-fg32">+                    };</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    let transactions = transactions</span>
                         .into_iter()
<span class="term-fg31">-                        .map(|tx| {</span>
<span class="term-fg31">-                            let recovered = tx.to_recovered_transaction();</span>
<span class="term-fg31">-                            let signer = recovered.signer();</span>
<span class="term-fg31">-                            (recovered.into_signed(), signer)</span>
<span class="term-fg31">-                        })</span>
<span class="term-fg31">-                        .unzip();</span>
<span class="term-fg32">+                        .map(|tx| tx.to_recovered_transaction().into_signed())</span>
<span class="term-fg32">+                        .collect::&lt;Vec&lt;_&gt;&gt;();</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    header.transactions_root = if transactions.is_empty() {</span>
<span class="term-fg32">+                        EMPTY_TRANSACTIONS</span>
<span class="term-fg32">+                    } else {</span>
<span class="term-fg32">+                        proofs::calculate_transaction_root(&amp;transactions)</span>
<span class="term-fg32">+                    };</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    let block =</span>
<span class="term-fg32">+                        Block { header, body: transactions, ommers: vec![], withdrawals: None };</span>
&nbsp;
                     &#47;&#47; execute the new block
                     let substate = SubState::new(State::new(client.latest().unwrap()));
                     let mut executor = Executor::new(chain_spec, substate);
&nbsp;
<span class="term-fg31">-                    match storage.build_and_execute(transactions.clone(), &amp;mut executor) {</span>
<span class="term-fg31">-                        Ok((new_header, post_state)) =&gt; {</span>
<span class="term-fg32">+                    trace!(target: &quot;consensus::auto&quot;, transactions=?&amp;block.body, &quot;executing transactions&quot;);</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    let senders = block</span>
<span class="term-fg32">+                        .body</span>
<span class="term-fg32">+                        .iter()</span>
<span class="term-fg32">+                        .map(|tx| tx.recover_signer())</span>
<span class="term-fg32">+                        .collect::&lt;Option&lt;Vec&lt;_&gt;&gt;&gt;()?;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    match executor.execute_transactions(&amp;block, U256::ZERO, Some(senders.clone())) {</span>
<span class="term-fg32">+                        Ok((post_state, gas_used)) =&gt; {</span>
<span class="term-fg32">+                            &#47;&#47; apply post block changes</span>
<span class="term-fg32">+                            let post_state = executor</span>
<span class="term-fg32">+                                .apply_post_block_changes(&amp;block, U256::ZERO, post_state)</span>
<span class="term-fg32">+                                .unwrap();</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                            let Block { mut header, body, .. } = block;</span>
<span class="term-fg32">+</span>
                             &#47;&#47; clear all transactions from pool
<span class="term-fg31">-                            pool.remove_transactions(transactions.iter().map(|tx| tx.hash()));</span>
<span class="term-fg32">+                            pool.remove_transactions(body.iter().map(|tx| tx.hash()));</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                            let receipts = post_state.receipts(header.number);</span>
<span class="term-fg32">+                            header.receipts_root = if receipts.is_empty() {</span>
<span class="term-fg32">+                                EMPTY_RECEIPTS</span>
<span class="term-fg32">+                            } else {</span>
<span class="term-fg32">+                                let receipts_with_bloom = receipts</span>
<span class="term-fg32">+                                    .iter()</span>
<span class="term-fg32">+                                    .map(|r| r.clone().into())</span>
<span class="term-fg32">+                                    .collect::&lt;Vec&lt;ReceiptWithBloom&gt;&gt;();</span>
<span class="term-fg32">+                                proofs::calculate_receipt_root(&amp;receipts_with_bloom)</span>
<span class="term-fg32">+                            };</span>
<span class="term-fg32">+                            let transactions = body.clone();</span>
<span class="term-fg32">+                            let body =</span>
<span class="term-fg32">+                                BlockBody { transactions: body, ommers: vec![], withdrawals: None };</span>
<span class="term-fg32">+                            header.gas_used = gas_used;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                            trace!(target: &quot;consensus::auto&quot;, ?post_state, ?header, ?body, &quot;executed block, calculating root&quot;);</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                            &#47;&#47; calculate the state root</span>
<span class="term-fg32">+                            let state_root =</span>
<span class="term-fg32">+                                executor.db().db.0.state_root(post_state.clone()).unwrap();</span>
<span class="term-fg32">+                            header.state_root = state_root;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                            trace!(target: &quot;consensus::auto&quot;, root=?header.state_root, ?body, &quot;calculated root&quot;);</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                            storage.insert_new_block(header.clone(), body);</span>
&nbsp;
<span class="term-fg32">+                            let new_hash = storage.best_hash;</span>
                             let state = ForkchoiceState {
<span class="term-fg31">-                                head_block_hash: new_header.hash,</span>
<span class="term-fg31">-                                finalized_block_hash: new_header.hash,</span>
<span class="term-fg31">-                                safe_block_hash: new_header.hash,</span>
<span class="term-fg32">+                                head_block_hash: new_hash,</span>
<span class="term-fg32">+                                finalized_block_hash: new_hash,</span>
<span class="term-fg32">+                                safe_block_hash: new_hash,</span>
                             };
                             drop(storage);
&nbsp;
<span class="term-fg36">@@ -180,7 +261,7 @@</span>                             }
&nbsp;
                             &#47;&#47; seal the block
                             let block = Block {
<span class="term-fg31">-                                header: new_header.clone().unseal(),</span>
<span class="term-fg32">+                                header: header.clone(),</span>
                                 body: transactions,
                                 ommers: vec![],
                                 withdrawals: None,
<span class="term-fg36">@@ -192,9 +273,9 @@</span>                                 SealedBlockWithSenders::new(sealed_block, senders)
                                     .expect(&quot;senders are valid&quot;);
&nbsp;
                             &#47;&#47; update canon chain for rpc
<span class="term-fg31">-                            client.set_canonical_head(new_header.clone());</span>
<span class="term-fg31">-                            client.set_safe(new_header.clone());</span>
<span class="term-fg31">-                            client.set_finalized(new_header.clone());</span>
<span class="term-fg32">+                            client.set_canonical_head(header.clone().seal(new_hash));</span>
<span class="term-fg32">+                            client.set_safe(header.clone().seal(new_hash));</span>
<span class="term-fg32">+                            client.set_finalized(header.clone().seal(new_hash));</span>
&nbsp;
                             debug!(target: &quot;consensus::auto&quot;, header=?sealed_block_with_senders.hash(), &quot;sending block notification&quot;);
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4f2807a89be6cbcbef213e78" role="button"
                   aria-expanded="false" aria-controls="id-4f2807a89be6cbcbef213e78">
                    <code>crates/consensus/beacon/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/consensus/beacon/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/consensus/beacon/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+9</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4f2807a89be6cbcbef213e78"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;beacon&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;beacon&#47;Cargo.toml</span>
<span class="term-fg1">index bb676f71d1019c6216d9b74c5771857b87947dd3..47967ea76f4836e4bf5c5692a20752c9099d00d3 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;beacon&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;beacon&#47;Cargo.toml</span>
<span class="term-fg36">@@ -44,3 +44,12 @@</span> reth-revm = { path = &quot;..&#47;..&#47;revm&quot; }
 reth-downloaders = { path = &quot;..&#47;..&#47;net&#47;downloaders&quot; }
&nbsp;
 assert_matches = &quot;1.5&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [</span>
<span class="term-fg32">+  &quot;reth-consensus-common&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-primitives&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-interfaces&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-provider&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-rpc-types&#47;optimism&quot;,</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2e863fbef762fbf82f9010fb" role="button"
                   aria-expanded="false" aria-controls="id-2e863fbef762fbf82f9010fb">
                    <code>crates/consensus/beacon/src/engine/mod.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/consensus/beacon/src/engine/mod.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/consensus/beacon/src/engine/mod.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-28</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2e863fbef762fbf82f9010fb"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;beacon&#47;src&#47;engine&#47;mod.rs anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;beacon&#47;src&#47;engine&#47;mod.rs</span>
<span class="term-fg1">index aa894d180f848e17e15a80f60aae300663b7daa2..8be81f2bbdce5d1ac05cddf68737cc37782b7cc3 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;beacon&#47;src&#47;engine&#47;mod.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;beacon&#47;src&#47;engine&#47;mod.rs</span>
<span class="term-fg36">@@ -1821,31 +1821,23 @@</span>         }
     }
&nbsp;
     &#47;&#47;&#47; Represents either test pipeline outputs, or real pipeline configuration.
<span class="term-fg32">+    #[derive(Default)]</span>
     enum TestPipelineConfig {
         &#47;&#47;&#47; Test pipeline outputs.
         Test(VecDeque&lt;Result&lt;ExecOutput, StageError&gt;&gt;),
         &#47;&#47;&#47; Real pipeline configuration.
<span class="term-fg32">+        #[default]</span>
         Real,
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    impl Default for TestPipelineConfig {</span>
<span class="term-fg31">-        fn default() -&gt; Self {</span>
<span class="term-fg31">-            Self::Test(VecDeque::new())</span>
<span class="term-fg31">-        }</span>
     }
&nbsp;
     &#47;&#47;&#47; Represents either test executor results, or real executor configuration.
<span class="term-fg32">+    #[derive(Default)]</span>
     enum TestExecutorConfig {
         &#47;&#47;&#47; Test executor results.
         Test(Vec&lt;PostState&gt;),
         &#47;&#47;&#47; Real executor configuration.
<span class="term-fg32">+        #[default]</span>
         Real,
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    impl Default for TestExecutorConfig {</span>
<span class="term-fg31">-        fn default() -&gt; Self {</span>
<span class="term-fg31">-            Self::Test(Vec::new())</span>
<span class="term-fg31">-        }</span>
     }
&nbsp;
     &#47;&#47;&#47; A type that represents one of two possible executor factories.
<span class="term-fg36">@@ -1968,18 +1960,6 @@</span>
         &#47;&#47;&#47; Sets the max block for the pipeline to run.
         fn with_max_block(mut self, max_block: BlockNumber) -&gt; Self {
             self.max_block = Some(max_block);
<span class="term-fg31">-            self</span>
<span class="term-fg31">-        }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47;&#47; Uses the real pipeline instead of a pipeline with empty exec outputs.</span>
<span class="term-fg31">-        fn with_real_pipeline(mut self) -&gt; Self {</span>
<span class="term-fg31">-            self.pipeline_config = TestPipelineConfig::Real;</span>
<span class="term-fg31">-            self</span>
<span class="term-fg31">-        }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-        &#47;&#47;&#47; Uses the real executor instead of a executor with empty results.</span>
<span class="term-fg31">-        fn with_real_executor(mut self) -&gt; Self {</span>
<span class="term-fg31">-            self.executor_config = TestExecutorConfig::Real;</span>
             self
         }
&nbsp;
<span class="term-fg36">@@ -2675,10 +2655,7 @@</span>                     .build(),
             );
&nbsp;
             let (consensus_engine, env) =
<span class="term-fg31">-                TestConsensusEngineBuilder::&lt;NoopFullBlockClient&gt;::new(chain_spec.clone())</span>
<span class="term-fg31">-                    .with_real_pipeline()</span>
<span class="term-fg31">-                    .with_real_executor()</span>
<span class="term-fg31">-                    .build();</span>
<span class="term-fg32">+                TestConsensusEngineBuilder::&lt;NoopFullBlockClient&gt;::new(chain_spec.clone()).build();</span>
&nbsp;
             let genesis =
                 SealedBlock { header: chain_spec.sealed_genesis_header(), ..Default::default() };</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ef6e991094983df98e55f4ee" role="button"
                   aria-expanded="false" aria-controls="id-ef6e991094983df98e55f4ee">
                    <code>crates/consensus/common/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/consensus/common/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/consensus/common/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ef6e991094983df98e55f4ee"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;common&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;common&#47;Cargo.toml</span>
<span class="term-fg1">index 55253ae5ece68f21b462aeb1df1c119a50b0cec8..e09f4ba3dfcf8f40897009e9f89c136c93a9d957 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;common&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;common&#47;Cargo.toml</span>
<span class="term-fg36">@@ -18,3 +18,6 @@</span> reth-interfaces = { workspace = true, features = [&quot;test-utils&quot;] }
 reth-provider = { workspace = true, features = [&quot;test-utils&quot;] }
 assert_matches = &quot;1.5.0&quot;
 mockall = &quot;0.11.3&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [&quot;reth-primitives&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-39871b65022e185444b9801f" role="button"
                   aria-expanded="false" aria-controls="id-39871b65022e185444b9801f">
                    <code>crates/consensus/common/src/validation.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/consensus/common/src/validation.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/consensus/common/src/validation.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+25</span></div>
                        <div class="text-start"><span class="text-danger">-15</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-39871b65022e185444b9801f"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;common&#47;src&#47;validation.rs anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;common&#47;src&#47;validation.rs</span>
<span class="term-fg1">index f61e160f0390260910463c0c36f994ab26053d5b..a1907dbe9e1848ce80f43bed49ae2720b581fc03 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;consensus&#47;common&#47;src&#47;validation.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;consensus&#47;common&#47;src&#47;validation.rs</span>
<span class="term-fg36">@@ -10,6 +10,9 @@</span>     collections::{hash_map::Entry, HashMap},
     time::SystemTime,
 };
&nbsp;
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+use reth_primitives::TxDeposit;</span>
<span class="term-fg32">+</span>
 &#47;&#47;&#47; Validate header standalone
 pub fn validate_header_standalone(
     header: &amp;SealedHeader,
<span class="term-fg36">@@ -99,6 +102,8 @@</span>             }
&nbsp;
             Some(*chain_id)
         }
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        Transaction::Deposit(TxDeposit { .. }) =&gt; None,</span>
     };
     if let Some(chain_id) = chain_id {
         if chain_id != chain_spec.chain().id() {
<span class="term-fg36">@@ -265,27 +270,32 @@</span>
     &#47;&#47; TODO Check difficulty increment between parent and child
     &#47;&#47; Ace age did increment it by some formula that we need to follow.
&nbsp;
<span class="term-fg31">-    let mut parent_gas_limit = parent.gas_limit;</span>
<span class="term-fg32">+    &#47;&#47; Check gas limit, max diff between child&#47;parent gas_limit should be  max_diff=parent_gas&#47;1024</span>
<span class="term-fg32">+    &#47;&#47; On Optimism, the gas limit can adjust instantly, so we skip this check if the optimism</span>
<span class="term-fg32">+    &#47;&#47; feature flag is enabled.</span>
<span class="term-fg32">+    #[cfg(not(feature = &quot;optimism&quot;))]</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+        let mut parent_gas_limit = parent.gas_limit;</span>
&nbsp;
<span class="term-fg31">-    &#47;&#47; By consensus, gas_limit is multiplied by elasticity (*2) on</span>
<span class="term-fg31">-    &#47;&#47; on exact block that hardfork happens.</span>
<span class="term-fg31">-    if chain_spec.fork(Hardfork::London).transitions_at_block(child.number) {</span>
<span class="term-fg31">-        parent_gas_limit = parent.gas_limit * constants::EIP1559_ELASTICITY_MULTIPLIER;</span>
<span class="term-fg31">-    }</span>
<span class="term-fg32">+        &#47;&#47; By consensus, gas_limit is multiplied by elasticity (*2) on</span>
<span class="term-fg32">+        &#47;&#47; on exact block that hardfork happens.</span>
<span class="term-fg32">+        if chain_spec.fork(Hardfork::London).transitions_at_block(child.number) {</span>
<span class="term-fg32">+            parent_gas_limit = parent.gas_limit * constants::EIP1559_ELASTICITY_MULTIPLIER;</span>
<span class="term-fg32">+        }</span>
&nbsp;
<span class="term-fg31">-    &#47;&#47; Check gas limit, max diff between child&#47;parent gas_limit should be  max_diff=parent_gas&#47;1024</span>
<span class="term-fg31">-    if child.gas_limit &gt; parent_gas_limit {</span>
<span class="term-fg31">-        if child.gas_limit - parent_gas_limit &gt;= parent_gas_limit &#47; 1024 {</span>
<span class="term-fg31">-            return Err(ConsensusError::GasLimitInvalidIncrease {</span>
<span class="term-fg32">+        if child.gas_limit &gt; parent_gas_limit {</span>
<span class="term-fg32">+            if child.gas_limit - parent_gas_limit &gt;= parent_gas_limit &#47; 1024 {</span>
<span class="term-fg32">+                return Err(ConsensusError::GasLimitInvalidIncrease {</span>
<span class="term-fg32">+                    parent_gas_limit,</span>
<span class="term-fg32">+                    child_gas_limit: child.gas_limit,</span>
<span class="term-fg32">+                })</span>
<span class="term-fg32">+            }</span>
<span class="term-fg32">+        } else if parent_gas_limit - child.gas_limit &gt;= parent_gas_limit &#47; 1024 {</span>
<span class="term-fg32">+            return Err(ConsensusError::GasLimitInvalidDecrease {</span>
                 parent_gas_limit,
                 child_gas_limit: child.gas_limit,
             })
         }
<span class="term-fg31">-    } else if parent_gas_limit - child.gas_limit &gt;= parent_gas_limit &#47; 1024 {</span>
<span class="term-fg31">-        return Err(ConsensusError::GasLimitInvalidDecrease {</span>
<span class="term-fg31">-            parent_gas_limit,</span>
<span class="term-fg31">-            child_gas_limit: child.gas_limit,</span>
<span class="term-fg31">-        })</span>
     }
&nbsp;
     &#47;&#47; EIP-1559 check base fee</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-505001cc8bb51198b9f972c8" role="button"
                   aria-expanded="false" aria-controls="id-505001cc8bb51198b9f972c8">
                    <code>crates/interfaces/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/interfaces/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/interfaces/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-505001cc8bb51198b9f972c8"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;Cargo.toml</span>
<span class="term-fg1">index be012c7aaf5defdd6021a099fe33e8d9340b11db..2acd2f02bd1d16fbb830a2e9fb9f846a20726bdf 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;Cargo.toml</span>
<span class="term-fg36">@@ -54,4 +54,5 @@</span> ] }
&nbsp;
 [features]
 test-utils = [&quot;tokio-stream&#47;sync&quot;, &quot;secp256k1&quot;, &quot;rand&#47;std_rng&quot;]
<span class="term-fg31">-cli = [&quot;clap&quot;]</span>
<span class="term-fg31">\ No newline at end of file</span>
<span class="term-fg32">+cli = [&quot;clap&quot;]</span>
<span class="term-fg32">+optimism = [&quot;reth-eth-wire&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9852347fe67ef3c541668cb9" role="button"
                   aria-expanded="false" aria-controls="id-9852347fe67ef3c541668cb9">
                    <code>crates/interfaces/src/blockchain_tree/error.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/interfaces/src/blockchain_tree/error.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/interfaces/src/blockchain_tree/error.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9852347fe67ef3c541668cb9"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;src&#47;blockchain_tree&#47;error.rs anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;src&#47;blockchain_tree&#47;error.rs</span>
<span class="term-fg1">index edcdb569baefa875d7ff0db55ffa0be74034d378..c2e463a7328150670edfe989258dc8636a479a9c 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;src&#47;blockchain_tree&#47;error.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;src&#47;blockchain_tree&#47;error.rs</span>
<span class="term-fg36">@@ -194,6 +194,9 @@</span>                     BlockExecutionError::CanonicalCommit { .. } |
                     BlockExecutionError::BlockHashNotFoundInChain { .. } |
                     BlockExecutionError::AppendChainDoesntConnect { .. } |
                     BlockExecutionError::UnavailableForTest =&gt; false,
<span class="term-fg32">+                    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                    BlockExecutionError::L1BlockInfoError { .. } |</span>
<span class="term-fg32">+                    BlockExecutionError::InsufficientFundsForL1Cost { .. } =&gt; false,</span>
                 }
             }
             InsertBlockErrorKind::Tree(err) =&gt; {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-47bebe2105ccc402e683ced6" role="button"
                   aria-expanded="false" aria-controls="id-47bebe2105ccc402e683ced6">
                    <code>crates/interfaces/src/executor.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/interfaces/src/executor.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/interfaces/src/executor.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+7</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-47bebe2105ccc402e683ced6"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;src&#47;executor.rs anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;src&#47;executor.rs</span>
<span class="term-fg1">index cc747e29fdbc131c5b33a05da71bbd96a8f2d9ab..7f315688a3575fb03a9c2eddbdc092c9e56780ed 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;src&#47;executor.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;src&#47;executor.rs</span>
<span class="term-fg36">@@ -42,7 +42,6 @@</span>     #[error(&quot;Transaction error on revert: {inner:?}&quot;)]
     CanonicalRevert { inner: String },
     #[error(&quot;Transaction error on commit: {inner:?}&quot;)]
     CanonicalCommit { inner: String },
<span class="term-fg31">-</span>
     &#47;&#47; === tree errors ===
     &#47;&#47; TODO(mattsse): move this to tree error
     #[error(&quot;Block hash {block_hash} not found in blockchain tree chain&quot;)]
<span class="term-fg36">@@ -57,6 +56,13 @@</span>     &#47;&#47;&#47;
     &#47;&#47;&#47; Note: this is not feature gated for convenience.
     #[error(&quot;Execution unavailable for tests&quot;)]
     UnavailableForTest,
<span class="term-fg32">+</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    #[error(&quot;Could not get L1 block info from L2 block: {message:?}&quot;)]</span>
<span class="term-fg32">+    L1BlockInfoError { message: String },</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    #[error(&quot;Insufficient funds to cover transaction L1 cost: want {want}, have {have}&quot;)]</span>
<span class="term-fg32">+    InsufficientFundsForL1Cost { want: u64, have: u64 },</span>
 }
&nbsp;
 impl BlockExecutionError {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4888b5e7baf159c5f70a909f" role="button"
                   aria-expanded="false" aria-controls="id-4888b5e7baf159c5f70a909f">
                    <code>crates/interfaces/src/test_utils/generators.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/interfaces/src/test_utils/generators.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/interfaces/src/test_utils/generators.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4888b5e7baf159c5f70a909f"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;src&#47;test_utils&#47;generators.rs anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;src&#47;test_utils&#47;generators.rs</span>
<span class="term-fg1">index fbbdf42a2129132f060e3a56b68d854c90b6f14b..d9399f8f814dabf6173da6e9b8d4be61ed2b938a 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;interfaces&#47;src&#47;test_utils&#47;generators.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;interfaces&#47;src&#47;test_utils&#47;generators.rs</span>
<span class="term-fg36">@@ -349,6 +349,8 @@</span>             (0..logs_count).map(|_| random_log(rng, None, None)).collect()
         } else {
             vec![]
         },
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        deposit_nonce: None,</span>
     }
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ea801fcf9867277c6a9cfe4c" role="button"
                   aria-expanded="false" aria-controls="id-ea801fcf9867277c6a9cfe4c">
                    <code>crates/net/eth-wire/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/net/eth-wire/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/net/eth-wire/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ea801fcf9867277c6a9cfe4c"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;net&#47;eth-wire&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;net&#47;eth-wire&#47;Cargo.toml</span>
<span class="term-fg1">index 987f7505d9c386788b18f784fb4fc3a85a163dfd..e2b4a2be3b7c7d740960c4243e7116c9da3c68ab 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;net&#47;eth-wire&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;net&#47;eth-wire&#47;Cargo.toml</span>
<span class="term-fg36">@@ -64,6 +64,7 @@</span> [features]
 default = [&quot;serde&quot;]
 serde = [&quot;dep:serde&quot;, &quot;smol_str&#47;serde&quot;]
 arbitrary = [&quot;reth-primitives&#47;arbitrary&quot;, &quot;dep:arbitrary&quot;, &quot;dep:proptest&quot;, &quot;dep:proptest-derive&quot;]
<span class="term-fg32">+optimism = []</span>
&nbsp;
 [[test]]
 name = &quot;fuzz_roundtrip&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d8280669efee6c9adafafb8b" role="button"
                   aria-expanded="false" aria-controls="id-d8280669efee6c9adafafb8b">
                    <code>crates/net/eth-wire/src/types/receipts.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/net/eth-wire/src/types/receipts.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/net/eth-wire/src/types/receipts.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d8280669efee6c9adafafb8b"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;net&#47;eth-wire&#47;src&#47;types&#47;receipts.rs anton-rs&#47;op-reth&#47;crates&#47;net&#47;eth-wire&#47;src&#47;types&#47;receipts.rs</span>
<span class="term-fg1">index f1bb3bc1209f82c0942a7f55d92e2a0b3cf81cba..af40108aa994f199b532241d660c0b41c90e8156 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;net&#47;eth-wire&#47;src&#47;types&#47;receipts.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;net&#47;eth-wire&#47;src&#47;types&#47;receipts.rs</span>
<span class="term-fg36">@@ -49,6 +49,8 @@</span>                 tx_type: TxType::EIP1559,
                 success: false,
                 cumulative_gas_used: 0,
                 logs: vec![],
<span class="term-fg32">+                #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                deposit_nonce: None,</span>
             },
             bloom: Default::default(),
         }]]);
<span class="term-fg36">@@ -102,10 +104,10 @@</span>         let expected = hex!(&quot;f90172820457f9016cf90169f901668001b9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f85ff85d940000000000000000000000000000000000000011f842a0000000000000000000000000000000000000000000000000000000000000deada0000000000000000000000000000000000000000000000000000000000000beef830100ff&quot;);
         let mut data = vec![];
         let request = RequestPair::&lt;Receipts&gt; {
             request_id: 1111,
<span class="term-fg31">-            message: Receipts(vec![</span>
<span class="term-fg31">-                vec![</span>
<span class="term-fg31">-                    ReceiptWithBloom {</span>
<span class="term-fg31">-                        receipt: Receipt {tx_type: TxType::Legacy,</span>
<span class="term-fg32">+            message: Receipts(vec![vec![</span>
<span class="term-fg32">+                ReceiptWithBloom {</span>
<span class="term-fg32">+                    receipt: Receipt {</span>
<span class="term-fg32">+                        tx_type: TxType::Legacy,</span>
                         cumulative_gas_used: 0x1u64,
                         logs: vec![
                             Log {
<span class="term-fg36">@@ -118,10 +120,12 @@</span>                                 data: hex!(&quot;0100ff&quot;)[..].into(),
                             },
                         ],
                         success: false,
<span class="term-fg31">-                    },bloom: hex!(&quot;00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;).into(),</span>
<span class="term-fg31">-                }</span>
<span class="term-fg31">-                ],</span>
<span class="term-fg31">-            ]),</span>
<span class="term-fg32">+                        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                        deposit_nonce: None,</span>
<span class="term-fg32">+                    },</span>
<span class="term-fg32">+                    bloom: hex!(&quot;00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;).into(),</span>
<span class="term-fg32">+                },</span>
<span class="term-fg32">+            ]]),</span>
         };
         request.encode(&amp;mut data);
         assert_eq!(data, expected);
<span class="term-fg36">@@ -153,6 +157,8 @@</span>                                         data: hex!(&quot;0100ff&quot;)[..].into(),
                                     },
                                 ],
                                 success: false,
<span class="term-fg32">+                                #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                                deposit_nonce: None,</span>
                             },
                             bloom: hex!(&quot;00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;).into(),
                         },</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bdae92466fcdccfbd50b3dd8" role="button"
                   aria-expanded="false" aria-controls="id-bdae92466fcdccfbd50b3dd8">
                    <code>crates/payload/basic/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/payload/basic/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/payload/basic/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bdae92466fcdccfbd50b3dd8"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;payload&#47;basic&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;payload&#47;basic&#47;Cargo.toml</span>
<span class="term-fg1">index a2a9f3288affe4b28d387a10a49b5a75c690fd16..3e7efd4810e54e3ddfd6aa8938fa5a4ed249348b 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;payload&#47;basic&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;payload&#47;basic&#47;Cargo.toml</span>
<span class="term-fg36">@@ -29,3 +29,11 @@</span> futures-util = { workspace = true }
&nbsp;
 ## misc
 tracing = { workspace = true }
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [</span>
<span class="term-fg32">+  &quot;reth-primitives&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-revm&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-transaction-pool&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-provider&#47;optimism&quot;</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-474df9450b830db708e11b5a" role="button"
                   aria-expanded="false" aria-controls="id-474df9450b830db708e11b5a">
                    <code>crates/payload/basic/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/payload/basic/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/payload/basic/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-474df9450b830db708e11b5a"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;payload&#47;basic&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;payload&#47;basic&#47;src&#47;lib.rs</span>
<span class="term-fg1">index 2d598a2702689046af01dbfe4d08c2ec7ce50484..f49c3afa65db465d8dd483e330b88b758e8cd127 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;payload&#47;basic&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;payload&#47;basic&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -659,6 +659,8 @@</span>                     tx_type: tx.tx_type(),
                     success: result.is_success(),
                     cumulative_gas_used,
                     logs: result.logs().into_iter().map(into_reth_log).collect(),
<span class="term-fg32">+                    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                    deposit_nonce: None,</span>
                 },
             );
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-267fec50324359b34293bc64" role="button"
                   aria-expanded="false" aria-controls="id-267fec50324359b34293bc64">
                    <code>crates/payload/builder/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/payload/builder/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/payload/builder/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-267fec50324359b34293bc64"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;payload&#47;builder&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;payload&#47;builder&#47;Cargo.toml</span>
<span class="term-fg1">index b83236fd9b35e641f2de6bd360105b55997a25a9..7f2a80337b6bd429ab10233c2f8bd1a9eb978ff3 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;payload&#47;builder&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;payload&#47;builder&#47;Cargo.toml</span>
<span class="term-fg36">@@ -32,3 +32,9 @@</span> tracing = { workspace = true }
&nbsp;
 [features]
 test-utils = []
<span class="term-fg32">+optimism = [</span>
<span class="term-fg32">+  &quot;reth-primitives&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-rpc-types&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-interfaces&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-revm-primitives&#47;optimism&quot;,</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f9c8400c974efab3b82bd053" role="button"
                   aria-expanded="false" aria-controls="id-f9c8400c974efab3b82bd053">
                    <code>crates/primitives/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f9c8400c974efab3b82bd053"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;Cargo.toml</span>
<span class="term-fg1">index aca12eb5468a144430e8ae65901f83b4f278050d..f9b592dea9c249147fe48fa1dfabdbd8704a3923 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;Cargo.toml</span>
<span class="term-fg36">@@ -92,6 +92,7 @@</span> [features]
 default = []
 arbitrary = [&quot;revm-primitives&#47;arbitrary&quot;, &quot;dep:arbitrary&quot;, &quot;dep:proptest&quot;, &quot;dep:proptest-derive&quot;]
 test-utils = []
<span class="term-fg32">+optimism = []</span>
&nbsp;
 [[bench]]
 name = &quot;recover_ecdsa_crit&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4143ce31b5440200416989e0" role="button"
                   aria-expanded="false" aria-controls="id-4143ce31b5440200416989e0">
                    <code>crates/primitives/res/genesis/goerli_op.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/res/genesis/goerli_op.json" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+92</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4143ce31b5440200416989e0"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;res&#47;genesis&#47;goerli_op.json anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;res&#47;genesis&#47;goerli_op.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0ea4638d94238f5d50422a67a6a446225d0a8d89</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;res&#47;genesis&#47;goerli_op.json</span>
<span class="term-fg36">@@ -0,0 +1,92 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;nonce&quot;: &quot;0x00&quot;,</span>
<span class="term-fg32">+  &quot;timestamp&quot;: &quot;0x00&quot;,</span>
<span class="term-fg32">+  &quot;extraData&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000000027770a9694e4B4b1E130Ab91Bc327C36855f612E0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+  &quot;difficulty&quot;: &quot;0x01&quot;,</span>
<span class="term-fg32">+  &quot;gasLimit&quot;: &quot;15000000&quot;,</span>
<span class="term-fg32">+  &quot;mixHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+  &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+  &quot;gasUsed&quot;: &quot;0x00&quot;,</span>
<span class="term-fg32">+  &quot;number&quot;: &quot;0x00&quot;,</span>
<span class="term-fg32">+  &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+  &quot;stateRoot&quot;: &quot;0x9e6b478a1cd331a979c39e4bddf42c676bcf5a63382f898dc441fe3fe5eb0837&quot;,</span>
<span class="term-fg32">+  &quot;alloc&quot;: {</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000000&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {},</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100365760003560e01c806382e3702d1461003b578063cafa81dc14610072575b600080fd5b61005e610049366004610112565b60006020819052908152604090205460ff1681565b604051901515815260200160405180910390f35b61008561008036600461015a565b610087565b005b6001600080833360405160200161009f929190610229565b604080518083037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe001815291815281516020928301208352908201929092520160002080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001691151591909117905550565b60006020828403121561012457600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60006020828403121561016c57600080fd5b813567ffffffffffffffff8082111561018457600080fd5b818401915084601f83011261019857600080fd5b8135818111156101aa576101aa61012b565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f011681019083821181831017156101f0576101f061012b565b8160405282815287602084870101111561020957600080fd5b826020860160208301376000928101602001929092525095945050505050565b6000835160005b8181101561024a5760208187018101518583015201610230565b81811115610259576000828501525b5060609390931b7fffffffffffffffffffffffffffffffffffffffff00000000000000000000000016919092019081526014019291505056fea26469706673582212209ffc0b44ce8a27c46cae74a3b3b620a72f10aaea97ed37c15b5d36792abd2aa464736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000002&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100725760003560e01c80639b19251a116100505780639b19251a146100e9578063b1540a011461011c578063bdc7b54f1461012f57600080fd5b806308fd63221461007757806313af40351461008c5780638da5cb5b1461009f575b600080fd5b61008a610085366004610614565b610137565b005b61008a61009a366004610650565b610271565b6000546100bf9073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b61010c6100f7366004610650565b60016020526000908152604090205460ff1681565b60405190151581526020016100e0565b61010c61012a366004610650565b61047c565b61008a6104cd565b60005473ffffffffffffffffffffffffffffffffffffffff1633146101e3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f46756e6374696f6e2063616e206f6e6c792062652063616c6c6564206279207460448201527f6865206f776e6572206f66207468697320636f6e74726163742e00000000000060648201526084015b60405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff821660008181526001602090815260409182902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00168515159081179091558251938452908301527f8daaf060c3306c38e068a75c054bf96ecd85a3db1252712c4d93632744c42e0d910160405180910390a15050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610318576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f46756e6374696f6e2063616e206f6e6c792062652063616c6c6564206279207460448201527f6865206f776e6572206f66207468697320636f6e74726163742e00000000000060648201526084016101da565b73ffffffffffffffffffffffffffffffffffffffff81166103e1576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152605160248201527f4f564d5f4465706c6f79657257686974656c6973743a2063616e206f6e6c792060448201527f62652064697361626c65642076696120656e61626c654172626974726172794360648201527f6f6e74726163744465706c6f796d656e74000000000000000000000000000000608482015260a4016101da565b6000546040805173ffffffffffffffffffffffffffffffffffffffff928316815291831660208301527fb532073b38c83145e3e5135377a08bf9aab55bc0fd7c1179cd4fb995d2a5159c910160405180910390a1600080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff92909216919091179055565b6000805473ffffffffffffffffffffffffffffffffffffffff1615806104c7575073ffffffffffffffffffffffffffffffffffffffff821660009081526001602052604090205460ff165b92915050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610574576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f46756e6374696f6e2063616e206f6e6c792062652063616c6c6564206279207460448201527f6865206f776e6572206f66207468697320636f6e74726163742e00000000000060648201526084016101da565b60005460405173ffffffffffffffffffffffffffffffffffffffff90911681527fc0e106cf568e50698fdbde1eff56f5a5c966cc7958e37e276918e9e4ccdf8cd49060200160405180910390a1600080547fffffffffffffffffffffffff0000000000000000000000000000000000000000169055565b803573ffffffffffffffffffffffffffffffffffffffff8116811461060f57600080fd5b919050565b6000806040838503121561062757600080fd5b610630836105eb565b91506020830135801515811461064557600080fd5b809150509250929050565b60006020828403121561066257600080fd5b61066b826105eb565b939250505056fea264697066735822122045a02b3906eca00a51b37c2965ab13be381f71f60af681951849865fb2daa75f64736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000007&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000dead&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x0000000000000000000000005086d1eef304eb5284a0f6720f79403b4e9be294&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000186a0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100885760003560e01c8063a71198691161005b578063a71198691461012a578063b1b1b2091461014a578063cbd4ece91461016d578063ecc704281461018057600080fd5b806321d800ec1461008d5780633dbb202b146100c55780636e296e45146100da57806382e3702d14610107575b600080fd5b6100b061009b366004610826565b60006020819052908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100d86100d3366004610942565b610197565b005b6100e26102e2565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016100bc565b6100b0610115366004610826565b60026020526000908152604090205460ff1681565b6005546100e29073ffffffffffffffffffffffffffffffffffffffff1681565b6100b0610158366004610826565b60016020526000908152604090205460ff1681565b6100d861017b3660046109ad565b61038b565b61018960035481565b6040519081526020016100bc565b60006101a784338560035461078d565b80516020808301919091206000908152600290915260409081902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055517fcafa81dc0000000000000000000000000000000000000000000000000000000081529091507342000000000000000000000000000000000000009063cafa81dc9061023c908490600401610a89565b600060405180830381600087803b15801561025657600080fd5b505af115801561026a573d6000803e3d6000fd5b505050508373ffffffffffffffffffffffffffffffffffffffff167fcb0f7ffd78f9aee47a248fae8db181db6eee833039123e026dcbff529522e52a3385600354866040516102bc9493929190610aa3565b60405180910390a26001600360008282546102d79190610aef565b909155505050505050565b60045460009073ffffffffffffffffffffffffffffffffffffffff1661dead141561036e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f78446f6d61696e4d65737361676553656e646572206973206e6f74207365740060448201526064015b60405180910390fd5b5060045473ffffffffffffffffffffffffffffffffffffffff1690565b60055473ffffffffffffffffffffffffffffffffffffffff167fffffffffffffffffffffffffeeeeffffffffffffffffffffffffffffffffeeef330173ffffffffffffffffffffffffffffffffffffffff161461046a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602760248201527f50726f7669646564206d65737361676520636f756c64206e6f7420626520766560448201527f7269666965642e000000000000000000000000000000000000000000000000006064820152608401610365565b60006104788585858561078d565b8051602080830191909120600081815260019092526040909120549192509060ff1615610527576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602b60248201527f50726f7669646564206d6573736167652068617320616c72656164792062656560448201527f6e2072656365697665642e0000000000000000000000000000000000000000006064820152608401610365565b73ffffffffffffffffffffffffffffffffffffffff8616734200000000000000000000000000000000000000141561059957600090815260016020819052604090912080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016909117905550610787565b600480547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff878116919091179091556040516000918816906105f2908790610b2e565b6000604051808303816000865af19150503d806000811461062f576040519150601f19603f3d011682016040523d82523d6000602084013e610634565b606091505b5050600480547fffffffffffffffffffffffff00000000000000000000000000000000000000001661dead1790559050801515600114156106d557600082815260016020819052604080832080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169092179091555183917f4641df4a962071e12719d8c8c8e5ac7fc4d97b927346a3d7a335b1f7517e133c91a2610701565b60405182907f99d0e048484baa1b1540b1367cb128acd7ab2946d1ed91ec10e3c85e4bf51b8f90600090a25b600083334360405160200161071893929190610b4a565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181528151602092830120600090815291829052902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055505050505b50505050565b6060848484846040516024016107a69493929190610b9c565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fcbd4ece9000000000000000000000000000000000000000000000000000000001790529050949350505050565b60006020828403121561083857600080fd5b5035919050565b803573ffffffffffffffffffffffffffffffffffffffff8116811461086357600080fd5b919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f8301126108a857600080fd5b813567ffffffffffffffff808211156108c3576108c3610868565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f0116810190828211818310171561090957610909610868565b8160405283815286602085880101111561092257600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060006060848603121561095757600080fd5b6109608461083f565b9250602084013567ffffffffffffffff81111561097c57600080fd5b61098886828701610897565b925050604084013563ffffffff811681146109a257600080fd5b809150509250925092565b600080600080608085870312156109c357600080fd5b6109cc8561083f565b93506109da6020860161083f565b9250604085013567ffffffffffffffff8111156109f657600080fd5b610a0287828801610897565b949793965093946060013593505050565b60005b83811015610a2e578181015183820152602001610a16565b838111156107875750506000910152565b60008151808452610a57816020860160208601610a13565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000610a9c6020830184610a3f565b9392505050565b73ffffffffffffffffffffffffffffffffffffffff85168152608060208201526000610ad26080830186610a3f565b905083604083015263ffffffff8316606083015295945050505050565b60008219821115610b29577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b500190565b60008251610b40818460208701610a13565b9190910192915050565b60008451610b5c818460208901610a13565b60609490941b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001691909301908152601481019190915260340192915050565b600073ffffffffffffffffffffffffffffffffffffffff808716835280861660208401525060806040830152610bd56080830185610a3f565b90508260608301529594505050505056fea26469706673582212200afb9537c52292543adecf37773b8e4d795c984adf4e80970731e434679b4ec264736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x420000000000000000000000000000000000000F&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x000000000000000000000000a693b8f8207ff043f6bbc2e2120bbe4c2251efe9&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000abe&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000016e360&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000006&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100f55760003560e01c80638c8885c811610097578063de26c4a111610066578063de26c4a1146101cc578063f2fde38b146101df578063f45e65d8146101f2578063fe173b97146101fb57600080fd5b80638c8885c81461016b5780638da5cb5b1461017e578063bede39b5146101a6578063bf1fe420146101b957600080fd5b806349948e0e116100d357806349948e0e14610134578063519b4bd3146101475780637046559714610150578063715018a61461016357600080fd5b80630c18c162146100fa578063313ce567146101165780633577afc51461011f575b600080fd5b61010360035481565b6040519081526020015b60405180910390f35b61010360055481565b61013261012d3660046108d0565b610204565b005b610103610142366004610918565b6102c6565b61010360025481565b61013261015e3660046108d0565b610322565b6101326103d8565b6101326101793660046108d0565b610465565b60005460405173ffffffffffffffffffffffffffffffffffffffff909116815260200161010d565b6101326101b43660046108d0565b61051b565b6101326101c73660046108d0565b6105d1565b6101036101da366004610918565b610687565b6101326101ed3660046109e7565b61072b565b61010360045481565b61010360015481565b60005473ffffffffffffffffffffffffffffffffffffffff16331461028a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b60038190556040518181527f32740b35c0ea213650f60d44366b4fb211c9033b50714e4a1d34e65d5beb9bb4906020015b60405180910390a150565b6000806102d283610687565b90506000600254826102e49190610a53565b90506000600554600a6102f79190610bb2565b90506000600454836103099190610a53565b905060006103178383610bbe565b979650505050505050565b60005473ffffffffffffffffffffffffffffffffffffffff1633146103a3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60048190556040518181527f3336cd9708eaf2769a0f0dc0679f30e80f15dcd88d1921b5a16858e8b85c591a906020016102bb565b60005473ffffffffffffffffffffffffffffffffffffffff163314610459576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b610463600061085b565b565b60005473ffffffffffffffffffffffffffffffffffffffff1633146104e6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60058190556040518181527fd68112a8707e326d08be3656b528c1bcc5bbbfc47f4177e2179b14d8640838c1906020016102bb565b60005473ffffffffffffffffffffffffffffffffffffffff16331461059c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60028190556040518181527f351fb23757bb5ea0546c85b7996ddd7155f96b939ebaa5ff7bc49c75f27f2c44906020016102bb565b60005473ffffffffffffffffffffffffffffffffffffffff163314610652576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b60018190556040518181527ffcdccc6074c6c42e4bd578aa9870c697dc976a270968452d2b8c8dc369fae396906020016102bb565b600080805b8351811015610704578381815181106106a7576106a7610bf9565b01602001517fff00000000000000000000000000000000000000000000000000000000000000166106e4576106dd600483610c28565b91506106f2565b6106ef601083610c28565b91505b806106fc81610c40565b91505061068c565b506000600354826107159190610c28565b905061072381610440610c28565b949350505050565b60005473ffffffffffffffffffffffffffffffffffffffff1633146107ac576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610281565b73ffffffffffffffffffffffffffffffffffffffff811661084f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f64647265737300000000000000000000000000000000000000000000000000006064820152608401610281565b6108588161085b565b50565b6000805473ffffffffffffffffffffffffffffffffffffffff8381167fffffffffffffffffffffffff0000000000000000000000000000000000000000831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156108e257600080fd5b5035919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60006020828403121561092a57600080fd5b813567ffffffffffffffff8082111561094257600080fd5b818401915084601f83011261095657600080fd5b813581811115610968576109686108e9565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f011681019083821181831017156109ae576109ae6108e9565b816040528281528760208487010111156109c757600080fd5b826020860160208301376000928101602001929092525095945050505050565b6000602082840312156109f957600080fd5b813573ffffffffffffffffffffffffffffffffffffffff81168114610a1d57600080fd5b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615610a8b57610a8b610a24565b500290565b600181815b80851115610ae957817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff04821115610acf57610acf610a24565b80851615610adc57918102915b93841c9390800290610a95565b509250929050565b600082610b0057506001610bac565b81610b0d57506000610bac565b8160018114610b235760028114610b2d57610b49565b6001915050610bac565b60ff841115610b3e57610b3e610a24565b50506001821b610bac565b5060208310610133831016604e8410600b8410161715610b6c575081810a610bac565b610b768383610a90565b807fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff04821115610ba857610ba8610a24565b0290505b92915050565b6000610a1d8383610af1565b600082610bf4577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b500490565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60008219821115610c3b57610c3b610a24565b500190565b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415610c7257610c72610a24565b506001019056fea2646970667358221220b949ef5f9defd6c0aab6259672d00d239cb8854c9972ba1866af1c6ec6433d4c64736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000010&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x000000000000000000000000636af16bf2f682dd3109e60102b8e1a089fedaa8&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x0000000000000000000000004200000000000000000000000000000000000007&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100675760003560e01c80633cb747bf116100505780633cb747bf146100ca578063662a633a146100ea578063a3a79548146100fd57600080fd5b806332b7006d1461006c57806336c717c114610081575b600080fd5b61007f61007a366004610d0f565b610110565b005b6001546100a19073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b6000546100a19073ffffffffffffffffffffffffffffffffffffffff1681565b61007f6100f8366004610d80565b610126565b61007f61010b366004610e18565b6106c1565b61011f853333878787876106d8565b5050505050565b60015473ffffffffffffffffffffffffffffffffffffffff1661015e60005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461021d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602e60248201527f4f564d5f58434841494e3a206d657373656e67657220636f6e7472616374207560448201527f6e61757468656e7469636174656400000000000000000000000000000000000060648201526084015b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff1661025360005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff16636e296e456040518163ffffffff1660e01b815260040160206040518083038186803b15801561029857600080fd5b505afa1580156102ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102d09190610e9b565b73ffffffffffffffffffffffffffffffffffffffff1614610373576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603060248201527f4f564d5f58434841494e3a2077726f6e672073656e646572206f662063726f7360448201527f732d646f6d61696e206d657373616765000000000000000000000000000000006064820152608401610214565b61039d877f1d1d8b6300000000000000000000000000000000000000000000000000000000610a32565b801561045357508673ffffffffffffffffffffffffffffffffffffffff1663c01e1bd66040518163ffffffff1660e01b8152600401602060405180830381600087803b1580156103ec57600080fd5b505af1158015610400573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104249190610e9b565b73ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff16145b15610567576040517f40c10f1900000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8681166004830152602482018690528816906340c10f1990604401600060405180830381600087803b1580156104c857600080fd5b505af11580156104dc573d6000803e3d6000fd5b505050508573ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff167fb0444523268717a02698be47d0803aa7468c00acbed2f8bd93a0459cde61dd898888888860405161055a9493929190610f08565b60405180910390a46106b7565b600063a9f9e67560e01b8989888a89898960405160240161058e9796959493929190610f3e565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff00000000000000000000000000000000000000000000000000000000909316929092179091526001549091506106339073ffffffffffffffffffffffffffffffffffffffff16600083610a57565b8673ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff168a73ffffffffffffffffffffffffffffffffffffffff167f7ea89a4591614515571c2b51f5ea06494056f261c10ab1ed8c03c7590d87bce0898989896040516106ad9493929190610f08565b60405180910390a4505b5050505050505050565b6106d0863387878787876106d8565b505050505050565b6040517f9dc29fac0000000000000000000000000000000000000000000000000000000081523360048201526024810185905273ffffffffffffffffffffffffffffffffffffffff881690639dc29fac90604401600060405180830381600087803b15801561074657600080fd5b505af115801561075a573d6000803e3d6000fd5b5050505060008773ffffffffffffffffffffffffffffffffffffffff1663c01e1bd66040518163ffffffff1660e01b8152600401602060405180830381600087803b1580156107a857600080fd5b505af11580156107bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107e09190610e9b565b9050606073ffffffffffffffffffffffffffffffffffffffff891673deaddeaddeaddeaddeaddeaddeaddeaddead000014156108d5576040517f1532ec340000000000000000000000000000000000000000000000000000000090610851908a908a908a9089908990602401610f9b565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff00000000000000000000000000000000000000000000000000000000909316929092179091529050610994565b6040517fa9f9e67500000000000000000000000000000000000000000000000000000000906109149084908c908c908c908c908b908b90602401610f3e565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529190526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009093169290921790915290505b6001546109b89073ffffffffffffffffffffffffffffffffffffffff168683610a57565b3373ffffffffffffffffffffffffffffffffffffffff168973ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f73d170910aba9e6d50b102db522b1dbcd796216f5128b445aa2135272886497e8a8a89896040516106ad9493929190610f08565b6000610a3d83610ae8565b8015610a4e5750610a4e8383610b4c565b90505b92915050565b6000546040517f3dbb202b00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff90911690633dbb202b90610ab190869085908790600401611016565b600060405180830381600087803b158015610acb57600080fd5b505af1158015610adf573d6000803e3d6000fd5b50505050505050565b6000610b14827f01ffc9a700000000000000000000000000000000000000000000000000000000610b4c565b8015610a515750610b45827fffffffff00000000000000000000000000000000000000000000000000000000610b4c565b1592915050565b604080517fffffffff00000000000000000000000000000000000000000000000000000000831660248083019190915282518083039091018152604490910182526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f01ffc9a7000000000000000000000000000000000000000000000000000000001790529051600091908290819073ffffffffffffffffffffffffffffffffffffffff87169061753090610c06908690611092565b6000604051808303818686fa925050503d8060008114610c42576040519150601f19603f3d011682016040523d82523d6000602084013e610c47565b606091505b5091509150602081511015610c625760009350505050610a51565b818015610c7e575080806020019051810190610c7e91906110ae565b9695505050505050565b73ffffffffffffffffffffffffffffffffffffffff81168114610caa57600080fd5b50565b803563ffffffff81168114610cc157600080fd5b919050565b60008083601f840112610cd857600080fd5b50813567ffffffffffffffff811115610cf057600080fd5b602083019150836020828501011115610d0857600080fd5b9250929050565b600080600080600060808688031215610d2757600080fd5b8535610d3281610c88565b945060208601359350610d4760408701610cad565b9250606086013567ffffffffffffffff811115610d6357600080fd5b610d6f88828901610cc6565b969995985093965092949392505050565b600080600080600080600060c0888a031215610d9b57600080fd5b8735610da681610c88565b96506020880135610db681610c88565b95506040880135610dc681610c88565b94506060880135610dd681610c88565b93506080880135925060a088013567ffffffffffffffff811115610df957600080fd5b610e058a828b01610cc6565b989b979a50959850939692959293505050565b60008060008060008060a08789031215610e3157600080fd5b8635610e3c81610c88565b95506020870135610e4c81610c88565b945060408701359350610e6160608801610cad565b9250608087013567ffffffffffffffff811115610e7d57600080fd5b610e8989828a01610cc6565b979a9699509497509295939492505050565b600060208284031215610ead57600080fd5b8151610eb881610c88565b9392505050565b8183528181602085013750600060208284010152600060207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f840116840101905092915050565b73ffffffffffffffffffffffffffffffffffffffff85168152836020820152606060408201526000610c7e606083018486610ebf565b600073ffffffffffffffffffffffffffffffffffffffff808a1683528089166020840152808816604084015280871660608401525084608083015260c060a0830152610f8e60c083018486610ebf565b9998505050505050505050565b600073ffffffffffffffffffffffffffffffffffffffff808816835280871660208401525084604083015260806060830152610fdb608083018486610ebf565b979650505050505050565b60005b83811015611001578181015183820152602001610fe9565b83811115611010576000848401525b50505050565b73ffffffffffffffffffffffffffffffffffffffff841681526060602082015260008351806060840152611051816080850160208801610fe6565b63ffffffff93909316604083015250601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0160160800192915050565b600082516110a4818460208701610fe6565b9190910192915050565b6000602082840312156110c057600080fd5b81518015158114610eb857600080fdfea2646970667358221220df892c82e9ba0fc965240aa38614ff1bd6af4d227ce2c0e9933d7f50711a886264736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000011&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x000000000000000000000000fd1d2e729ae8eee2e146c033bf4400fe75284301&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x6080604052600436106100385760003560e01c80633ccfd60b14610044578063d3e5792b1461005b578063d4ff92181461008a57600080fd5b3661003f57005b600080fd5b34801561005057600080fd5b506100596100dc565b005b34801561006757600080fd5b5061007767d02ab486cedc000081565b6040519081526020015b60405180910390f35b34801561009657600080fd5b506000546100b79073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610081565b67d02ab486cedc000047101561019e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152605760248201527f4f564d5f53657175656e6365724665655661756c743a2077697468647261776160448201527f6c20616d6f756e74206d7573742062652067726561746572207468616e206d6960648201527f6e696d756d207769746864726177616c20616d6f756e74000000000000000000608482015260a40160405180910390fd5b600080546040805160208101825283815290517fa3a795480000000000000000000000000000000000000000000000000000000081527342000000000000000000000000000000000000109363a3a79548936102309373deaddeaddeaddeaddeaddeaddeaddeaddead00009373ffffffffffffffffffffffffffffffffffffffff909216924792909190600401610264565b600060405180830381600087803b15801561024a57600080fd5b505af115801561025e573d6000803e3d6000fd5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff808816835260208188168185015286604085015263ffffffff8616606085015260a06080850152845191508160a085015260005b828110156102cb5785810182015185820160c0015281016102af565b828111156102dd57600060c084870101525b5050601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160c001969550505050505056fea2646970667358221220387a6116dde263ea48767352a397053c8cffa776aecb43cded2f25a4a9cfbdc264736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000012&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {},</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b506004361061002b5760003560e01c8063896f93d114610030575b600080fd5b61004361003e36600461025f565b610045565b005b73ffffffffffffffffffffffffffffffffffffffff83166100c6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f4d7573742070726f76696465204c3120746f6b656e2061646472657373000000604482015260640160405180910390fd5b60007342000000000000000000000000000000000000108484846040516100ec90610178565b6100f99493929190610359565b604051809103906000f080158015610115573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fceeb8e7d520d7f3b65fc11a262b91066940193b05d4f93df07cfdced0eb551cf60405160405180910390a350505050565b6113d7806103b083390190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f8301126101c557600080fd5b813567ffffffffffffffff808211156101e0576101e0610185565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f0116810190828211818310171561022657610226610185565b8160405283815286602085880101111561023f57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060006060848603121561027457600080fd5b833573ffffffffffffffffffffffffffffffffffffffff8116811461029857600080fd5b9250602084013567ffffffffffffffff808211156102b557600080fd5b6102c1878388016101b4565b935060408601359150808211156102d757600080fd5b506102e4868287016101b4565b9150509250925092565b6000815180845260005b81811015610314576020818501810151868301820152016102f8565b81811115610326576000602083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b600073ffffffffffffffffffffffffffffffffffffffff80871683528086166020840152506080604083015261039260808301856102ee565b82810360608401526103a481856102ee565b97965050505050505056fe60806040523480156200001157600080fd5b50604051620013d7380380620013d783398101604081905262000034916200022f565b8151829082906200004d9060039060208501906200009f565b508051620000639060049060208401906200009f565b5050600580546001600160a01b039586166001600160a01b031991821617909155600680549690951695169490941790925550620002fc915050565b828054620000ad90620002bf565b90600052602060002090601f016020900481019282620000d157600085556200011c565b82601f10620000ec57805160ff19168380011785556200011c565b828001600101855582156200011c579182015b828111156200011c578251825591602001919060010190620000ff565b506200012a9291506200012e565b5090565b5b808211156200012a57600081556001016200012f565b80516001600160a01b03811681146200015d57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200018a57600080fd5b81516001600160401b0380821115620001a757620001a762000162565b604051601f8301601f19908116603f01168101908282118183101715620001d257620001d262000162565b81604052838152602092508683858801011115620001ef57600080fd5b600091505b83821015620002135785820183015181830184015290820190620001f4565b83821115620002255760008385830101525b9695505050505050565b600080600080608085870312156200024657600080fd5b620002518562000145565b9350620002616020860162000145565b60408601519093506001600160401b03808211156200027f57600080fd5b6200028d8883890162000178565b93506060870151915080821115620002a457600080fd5b50620002b38782880162000178565b91505092959194509250565b600181811c90821680620002d457607f821691505b60208210811415620002f657634e487b7160e01b600052602260045260246000fd5b50919050565b6110cb806200030c6000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c806370a0823111610097578063a9059cbb11610066578063a9059cbb14610215578063ae1f6aaf14610228578063c01e1bd61461026d578063dd62ed3e1461028d57600080fd5b806370a08231146101b157806395d89b41146101e75780639dc29fac146101ef578063a457c2d71461020257600080fd5b806323b872dd116100d357806323b872dd14610167578063313ce5671461017a578063395093511461018957806340c10f191461019c57600080fd5b806301ffc9a71461010557806306fdde031461012d578063095ea7b31461014257806318160ddd14610155575b600080fd5b610118610113366004610e4a565b6102d3565b60405190151581526020015b60405180910390f35b610135610393565b6040516101249190610e93565b610118610150366004610f2f565b610425565b6002545b604051908152602001610124565b610118610175366004610f59565b61043b565b60405160128152602001610124565b610118610197366004610f2f565b61050c565b6101af6101aa366004610f2f565b610555565b005b6101596101bf366004610f95565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205490565b61013561061a565b6101af6101fd366004610f2f565b610629565b610118610210366004610f2f565b6106e2565b610118610223366004610f2f565b6107a0565b6006546102489073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610124565b6005546102489073ffffffffffffffffffffffffffffffffffffffff1681565b61015961029b366004610fb0565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260016020908152604080832093909416825291909152205490565b60007f01ffc9a7a5cef8baa21ed3c5c0d7e23accb804b619e9333b597f47a0d84076e27f1d1d8b63000000000000000000000000000000000000000000000000000000007fffffffff0000000000000000000000000000000000000000000000000000000084167f01ffc9a700000000000000000000000000000000000000000000000000000000148061038b57507fffffffff00000000000000000000000000000000000000000000000000000000848116908216145b949350505050565b6060600380546103a290610fe3565b80601f01602080910402602001604051908101604052809291908181526020018280546103ce90610fe3565b801561041b5780601f106103f05761010080835404028352916020019161041b565b820191906000526020600020905b8154815290600101906020018083116103fe57829003601f168201915b5050505050905090565b60006104323384846107ad565b50600192915050565b600061044884848461092d565b73ffffffffffffffffffffffffffffffffffffffff84166000908152600160209081526040808320338452909152902054828110156104f45760405162461bcd60e51b815260206004820152602860248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206160448201527f6c6c6f77616e636500000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b61050185338584036107ad565b506001949350505050565b33600081815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff871684529091528120549091610432918590610550908690611066565b6107ad565b60065473ffffffffffffffffffffffffffffffffffffffff1633146105bc5760405162461bcd60e51b815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104eb565b6105c68282610b93565b8173ffffffffffffffffffffffffffffffffffffffff167f0f6798a560793a54c3bcfe86a93cde1e73087d944c0ea20544137d41213968858260405161060e91815260200190565b60405180910390a25050565b6060600480546103a290610fe3565b60065473ffffffffffffffffffffffffffffffffffffffff1633146106905760405162461bcd60e51b815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104eb565b61069a8282610c99565b8173ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca58260405161060e91815260200190565b33600090815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff86168452909152812054828110156107895760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760448201527f207a65726f00000000000000000000000000000000000000000000000000000060648201526084016104eb565b61079633858584036107ad565b5060019392505050565b600061043233848461092d565b73ffffffffffffffffffffffffffffffffffffffff83166108355760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460448201527f726573730000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff82166108be5760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f20616464726560448201527f737300000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff83811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591015b60405180910390a3505050565b73ffffffffffffffffffffffffffffffffffffffff83166109b65760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f20616460448201527f647265737300000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff8216610a3f5760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201527f657373000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff831660009081526020819052604090205481811015610adb5760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206260448201527f616c616e6365000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff808516600090815260208190526040808220858503905591851681529081208054849290610b1f908490611066565b925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610b8591815260200190565b60405180910390a350505050565b73ffffffffffffffffffffffffffffffffffffffff8216610bf65760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f20616464726573730060448201526064016104eb565b8060026000828254610c089190611066565b909155505073ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604081208054839290610c42908490611066565b909155505060405181815273ffffffffffffffffffffffffffffffffffffffff8316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a35050565b73ffffffffffffffffffffffffffffffffffffffff8216610d225760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f2061646472657360448201527f730000000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604090205481811015610dbe5760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e60448201527f636500000000000000000000000000000000000000000000000000000000000060648201526084016104eb565b73ffffffffffffffffffffffffffffffffffffffff83166000908152602081905260408120838303905560028054849290610dfa90849061107e565b909155505060405182815260009073ffffffffffffffffffffffffffffffffffffffff8516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90602001610920565b600060208284031215610e5c57600080fd5b81357fffffffff0000000000000000000000000000000000000000000000000000000081168114610e8c57600080fd5b9392505050565b600060208083528351808285015260005b81811015610ec057858101830151858201604001528201610ea4565b81811115610ed2576000604083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016929092016040019392505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610f2a57600080fd5b919050565b60008060408385031215610f4257600080fd5b610f4b83610f06565b946020939093013593505050565b600080600060608486031215610f6e57600080fd5b610f7784610f06565b9250610f8560208501610f06565b9150604084013590509250925092565b600060208284031215610fa757600080fd5b610e8c82610f06565b60008060408385031215610fc357600080fd5b610fcc83610f06565b9150610fda60208401610f06565b90509250929050565b600181811c90821680610ff757607f821691505b60208210811415611031577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000821982111561107957611079611037565b500190565b60008282101561109057611090611037565b50039056fea264697066735822122069a2d33039157f3f2f180571262ca2a5d0a3a24d33bf9448f3b7c2ce9ff757f964736f6c63430008090033a2646970667358221220d2e13f28319115807ec7308d1cd88642a8542d0b838e00b8769f8a85d696f26764736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000013&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {},</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x4B60005260206000F3&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000006&quot;: &quot;0x0000000000000000000000004200000000000000000000000000000000000010&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x457468657200000000000000000000000000000000000000000000000000000a&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x4554480000000000000000000000000000000000000000000000000000000006&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106101005760003560e01c806370a0823111610097578063a9059cbb11610066578063a9059cbb14610215578063ae1f6aaf14610228578063c01e1bd61461026d578063dd62ed3e1461028d57600080fd5b806370a08231146101b157806395d89b41146101e75780639dc29fac146101ef578063a457c2d71461020257600080fd5b806323b872dd116100d357806323b872dd14610167578063313ce5671461017a578063395093511461018957806340c10f191461019c57600080fd5b806301ffc9a71461010557806306fdde031461012d578063095ea7b31461014257806318160ddd14610155575b600080fd5b610118610113366004610c6d565b6102d3565b60405190151581526020015b60405180910390f35b610135610393565b6040516101249190610cb6565b610118610150366004610d52565b610425565b6002545b604051908152602001610124565b610118610175366004610d7c565b6104db565b60405160128152602001610124565b610118610197366004610d52565b61058c565b6101af6101aa366004610d52565b61063d565b005b6101596101bf366004610db8565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205490565b61013561071c565b6101af6101fd366004610d52565b61072b565b610118610210366004610d52565b6107fe565b610118610223366004610d52565b6108af565b6006546102489073ffffffffffffffffffffffffffffffffffffffff1681565b60405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610124565b6005546102489073ffffffffffffffffffffffffffffffffffffffff1681565b61015961029b366004610dd3565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260016020908152604080832093909416825291909152205490565b60007f01ffc9a7a5cef8baa21ed3c5c0d7e23accb804b619e9333b597f47a0d84076e27f1d1d8b63000000000000000000000000000000000000000000000000000000007fffffffff0000000000000000000000000000000000000000000000000000000084167f01ffc9a700000000000000000000000000000000000000000000000000000000148061038b57507fffffffff00000000000000000000000000000000000000000000000000000000848116908216145b949350505050565b6060600380546103a290610e06565b80601f01602080910402602001604051908101604052809291908181526020018280546103ce90610e06565b801561041b5780601f106103f05761010080835404028352916020019161041b565b820191906000526020600020905b8154815290600101906020018083116103fe57829003601f168201915b5050505050905090565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604260248201527f4f564d5f4554483a20617070726f76652069732064697361626c65642070656e60448201527f64696e67206675727468657220636f6d6d756e6974792064697363757373696f60648201527f6e2e000000000000000000000000000000000000000000000000000000000000608482015260009060a4015b60405180910390fd5b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604760248201527f4f564d5f4554483a207472616e7366657246726f6d2069732064697361626c6560448201527f642070656e64696e67206675727468657220636f6d6d756e697479206469736360648201527f757373696f6e2e00000000000000000000000000000000000000000000000000608482015260009060a4016104d2565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604c60248201527f4f564d5f4554483a20696e637265617365416c6c6f77616e636520697320646960448201527f7361626c65642070656e64696e67206675727468657220636f6d6d756e69747960648201527f2064697363757373696f6e2e0000000000000000000000000000000000000000608482015260009060a4016104d2565b60065473ffffffffffffffffffffffffffffffffffffffff1633146106be576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104d2565b6106c88282610960565b8173ffffffffffffffffffffffffffffffffffffffff167f0f6798a560793a54c3bcfe86a93cde1e73087d944c0ea20544137d41213968858260405161071091815260200190565b60405180910390a25050565b6060600480546103a290610e06565b60065473ffffffffffffffffffffffffffffffffffffffff1633146107ac576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f6e6c79204c32204272696467652063616e206d696e7420616e64206275726e60448201526064016104d2565b6107b68282610a80565b8173ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca58260405161071091815260200190565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604c60248201527f4f564d5f4554483a206465637265617365416c6c6f77616e636520697320646960448201527f7361626c65642070656e64696e67206675727468657220636f6d6d756e69747960648201527f2064697363757373696f6e2e0000000000000000000000000000000000000000608482015260009060a4016104d2565b6040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152604360248201527f4f564d5f4554483a207472616e736665722069732064697361626c656420706560448201527f6e64696e67206675727468657220636f6d6d756e69747920646973637573736960648201527f6f6e2e0000000000000000000000000000000000000000000000000000000000608482015260009060a4016104d2565b73ffffffffffffffffffffffffffffffffffffffff82166109dd576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f20616464726573730060448201526064016104d2565b80600260008282546109ef9190610e89565b909155505073ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604081208054839290610a29908490610e89565b909155505060405181815273ffffffffffffffffffffffffffffffffffffffff8316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a35050565b73ffffffffffffffffffffffffffffffffffffffff8216610b23576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f2061646472657360448201527f730000000000000000000000000000000000000000000000000000000000000060648201526084016104d2565b73ffffffffffffffffffffffffffffffffffffffff821660009081526020819052604090205481811015610bd9576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e60448201527f636500000000000000000000000000000000000000000000000000000000000060648201526084016104d2565b73ffffffffffffffffffffffffffffffffffffffff83166000908152602081905260408120838303905560028054849290610c15908490610ea1565b909155505060405182815260009073ffffffffffffffffffffffffffffffffffffffff8516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9060200160405180910390a3505050565b600060208284031215610c7f57600080fd5b81357fffffffff0000000000000000000000000000000000000000000000000000000081168114610caf57600080fd5b9392505050565b600060208083528351808285015260005b81811015610ce357858101830151858201604001528201610cc7565b81811115610cf5576000604083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016929092016040019392505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610d4d57600080fd5b919050565b60008060408385031215610d6557600080fd5b610d6e83610d29565b946020939093013593505050565b600080600060608486031215610d9157600080fd5b610d9a84610d29565b9250610da860208501610d29565b9150604084013590509250925092565b600060208284031215610dca57600080fd5b610caf82610d29565b60008060408385031215610de657600080fd5b610def83610d29565b9150610dfd60208401610d29565b90509250929050565b600181811c90821680610e1a57607f821691505b60208210811415610e54577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008219821115610e9c57610e9c610e5a565b500190565b600082821015610eb357610eb3610e5a565b50039056fea2646970667358221220b71535a5111461b42945e5d842957b3a5926f7ed07d271872f6da21952b5f8b464736f6c63430008090033&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4200000000000000000000000000000000000006&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;00&quot;,</span>
<span class="term-fg32">+      &quot;storage&quot;: {</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x577261707065642045746865720000000000000000000000000000000000001a&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x5745544800000000000000000000000000000000000000000000000000000008&quot;,</span>
<span class="term-fg32">+        &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000012&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x6080604052600436106100bc5760003560e01c8063313ce56711610074578063a9059cbb1161004e578063a9059cbb146102cb578063d0e30db0146100bc578063dd62ed3e14610311576100bc565b8063313ce5671461024b57806370a082311461027657806395d89b41146102b6576100bc565b806318160ddd116100a557806318160ddd146101aa57806323b872dd146101d15780632e1a7d4d14610221576100bc565b806306fdde03146100c6578063095ea7b314610150575b6100c4610359565b005b3480156100d257600080fd5b506100db6103a8565b6040805160208082528351818301528351919283929083019185019080838360005b838110156101155781810151838201526020016100fd565b50505050905090810190601f1680156101425780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561015c57600080fd5b506101966004803603604081101561017357600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610454565b604080519115158252519081900360200190f35b3480156101b657600080fd5b506101bf6104c7565b60408051918252519081900360200190f35b3480156101dd57600080fd5b50610196600480360360608110156101f457600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135811691602081013590911690604001356104cb565b34801561022d57600080fd5b506100c46004803603602081101561024457600080fd5b503561066b565b34801561025757600080fd5b50610260610700565b6040805160ff9092168252519081900360200190f35b34801561028257600080fd5b506101bf6004803603602081101561029957600080fd5b503573ffffffffffffffffffffffffffffffffffffffff16610709565b3480156102c257600080fd5b506100db61071b565b3480156102d757600080fd5b50610196600480360360408110156102ee57600080fd5b5073ffffffffffffffffffffffffffffffffffffffff8135169060200135610793565b34801561031d57600080fd5b506101bf6004803603604081101561033457600080fd5b5073ffffffffffffffffffffffffffffffffffffffff813581169160200135166107a7565b33600081815260036020908152604091829020805434908101909155825190815291517fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c9281900390910190a2565b6000805460408051602060026001851615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561044c5780601f106104215761010080835404028352916020019161044c565b820191906000526020600020905b81548152906001019060200180831161042f57829003601f168201915b505050505081565b33600081815260046020908152604080832073ffffffffffffffffffffffffffffffffffffffff8716808552908352818420869055815186815291519394909390927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925928290030190a350600192915050565b4790565b73ffffffffffffffffffffffffffffffffffffffff83166000908152600360205260408120548211156104fd57600080fd5b73ffffffffffffffffffffffffffffffffffffffff84163314801590610573575073ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff14155b156105ed5773ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020548211156105b557600080fd5b73ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020805483900390555b73ffffffffffffffffffffffffffffffffffffffff808516600081815260036020908152604080832080548890039055938716808352918490208054870190558351868152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a35060019392505050565b3360009081526003602052604090205481111561068757600080fd5b33600081815260036020526040808220805485900390555183156108fc0291849190818181858888f193505050501580156106c6573d6000803e3d6000fd5b5060408051828152905133917f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65919081900360200190a250565b60025460ff1681565b60036020526000908152604090205481565b60018054604080516020600284861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561044c5780601f106104215761010080835404028352916020019161044c565b60006107a03384846104cb565b9392505050565b60046020908152600092835260408084209091529082529020548156fea265627a7a7231582091c18790e0cca5011d2518024840ee00fecc67e11f56fd746f2cf84d5b583e0064736f6c63430005110032&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-64a73294d2bc86e5ca94be39" role="button"
                   aria-expanded="false" aria-controls="id-64a73294d2bc86e5ca94be39">
                    <code>crates/primitives/src/chain/mod.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/chain/mod.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/chain/mod.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-64a73294d2bc86e5ca94be39"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;mod.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;mod.rs</span>
<span class="term-fg1">index 425939ce44b66d2b2bf4d1e7094772b97d7c25d8..9b1a9da20b037cdf1d9d38a4a78d0da6618047ae 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;mod.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;mod.rs</span>
<span class="term-fg36">@@ -14,6 +14,9 @@</span>     AllGenesisFormats, ChainSpec, ChainSpecBuilder, DisplayHardforks, ForkCondition,
     ForkTimestamps, GOERLI, MAINNET, SEPOLIA,
 };
&nbsp;
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub use spec::OP_GOERLI;</span>
<span class="term-fg32">+</span>
 &#47;&#47; The chain info module.
 mod info;
 pub use info::ChainInfo;
<span class="term-fg36">@@ -42,6 +45,18 @@</span>
     &#47;&#47;&#47; Returns the sepolia chain.
     pub const fn sepolia() -&gt; Self {
         Chain::Named(ethers_core::types::Chain::Sepolia)
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Returns the optimism goerli chain.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub const fn optimism_goerli() -&gt; Self {</span>
<span class="term-fg32">+        Chain::Named(ethers_core::types::Chain::OptimismGoerli)</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Returns the optimism mainnet chain.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub const fn optimism_mainnet() -&gt; Self {</span>
<span class="term-fg32">+        Chain::Named(ethers_core::types::Chain::Optimism)</span>
     }
&nbsp;
     &#47;&#47;&#47; The id of the chain</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-da5a29c157b8fcf1816efb5d" role="button"
                   aria-expanded="false" aria-controls="id-da5a29c157b8fcf1816efb5d">
                    <code>crates/primitives/src/chain/spec.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/chain/spec.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/chain/spec.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+103</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-da5a29c157b8fcf1816efb5d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;spec.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;spec.rs</span>
<span class="term-fg1">index 0c84dc27539993ad8696356380a3c33099851c8d..ba78a2b9e2a47bbd65f5d184d3fc7c9506cec451 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;spec.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;chain&#47;spec.rs</span>
<span class="term-fg36">@@ -54,6 +54,8 @@</span>                 },
             ),
             (Hardfork::Shanghai, ForkCondition::Timestamp(1681338455)),
         ]),
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        optimism: None,</span>
     }
     .into()
 });
<span class="term-fg36">@@ -88,6 +90,8 @@</span>                 ForkCondition::TTD { fork_block: None, total_difficulty: U256::from(10_790_000) },
             ),
             (Hardfork::Shanghai, ForkCondition::Timestamp(1678832736)),
         ]),
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        optimism: None,</span>
     }
     .into()
 });
<span class="term-fg36">@@ -126,6 +130,39 @@</span>                 },
             ),
             (Hardfork::Shanghai, ForkCondition::Timestamp(1677557088)),
         ]),
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        optimism: None,</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+    .into()</span>
<span class="term-fg32">+});</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; The Optimism Goerli spec</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub static OP_GOERLI: Lazy&lt;Arc&lt;ChainSpec&gt;&gt; = Lazy::new(|| {</span>
<span class="term-fg32">+    ChainSpec {</span>
<span class="term-fg32">+        chain: Chain::optimism_goerli(),</span>
<span class="term-fg32">+        genesis: serde_json::from_str(include_str!(&quot;..&#47;..&#47;res&#47;genesis&#47;goerli_op.json&quot;))</span>
<span class="term-fg32">+            .expect(&quot;Can&#39;t deserialize Optimism Goerli genesis json&quot;),</span>
<span class="term-fg32">+        genesis_hash: Some(H256(hex!(</span>
<span class="term-fg32">+            &quot;c1fc15cd51159b1f1e5cbc4b82e85c1447ddfa33c52cf1d98d14fba0d6354be1&quot;</span>
<span class="term-fg32">+        ))),</span>
<span class="term-fg32">+        fork_timestamps: ForkTimestamps::default(), &#47;&#47; TODO(clabby): update this</span>
<span class="term-fg32">+        paris_block_and_final_difficulty: Some((0, U256::from(0))),</span>
<span class="term-fg32">+        hardforks: BTreeMap::from([</span>
<span class="term-fg32">+            (Hardfork::Byzantium, ForkCondition::Block(0)),</span>
<span class="term-fg32">+            (Hardfork::Constantinople, ForkCondition::Block(0)),</span>
<span class="term-fg32">+            (Hardfork::Petersburg, ForkCondition::Block(0)),</span>
<span class="term-fg32">+            (Hardfork::Istanbul, ForkCondition::Block(0)),</span>
<span class="term-fg32">+            (Hardfork::MuirGlacier, ForkCondition::Block(0)),</span>
<span class="term-fg32">+            (Hardfork::Berlin, ForkCondition::Block(0)),</span>
<span class="term-fg32">+            (Hardfork::London, ForkCondition::Block(0)),</span>
<span class="term-fg32">+            (</span>
<span class="term-fg32">+                Hardfork::Paris,</span>
<span class="term-fg32">+                ForkCondition::TTD { fork_block: Some(0), total_difficulty: U256::from(0) },</span>
<span class="term-fg32">+            ),</span>
<span class="term-fg32">+            (Hardfork::Regolith, ForkCondition::Timestamp(1679079600)),</span>
<span class="term-fg32">+        ]),</span>
<span class="term-fg32">+        optimism: Some(OptimismConfig { eip_1559_elasticity: 10, eip_1559_denominator: 50 }),</span>
     }
     .into()
 });
<span class="term-fg36">@@ -164,6 +201,20 @@</span>     pub fork_timestamps: ForkTimestamps,
&nbsp;
     &#47;&#47;&#47; The active hard forks and their activation conditions
     pub hardforks: BTreeMap&lt;Hardfork, ForkCondition&gt;,
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Optimism configuration</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub optimism: Option&lt;OptimismConfig&gt;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Optimism configuration.</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+#[derive(Serialize, Deserialize, Debug, Clone)]</span>
<span class="term-fg32">+pub struct OptimismConfig {</span>
<span class="term-fg32">+    &#47;&#47;&#47; Elasticity multiplier as defined in [EIP-1559](https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-1559)</span>
<span class="term-fg32">+    pub eip_1559_elasticity: u64,</span>
<span class="term-fg32">+    &#47;&#47;&#47; Base fee max change denominator as defined in [EIP-1559](https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-1559)</span>
<span class="term-fg32">+    pub eip_1559_denominator: u64,</span>
 }
&nbsp;
 impl ChainSpec {
<span class="term-fg36">@@ -387,6 +438,8 @@</span>             genesis_hash: None,
             fork_timestamps: ForkTimestamps::from_hardforks(&amp;hardforks),
             hardforks,
             paris_block_and_final_difficulty: None,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            optimism: None,</span>
         }
     }
 }
<span class="term-fg36">@@ -458,6 +511,8 @@</span> pub struct ChainSpecBuilder {
     chain: Option&lt;Chain&gt;,
     genesis: Option&lt;Genesis&gt;,
     hardforks: BTreeMap&lt;Hardfork, ForkCondition&gt;,
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    optimism: Option&lt;OptimismConfig&gt;,</span>
 }
&nbsp;
 impl ChainSpecBuilder {
<span class="term-fg36">@@ -467,6 +522,8 @@</span>         Self {
             chain: Some(MAINNET.chain),
             genesis: Some(MAINNET.genesis.clone()),
             hardforks: MAINNET.hardforks.clone(),
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            optimism: None,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -577,6 +634,22 @@</span>         self.hardforks.insert(Hardfork::Shanghai, ForkCondition::Timestamp(0));
         self
     }
&nbsp;
<span class="term-fg32">+    &#47;&#47;&#47; Enable Bedrock at genesis</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub fn bedrock_activated(mut self) -&gt; Self {</span>
<span class="term-fg32">+        self = self.london_activated();</span>
<span class="term-fg32">+        self.hardforks.insert(Hardfork::Bedrock, ForkCondition::Block(0));</span>
<span class="term-fg32">+        self</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Enable Regolith at genesis</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub fn regolith_activated(mut self) -&gt; Self {</span>
<span class="term-fg32">+        self = self.bedrock_activated();</span>
<span class="term-fg32">+        self.hardforks.insert(Hardfork::Regolith, ForkCondition::Block(0));</span>
<span class="term-fg32">+        self</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
     &#47;&#47;&#47; Build the resulting [`ChainSpec`].
     &#47;&#47;&#47;
     &#47;&#47;&#47; # Panics
<span class="term-fg36">@@ -591,6 +664,8 @@</span>             genesis_hash: None,
             fork_timestamps: ForkTimestamps::from_hardforks(&amp;self.hardforks),
             hardforks: self.hardforks,
             paris_block_and_final_difficulty: None,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            optimism: self.optimism,</span>
         }
     }
 }
<span class="term-fg36">@@ -601,6 +676,8 @@</span>         Self {
             chain: Some(value.chain),
             genesis: Some(value.genesis.clone()),
             hardforks: value.hardforks.clone(),
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            optimism: value.optimism.clone(),</span>
         }
     }
 }
<span class="term-fg36">@@ -893,6 +970,10 @@</span>     };
     use bytes::BytesMut;
     use ethers_core::types as EtherType;
     use reth_rlp::Encodable;
<span class="term-fg32">+</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    use crate::OP_GOERLI;</span>
<span class="term-fg32">+</span>
     fn test_fork_ids(spec: &amp;ChainSpec, cases: &amp;[(Head, ForkId)]) {
         for (block, expected_id) in cases {
             let computed_id = spec.fork_id(block);
<span class="term-fg36">@@ -1183,6 +1264,28 @@</span>                 ),
                 (
                     Head { number: 1735372, timestamp: 1677557088, ..Default::default() },
                     ForkId { hash: ForkHash([0xf7, 0xf9, 0xbc, 0x08]), next: 0 },
<span class="term-fg32">+                ),</span>
<span class="term-fg32">+            ],</span>
<span class="term-fg32">+        );</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    #[test]</span>
<span class="term-fg32">+    fn optimism_goerli_forkids() {</span>
<span class="term-fg32">+        test_fork_ids(</span>
<span class="term-fg32">+            &amp;OP_GOERLI,</span>
<span class="term-fg32">+            &amp;[</span>
<span class="term-fg32">+                (</span>
<span class="term-fg32">+                    Head { number: 0, ..Default::default() },</span>
<span class="term-fg32">+                    ForkId { hash: ForkHash([0x6d, 0x63, 0x76, 0xbe]), next: 1679079600 },</span>
<span class="term-fg32">+                ),</span>
<span class="term-fg32">+                (</span>
<span class="term-fg32">+                    Head { number: 4061224, timestamp: 1679079599, ..Default::default() },</span>
<span class="term-fg32">+                    ForkId { hash: ForkHash([0x6d, 0x63, 0x76, 0xbe]), next: 1679079600 },</span>
<span class="term-fg32">+                ),</span>
<span class="term-fg32">+                (</span>
<span class="term-fg32">+                    Head { number: 4061224, timestamp: 1679079600, ..Default::default() },</span>
<span class="term-fg32">+                    ForkId { hash: ForkHash([0x8e, 0x32, 0xcc, 0x21]), next: 0 },</span>
                 ),
             ],
         );</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4a94076c334ae355106d918d" role="button"
                   aria-expanded="false" aria-controls="id-4a94076c334ae355106d918d">
                    <code>crates/primitives/src/constants.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/constants.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/constants.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4a94076c334ae355106d918d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;constants.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;constants.rs</span>
<span class="term-fg1">index 005d69380ab21b88845449a067537f15ce0f995d..177082ddb6faaa65b6abc32c8d0dd60cce75b0e1 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;constants.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;constants.rs</span>
<span class="term-fg36">@@ -48,10 +48,20 @@</span> &#47;&#47;&#47; Initial base fee as defined in [EIP-1559](https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-1559)
 pub const EIP1559_INITIAL_BASE_FEE: u64 = 1_000_000_000;
&nbsp;
 &#47;&#47;&#47; Base fee max change denominator as defined in [EIP-1559](https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-1559)
<span class="term-fg32">+#[cfg(not(feature = &quot;optimism&quot;))]</span>
 pub const EIP1559_BASE_FEE_MAX_CHANGE_DENOMINATOR: u64 = 8;
&nbsp;
 &#47;&#47;&#47; Elasticity multiplier as defined in [EIP-1559](https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-1559)
<span class="term-fg32">+#[cfg(not(feature = &quot;optimism&quot;))]</span>
 pub const EIP1559_ELASTICITY_MULTIPLIER: u64 = 2;
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Base fee max change denominator for Optimism.</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub const EIP1559_BASE_FEE_MAX_CHANGE_DENOMINATOR: u64 = 50;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Elasticity multiplier for Optimism.</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub const EIP1559_ELASTICITY_MULTIPLIER: u64 = 10;</span>
&nbsp;
 &#47;&#47;&#47; Multiplier for converting gwei to wei.
 pub const GWEI_TO_WEI: u64 = 1_000_000_000;
<span class="term-fg36">@@ -76,6 +86,11 @@</span>
 &#47;&#47;&#47; Sepolia genesis hash.
 pub const SEPOLIA_GENESIS: H256 =
     H256(hex!(&quot;25a5cc106eea7138acab33231d7160d69cb777ee0c2c553fcddf5138993e6dd9&quot;));
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Optimism goerli genesis hash.</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub const GOERLI_OP_GENESIS: H256 =</span>
<span class="term-fg32">+    H256(hex!(&quot;c1fc15cd51159b1f1e5cbc4b82e85c1447ddfa33c52cf1d98d14fba0d6354be1&quot;));</span>
&nbsp;
 &#47;&#47;&#47; Keccak256 over empty array.
 pub const KECCAK_EMPTY: H256 =</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f52fe21effdd00e94ca65cb9" role="button"
                   aria-expanded="false" aria-controls="id-f52fe21effdd00e94ca65cb9">
                    <code>crates/primitives/src/hardfork.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/hardfork.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/hardfork.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+26</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f52fe21effdd00e94ca65cb9"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;hardfork.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;hardfork.rs</span>
<span class="term-fg1">index f26ffbcc4032eedc4bf85ab1730da75e97402c2b..f772e8c6cc24718427e60258d4660be73481f386 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;hardfork.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;hardfork.rs</span>
<span class="term-fg36">@@ -39,6 +39,12 @@</span>     &#47;&#47;&#47; Paris.
     Paris,
     &#47;&#47;&#47; Shanghai.
     Shanghai,
<span class="term-fg32">+    &#47;&#47;&#47; Bedrock.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    Bedrock,</span>
<span class="term-fg32">+    &#47;&#47;&#47; Regolith</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    Regolith,</span>
 }
&nbsp;
 impl Hardfork {
<span class="term-fg36">@@ -82,6 +88,10 @@</span>             &quot;arrowglacier&quot; =&gt; Hardfork::ArrowGlacier,
             &quot;grayglacier&quot; =&gt; Hardfork::GrayGlacier,
             &quot;paris&quot; =&gt; Hardfork::Paris,
             &quot;shanghai&quot; =&gt; Hardfork::Shanghai,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            &quot;bedrock&quot; =&gt; Hardfork::Bedrock,</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            &quot;regolith&quot; =&gt; Hardfork::Regolith,</span>
             _ =&gt; return Err(format!(&quot;Unknown hardfork: {s}&quot;)),
         };
         Ok(hardfork)
<span class="term-fg36">@@ -147,6 +157,18 @@</span>         assert_eq!(hardforks, expected_hardforks);
     }
&nbsp;
     #[test]
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    fn check_op_hardfork_from_str() {</span>
<span class="term-fg32">+        let hardfork_str = [&quot;beDrOck&quot;, &quot;rEgOlITH&quot;];</span>
<span class="term-fg32">+        let expected_hardforks = [Hardfork::Bedrock, Hardfork::Regolith];</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        let hardforks: Vec&lt;Hardfork&gt; =</span>
<span class="term-fg32">+            hardfork_str.iter().map(|h| Hardfork::from_str(h).unwrap()).collect();</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        assert_eq!(hardforks, expected_hardforks);</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    #[test]</span>
     fn check_nonexistent_hardfork_from_str() {
         assert!(Hardfork::from_str(&quot;not a hardfork&quot;).is_err());
     }
<span class="term-fg36">@@ -160,6 +182,8 @@</span>             genesis_hash: None,
             hardforks: BTreeMap::from([(Hardfork::Frontier, ForkCondition::Never)]),
             fork_timestamps: Default::default(),
             paris_block_and_final_difficulty: None,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            optimism: None,</span>
         };
&nbsp;
         assert_eq!(Hardfork::Frontier.fork_id(&amp;spec), None);
<span class="term-fg36">@@ -174,6 +198,8 @@</span>             genesis_hash: None,
             hardforks: BTreeMap::from([(Hardfork::Shanghai, ForkCondition::Never)]),
             fork_timestamps: Default::default(),
             paris_block_and_final_difficulty: None,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            optimism: None,</span>
         };
&nbsp;
         assert_eq!(Hardfork::Shanghai.fork_filter(&amp;spec), None);</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9e705634486c3652b766e056" role="button"
                   aria-expanded="false" aria-controls="id-9e705634486c3652b766e056">
                    <code>crates/primitives/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9e705634486c3652b766e056"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;lib.rs</span>
<span class="term-fg1">index 0248f008a24c06ccd704648670b3d8e26e9f551c..44f5ecc30d1e527ccdea2a9f6156b00ef19cb8b5 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -58,6 +58,8 @@</span>     Block, BlockBody, BlockBodyRoots, BlockHashOrNumber, BlockId, BlockNumHash, BlockNumberOrTag,
     BlockWithSenders, ForkBlock, SealedBlock, SealedBlockWithSenders,
 };
 pub use bloom::Bloom;
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub use chain::OP_GOERLI;</span>
 pub use chain::{
     AllGenesisFormats, Chain, ChainInfo, ChainSpec, ChainSpecBuilder, DisplayHardforks,
     ForkCondition, ForkTimestamps, GOERLI, MAINNET, SEPOLIA,
<span class="term-fg36">@@ -91,6 +93,8 @@</span>     TransactionMeta, TransactionSigned, TransactionSignedEcRecovered, TransactionSignedNoHash,
     TxEip1559, TxEip2930, TxLegacy, TxType, EIP1559_TX_TYPE_ID, EIP2930_TX_TYPE_ID,
     LEGACY_TX_TYPE_ID,
 };
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub use transaction::{TxDeposit, DEPOSIT_TX_TYPE, DEPOSIT_VERSION};</span>
 pub use withdrawal::Withdrawal;
&nbsp;
 &#47;&#47;&#47; A block hash.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-22547b107cff2b36678ac254" role="button"
                   aria-expanded="false" aria-controls="id-22547b107cff2b36678ac254">
                    <code>crates/primitives/src/proofs.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/proofs.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/proofs.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-22547b107cff2b36678ac254"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;proofs.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;proofs.rs</span>
<span class="term-fg1">index 95fd279d12b542589c03dd99fb7b844b8237e93c..40740d119af07b95764062a0beb5183570a3609b 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;proofs.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;proofs.rs</span>
<span class="term-fg36">@@ -171,6 +171,8 @@</span>                 tx_type: TxType::EIP2930,
                 success: true,
                 cumulative_gas_used: 102068,
                 logs,
<span class="term-fg32">+                #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                deposit_nonce: None,</span>
             },
             bloom,
         };</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-417082289ebbc991644bdbb1" role="button"
                   aria-expanded="false" aria-controls="id-417082289ebbc991644bdbb1">
                    <code>crates/primitives/src/receipt.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/receipt.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/receipt.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+47</span></div>
                        <div class="text-start"><span class="text-danger">-9</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-417082289ebbc991644bdbb1"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;receipt.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;receipt.rs</span>
<span class="term-fg1">index 15a5a2308dfbb5d7f7c970f1ff9162a8688f0b0d..85b286c14629364cdb46ef6023077a5ffe009b3a 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;receipt.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;receipt.rs</span>
<span class="term-fg36">@@ -28,6 +28,9 @@</span>             strategy = &quot;proptest::collection::vec(proptest::arbitrary::any::&lt;Log&gt;(), 0..=20)&quot;
         )
     )]
     pub logs: Vec&lt;Log&gt;,
<span class="term-fg32">+    &#47;&#47;&#47; Deposit nonce for Optimism deposited transactions</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub deposit_nonce: Option&lt;u64&gt;,</span>
 }
&nbsp;
 impl Receipt {
<span class="term-fg36">@@ -103,7 +106,29 @@</span>         let cumulative_gas_used = reth_rlp::Decodable::decode(b)?;
         let bloom = Decodable::decode(b)?;
         let logs = reth_rlp::Decodable::decode(b)?;
&nbsp;
<span class="term-fg31">-        let this = Self { receipt: Receipt { tx_type, success, cumulative_gas_used, logs }, bloom };</span>
<span class="term-fg32">+        let receipt = match tx_type {</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            TxType::DEPOSIT =&gt; {</span>
<span class="term-fg32">+                let deposit_nonce = reth_rlp::Decodable::decode(b)?;</span>
<span class="term-fg32">+                Receipt {</span>
<span class="term-fg32">+                    tx_type,</span>
<span class="term-fg32">+                    success,</span>
<span class="term-fg32">+                    cumulative_gas_used,</span>
<span class="term-fg32">+                    logs,</span>
<span class="term-fg32">+                    deposit_nonce: Some(deposit_nonce),</span>
<span class="term-fg32">+                }</span>
<span class="term-fg32">+            }</span>
<span class="term-fg32">+            _ =&gt; Receipt {</span>
<span class="term-fg32">+                tx_type,</span>
<span class="term-fg32">+                success,</span>
<span class="term-fg32">+                cumulative_gas_used,</span>
<span class="term-fg32">+                logs,</span>
<span class="term-fg32">+                #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                deposit_nonce: None,</span>
<span class="term-fg32">+            },</span>
<span class="term-fg32">+        };</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        let this = Self { receipt, bloom };</span>
         let consumed = started_len - b.len();
         if consumed != rlp_head.payload_length {
             return Err(reth_rlp::DecodeError::ListLengthMismatch {
<span class="term-fg36">@@ -141,14 +166,21 @@</span>                 let _header = reth_rlp::Header::decode(buf)?;
                 let receipt_type = *buf.first().ok_or(reth_rlp::DecodeError::Custom(
                     &quot;typed receipt cannot be decoded from an empty slice&quot;,
                 ))?;
<span class="term-fg31">-                if receipt_type == 0x01 {</span>
<span class="term-fg31">-                    buf.advance(1);</span>
<span class="term-fg31">-                    Self::decode_receipt(buf, TxType::EIP2930)</span>
<span class="term-fg31">-                } else if receipt_type == 0x02 {</span>
<span class="term-fg31">-                    buf.advance(1);</span>
<span class="term-fg31">-                    Self::decode_receipt(buf, TxType::EIP1559)</span>
<span class="term-fg31">-                } else {</span>
<span class="term-fg31">-                    Err(reth_rlp::DecodeError::Custom(&quot;invalid receipt type&quot;))</span>
<span class="term-fg32">+                match receipt_type {</span>
<span class="term-fg32">+                    0x01 =&gt; {</span>
<span class="term-fg32">+                        buf.advance(1);</span>
<span class="term-fg32">+                        Self::decode_receipt(buf, TxType::EIP2930)</span>
<span class="term-fg32">+                    }</span>
<span class="term-fg32">+                    0x02 =&gt; {</span>
<span class="term-fg32">+                        buf.advance(1);</span>
<span class="term-fg32">+                        Self::decode_receipt(buf, TxType::EIP1559)</span>
<span class="term-fg32">+                    }</span>
<span class="term-fg32">+                    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                    0x7E =&gt; {</span>
<span class="term-fg32">+                        buf.advance(1);</span>
<span class="term-fg32">+                        Self::decode_receipt(buf, TxType::DEPOSIT)</span>
<span class="term-fg32">+                    }</span>
<span class="term-fg32">+                    _ =&gt; Err(reth_rlp::DecodeError::Custom(&quot;invalid receipt type&quot;)),</span>
                 }
             }
             Ordering::Equal =&gt; {
<span class="term-fg36">@@ -313,6 +345,8 @@</span>                     ],
                     data: Bytes::from_str(&quot;0100ff&quot;).unwrap().0.into(),
                 }],
                 success: false,
<span class="term-fg32">+                #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                deposit_nonce: None,</span>
             },
             bloom: [0; 256].into(),
         };
<span class="term-fg36">@@ -349,6 +383,8 @@</span>                     ],
                     data: Bytes::from_str(&quot;0100ff&quot;).unwrap().0.into(),
                 }],
                 success: false,
<span class="term-fg32">+                #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                deposit_nonce: None,</span>
             },
             bloom: [0; 256].into(),
         };
<span class="term-fg36">@@ -383,6 +419,8 @@</span>                     .unwrap()],
                     data: crate::Bytes::from(vec![1; 0xffffff]),
                 },
             ],
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            deposit_nonce: None,</span>
         };
&nbsp;
         let mut data = vec![];</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d79370006876f53c0c6fef22" role="button"
                   aria-expanded="false" aria-controls="id-d79370006876f53c0c6fef22">
                    <code>crates/primitives/src/transaction/mod.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/transaction/mod.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/transaction/mod.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+191</span></div>
                        <div class="text-start"><span class="text-danger">-9</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d79370006876f53c0c6fef22"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;mod.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;mod.rs</span>
<span class="term-fg1">index c0371aa2a849654c676b857b1aa7e2ca4ccb467f..f79badcf3500858c253a97d4339e0e9852804c10 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;mod.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;mod.rs</span>
<span class="term-fg36">@@ -24,6 +24,11 @@</span> mod signature;
 mod tx_type;
 pub(crate) mod util;
&nbsp;
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+mod optimism;</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub use optimism::{TxDeposit, DEPOSIT_TX_TYPE, DEPOSIT_VERSION};</span>
<span class="term-fg32">+</span>
 &#47;&#47;&#47; Legacy transaction.
 #[main_codec]
 #[derive(Debug, Clone, PartialEq, Eq, Hash, Default)]
<span class="term-fg36">@@ -227,6 +232,9 @@</span>     &#47;&#47;&#47; Transaction with an [`AccessList`] ([EIP-2930](https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-2930)).
     Eip2930(TxEip2930),
     &#47;&#47;&#47; A transaction with a priority fee ([EIP-1559](https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-1559)).
     Eip1559(TxEip1559),
<span class="term-fg32">+    &#47;&#47;&#47; Optimism deposit transaction.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    Deposit(TxDeposit),</span>
 }
&nbsp;
 impl Transaction {
<span class="term-fg36">@@ -253,6 +261,23 @@</span>                 let header = Header { list: true, payload_length };
                 header.encode(out);
                 self.encode_fields(out);
                 signature.encode_with_eip155_chain_id(out, *chain_id);
<span class="term-fg32">+            }</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; {</span>
<span class="term-fg32">+                let payload_length = self.fields_len() + signature.payload_len();</span>
<span class="term-fg32">+                if with_header {</span>
<span class="term-fg32">+                    Header {</span>
<span class="term-fg32">+                        list: false,</span>
<span class="term-fg32">+                        payload_length: 1 + length_of_length(payload_length) + payload_length,</span>
<span class="term-fg32">+                    }</span>
<span class="term-fg32">+                    .encode(out);</span>
<span class="term-fg32">+                }</span>
<span class="term-fg32">+                out.put_u8(self.tx_type() as u8);</span>
<span class="term-fg32">+                out.put_u8(DEPOSIT_VERSION);</span>
<span class="term-fg32">+                let header = Header { list: true, payload_length };</span>
<span class="term-fg32">+                header.encode(out);</span>
<span class="term-fg32">+                self.encode_fields(out);</span>
<span class="term-fg32">+                signature.encode(out);</span>
             }
             _ =&gt; {
                 let payload_length = self.fields_len() + signature.payload_len();
<span class="term-fg36">@@ -278,6 +303,8 @@</span>         match self {
             Transaction::Legacy(tx) =&gt; tx.nonce = nonce,
             Transaction::Eip2930(tx) =&gt; tx.nonce = nonce,
             Transaction::Eip1559(tx) =&gt; tx.nonce = nonce,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_tx) =&gt; { &#47;* noop *&#47; }</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -287,6 +314,8 @@</span>         match self {
             Transaction::Legacy(tx) =&gt; tx.value = value,
             Transaction::Eip2930(tx) =&gt; tx.value = value,
             Transaction::Eip1559(tx) =&gt; tx.value = value,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(tx) =&gt; tx.value = value,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -296,6 +325,8 @@</span>         match self {
             Transaction::Legacy(tx) =&gt; tx.input = input,
             Transaction::Eip2930(tx) =&gt; tx.input = input,
             Transaction::Eip1559(tx) =&gt; tx.input = input,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(tx) =&gt; tx.input = input,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -306,6 +337,8 @@</span>         match self {
             Transaction::Legacy(tx) =&gt; tx.size(),
             Transaction::Eip2930(tx) =&gt; tx.size(),
             Transaction::Eip1559(tx) =&gt; tx.size(),
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(tx) =&gt; tx.size(),</span>
         }
     }
 }
<span class="term-fg36">@@ -327,6 +360,11 @@</span>             }
             Transaction::Eip1559(tx) =&gt; {
                 tx.to_compact(buf);
                 2
<span class="term-fg32">+            }</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(tx) =&gt; {</span>
<span class="term-fg32">+                tx.to_compact(buf);</span>
<span class="term-fg32">+                126</span>
             }
         }
     }
<span class="term-fg36">@@ -345,6 +383,11 @@</span>             2 =&gt; {
                 let (tx, buf) = TxEip1559::from_compact(buf, buf.len());
                 (Transaction::Eip1559(tx), buf)
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            126 =&gt; {</span>
<span class="term-fg32">+                let (tx, buf) = TxDeposit::from_compact(buf, buf.len());</span>
<span class="term-fg32">+                (Transaction::Deposit(tx), buf)</span>
<span class="term-fg32">+            }</span>
             _ =&gt; unreachable!(&quot;Junk data in database: unknown Transaction variant&quot;),
         }
     }
<span class="term-fg36">@@ -367,6 +410,8 @@</span>         match self {
             Transaction::Legacy(TxLegacy { chain_id, .. }) =&gt; *chain_id,
             Transaction::Eip2930(TxEip2930 { chain_id, .. }) =&gt; Some(*chain_id),
             Transaction::Eip1559(TxEip1559 { chain_id, .. }) =&gt; Some(*chain_id),
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; None,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -376,6 +421,8 @@</span>         match self {
             Transaction::Legacy(TxLegacy { chain_id: ref mut c, .. }) =&gt; *c = Some(chain_id),
             Transaction::Eip2930(TxEip2930 { chain_id: ref mut c, .. }) =&gt; *c = chain_id,
             Transaction::Eip1559(TxEip1559 { chain_id: ref mut c, .. }) =&gt; *c = chain_id,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; (),</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -386,6 +433,8 @@</span>         match self {
             Transaction::Legacy(TxLegacy { to, .. }) |
             Transaction::Eip2930(TxEip2930 { to, .. }) |
             Transaction::Eip1559(TxEip1559 { to, .. }) =&gt; to,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit { to, .. }) =&gt; to,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -400,6 +449,8 @@</span>         match self {
             Transaction::Legacy { .. } =&gt; TxType::Legacy,
             Transaction::Eip2930 { .. } =&gt; TxType::EIP2930,
             Transaction::Eip1559 { .. } =&gt; TxType::EIP1559,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; TxType::DEPOSIT,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -409,6 +460,8 @@</span>         *match self {
             Transaction::Legacy(TxLegacy { value, .. }) =&gt; value,
             Transaction::Eip2930(TxEip2930 { value, .. }) =&gt; value,
             Transaction::Eip1559(TxEip1559 { value, .. }) =&gt; value,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit { value, .. }) =&gt; value,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -418,6 +471,9 @@</span>         match self {
             Transaction::Legacy(TxLegacy { nonce, .. }) =&gt; *nonce,
             Transaction::Eip2930(TxEip2930 { nonce, .. }) =&gt; *nonce,
             Transaction::Eip1559(TxEip1559 { nonce, .. }) =&gt; *nonce,
<span class="term-fg32">+            &#47;&#47; Deposit transactions don&#39;t have a nonce, so they default to zero.</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; 0,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -427,6 +483,8 @@</span>         match self {
             Transaction::Legacy(TxLegacy { gas_limit, .. }) |
             Transaction::Eip2930(TxEip2930 { gas_limit, .. }) |
             Transaction::Eip1559(TxEip1559 { gas_limit, .. }) =&gt; *gas_limit,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit { gas_limit, .. }) =&gt; *gas_limit,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -438,6 +496,10 @@</span>         match self {
             Transaction::Legacy(TxLegacy { gas_price, .. }) |
             Transaction::Eip2930(TxEip2930 { gas_price, .. }) =&gt; *gas_price,
             Transaction::Eip1559(TxEip1559 { max_fee_per_gas, .. }) =&gt; *max_fee_per_gas,
<span class="term-fg32">+            &#47;&#47; Deposit transactions buy their L2 gas on L1 and, as such, the L2 gas is not</span>
<span class="term-fg32">+            &#47;&#47; refundable.</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; 0,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -452,6 +514,8 @@</span>             Transaction::Eip2930(_) =&gt; None,
             Transaction::Eip1559(TxEip1559 { max_priority_fee_per_gas, .. }) =&gt; {
                 Some(*max_priority_fee_per_gas)
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; None,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -469,6 +533,8 @@</span>             Transaction::Eip2930(TxEip2930 { gas_price, .. }) =&gt; *gas_price,
             Transaction::Eip1559(TxEip1559 { max_priority_fee_per_gas, .. }) =&gt; {
                 *max_priority_fee_per_gas
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; 0,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -480,6 +546,8 @@</span>         match self {
             Transaction::Legacy(tx) =&gt; tx.gas_price,
             Transaction::Eip2930(tx) =&gt; tx.gas_price,
             Transaction::Eip1559(dynamic_tx) =&gt; dynamic_tx.effective_gas_price(base_fee),
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; 0,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -535,9 +603,47 @@</span>         match self {
             Transaction::Legacy(TxLegacy { input, .. }) =&gt; input,
             Transaction::Eip2930(TxEip2930 { input, .. }) =&gt; input,
             Transaction::Eip1559(TxEip1559 { input, .. }) =&gt; input,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit { input, .. }) =&gt; input,</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Returns the source hash of the transaction, which uniquely identifies its source.</span>
<span class="term-fg32">+    &#47;&#47;&#47; If the transaction is not a deposit transaction, this will always return `H256::zero()`.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub fn source_hash(&amp;self) -&gt; H256 {</span>
<span class="term-fg32">+        match self {</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit { source_hash, .. }) =&gt; *source_hash,</span>
<span class="term-fg32">+            _ =&gt; H256::zero(),</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Returns the amount of ETH locked up on L1 that will be minted on L2. If the transaction</span>
<span class="term-fg32">+    &#47;&#47;&#47; is not a deposit transaction, this will always return `None`.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub fn mint(&amp;self) -&gt; Option&lt;u128&gt; {</span>
<span class="term-fg32">+        match self {</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit { mint, .. }) =&gt; *mint,</span>
<span class="term-fg32">+            _ =&gt; None,</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Returns whether or not the transaction is a system transaction. If the transaction</span>
<span class="term-fg32">+    &#47;&#47;&#47; is not a deposit transaction, this will always return `false`.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub fn is_system_transaction(&amp;self) -&gt; bool {</span>
<span class="term-fg32">+        match self {</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit { is_system_transaction, .. }) =&gt; *is_system_transaction,</span>
<span class="term-fg32">+            _ =&gt; false,</span>
         }
     }
&nbsp;
<span class="term-fg32">+    &#47;&#47;&#47; Returns whether or not the transaction is an Optimism Deposited transaction.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    pub fn is_deposit(&amp;self) -&gt; bool {</span>
<span class="term-fg32">+        matches!(self, Transaction::Deposit(_))</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
     &#47;&#47;&#47; Encodes EIP-155 arguments into the desired buffer. Only encodes values for legacy
     &#47;&#47;&#47; transactions.
     pub(crate) fn encode_eip155_fields(&amp;self, out: &amp;mut dyn bytes::BufMut) {
<span class="term-fg36">@@ -631,6 +737,8 @@</span>                 len += input.0.length();
                 len += access_list.length();
                 len
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(deposit) =&gt; deposit.fields_len(),</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -693,6 +801,8 @@</span>                 value.encode(out);
                 input.0.encode(out);
                 access_list.encode(out);
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(deposit) =&gt; deposit.encode_fields(out),</span>
         }
     }
 }
<span class="term-fg36">@@ -714,6 +824,13 @@</span>                     .encode(out);
                 self.encode_fields(out);
                 self.encode_eip155_fields(out);
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; {</span>
<span class="term-fg32">+                out.put_u8(self.tx_type() as u8);</span>
<span class="term-fg32">+                out.put_u8(DEPOSIT_VERSION);</span>
<span class="term-fg32">+                Header { list: true, payload_length: self.fields_len() }.encode(out);</span>
<span class="term-fg32">+                self.encode_fields(out);</span>
<span class="term-fg32">+            }</span>
             _ =&gt; {
                 out.put_u8(self.tx_type() as u8);
                 Header { list: true, payload_length: self.fields_len() }.encode(out);
<span class="term-fg36">@@ -728,6 +845,12 @@</span>             Transaction::Legacy { .. } =&gt; {
                 let payload_length = self.fields_len() + self.eip155_fields_len();
                 &#47;&#47; &#39;header length&#39; + &#39;payload length&#39;
                 length_of_length(payload_length) + payload_length
<span class="term-fg32">+            }</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit { .. } =&gt; {</span>
<span class="term-fg32">+                let payload_length = self.fields_len();</span>
<span class="term-fg32">+                &#47;&#47; &#39;tx type byte length&#39; + &#39;version byte&#39; + &#39;header length&#39; + &#39;payload length&#39;</span>
<span class="term-fg32">+                1 + 1 + length_of_length(payload_length) + payload_length</span>
             }
             _ =&gt; {
                 let payload_length = self.fields_len();
<span class="term-fg36">@@ -890,20 +1013,29 @@</span>         &#47;&#47; Placeholder for bitflags.
         &#47;&#47; The first byte uses 4 bits as flags: IsCompressed[1bit], TxType[2bits], Signature[1bit]
         buf.put_u8(0);
&nbsp;
<span class="term-fg31">-        let sig_bit = self.signature.to_compact(buf) as u8;</span>
         let zstd_bit = self.transaction.input().len() &gt;= 32;
&nbsp;
<span class="term-fg31">-        let tx_bits = if zstd_bit {</span>
<span class="term-fg32">+        let mut tmp = bytes::BytesMut::with_capacity(200);</span>
<span class="term-fg32">+        let mut tx_bits = self.transaction.to_compact(&amp;mut tmp) as u8;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        if tx_bits &gt; 2 {</span>
<span class="term-fg32">+            &#47;&#47; If the transaction type exceeds the initially allocated 2 bits, we need to</span>
<span class="term-fg32">+            &#47;&#47; write a sentinel 3 to denote that the actual value is held in the next byte</span>
<span class="term-fg32">+            &#47;&#47; of the buffer.</span>
<span class="term-fg32">+            buf.put_u8(tx_bits);</span>
<span class="term-fg32">+            tx_bits = 3</span>
<span class="term-fg32">+        };</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        let sig_bit = self.signature.to_compact(buf) as u8;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        if zstd_bit {</span>
             TRANSACTION_COMPRESSOR.with(|compressor| {
                 let mut compressor = compressor.borrow_mut();
<span class="term-fg31">-                let mut tmp = bytes::BytesMut::with_capacity(200);</span>
<span class="term-fg31">-                let tx_bits = self.transaction.to_compact(&amp;mut tmp);</span>
&nbsp;
                 buf.put_slice(&amp;compressor.compress(&amp;tmp).expect(&quot;Failed to compress&quot;));
<span class="term-fg31">-                tx_bits as u8</span>
             })
         } else {
<span class="term-fg31">-            self.transaction.to_compact(buf) as u8</span>
<span class="term-fg32">+            buf.put_slice(&amp;tmp);</span>
         };
&nbsp;
         &#47;&#47; Replace bitflags with the actual values
<span class="term-fg36">@@ -917,9 +1049,18 @@</span>         &#47;&#47; The first byte uses 4 bits as flags: IsCompressed[1], TxType[2], Signature[1]
         let bitflags = buf.get_u8() as usize;
&nbsp;
         let sig_bit = bitflags &amp; 1;
<span class="term-fg32">+        let zstd_bit = bitflags &gt;&gt; 3;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        let transaction_type_bits = (bitflags &amp; 0b110) &gt;&gt; 1;</span>
<span class="term-fg32">+        let transaction_type = if transaction_type_bits == 3 {</span>
<span class="term-fg32">+            &#47;&#47; A bitmask of 3 means that the actual value is held in the next byte of the buffer.</span>
<span class="term-fg32">+            buf.get_u8() as usize</span>
<span class="term-fg32">+        } else {</span>
<span class="term-fg32">+            transaction_type_bits</span>
<span class="term-fg32">+        };</span>
<span class="term-fg32">+</span>
         let (signature, buf) = Signature::from_compact(buf, sig_bit);
&nbsp;
<span class="term-fg31">-        let zstd_bit = bitflags &gt;&gt; 3;</span>
         let (transaction, buf) = if zstd_bit != 0 {
             TRANSACTION_DECOMPRESSOR.with(|decompressor| {
                 let mut decompressor = decompressor.borrow_mut();
<span class="term-fg36">@@ -939,13 +1080,11 @@</span>                 }
&nbsp;
                 &#47;&#47; TODO: enforce that zstd is only present at a &quot;top&quot; level type
&nbsp;
<span class="term-fg31">-                let transaction_type = (bitflags &amp; 0b110) &gt;&gt; 1;</span>
                 let (transaction, _) = Transaction::from_compact(tmp.as_slice(), transaction_type);
&nbsp;
                 (transaction, buf)
             })
         } else {
<span class="term-fg31">-            let transaction_type = bitflags &gt;&gt; 1;</span>
             Transaction::from_compact(buf, transaction_type)
         };
&nbsp;
<span class="term-fg36">@@ -1007,6 +1146,10 @@</span>     &#47;&#47;&#47; Recover signer from signature and hash.
     &#47;&#47;&#47;
     &#47;&#47;&#47; Returns `None` if the transaction&#39;s signature is invalid, see also [Self::recover_signer].
     pub fn recover_signer(&amp;self) -&gt; Option&lt;Address&gt; {
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        if let Transaction::Deposit(TxDeposit { from, .. }) = self.transaction {</span>
<span class="term-fg32">+            return Some(from)</span>
<span class="term-fg32">+        }</span>
         let signature_hash = self.signature_hash();
         self.signature.recover_signer(signature_hash)
     }
<span class="term-fg36">@@ -1071,6 +1214,13 @@</span>                     self.signature.payload_len_with_eip155_chain_id(chain_id);
                 &#47;&#47; &#39;header length&#39; + &#39;payload length&#39;
                 length_of_length(payload_length) + payload_length
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; {</span>
<span class="term-fg32">+                let payload_length = self.transaction.fields_len() + self.signature.payload_len();</span>
<span class="term-fg32">+                &#47;&#47; &#39;tx type byte length&#39; + &#39;version byte&#39; + &#39;header length&#39; + &#39;payload length&#39;</span>
<span class="term-fg32">+                let len = 1 + 1 + length_of_length(payload_length) + payload_length;</span>
<span class="term-fg32">+                length_of_length(len) + len</span>
<span class="term-fg32">+            }</span>
             _ =&gt; {
                 let payload_length = self.transaction.fields_len() + self.signature.payload_len();
                 &#47;&#47; &#39;transaction type byte length&#39; + &#39;header length&#39; + &#39;payload length&#39;
<span class="term-fg36">@@ -1142,6 +1292,18 @@</span>         let original_encoding = *data;
&nbsp;
         let tx_type = *data.first().ok_or(DecodeError::InputTooShort)?;
         data.advance(1);
<span class="term-fg32">+</span>
<span class="term-fg32">+        &#47;&#47; If the transaction is a deposit, we need to first ensure that the version</span>
<span class="term-fg32">+        &#47;&#47; byte is correct.</span>
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        if tx_type == DEPOSIT_TX_TYPE {</span>
<span class="term-fg32">+            let version = *data.first().ok_or(DecodeError::InputTooShort)?;</span>
<span class="term-fg32">+            if version != DEPOSIT_VERSION {</span>
<span class="term-fg32">+                return Err(DecodeError::Custom(&quot;Deposit version mismatch&quot;))</span>
<span class="term-fg32">+            }</span>
<span class="term-fg32">+            data.advance(1);</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+</span>
         &#47;&#47; decode the list header for the rest of the transaction
         let header = Header::decode(data)?;
         if !header.list {
<span class="term-fg36">@@ -1150,6 +1312,10 @@</span>         }
&nbsp;
         &#47;&#47; length of tx encoding = tx type byte (size = 1) + length of header + payload length
         let tx_length = 1 + header.length() + header.payload_length;
<span class="term-fg32">+        &#47;&#47; If the transaction is a deposit, we need to add one to the length to account for the</span>
<span class="term-fg32">+        &#47;&#47; version byte.</span>
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        let tx_length = if tx_type == DEPOSIT_TX_TYPE { tx_length + 1 } else { tx_length };</span>
&nbsp;
         &#47;&#47; decode common fields
         let transaction = match tx_type {
<span class="term-fg36">@@ -1173,6 +1339,22 @@</span>                 to: Decodable::decode(data)?,
                 value: Decodable::decode(data)?,
                 input: Bytes(Decodable::decode(data)?),
                 access_list: Decodable::decode(data)?,
<span class="term-fg32">+            }),</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            DEPOSIT_TX_TYPE =&gt; Transaction::Deposit(TxDeposit {</span>
<span class="term-fg32">+                source_hash: Decodable::decode(data)?,</span>
<span class="term-fg32">+                from: Decodable::decode(data)?,</span>
<span class="term-fg32">+                to: Decodable::decode(data)?,</span>
<span class="term-fg32">+                mint: if *data.first().ok_or(DecodeError::InputTooShort)? == EMPTY_STRING_CODE {</span>
<span class="term-fg32">+                    data.advance(1);</span>
<span class="term-fg32">+                    None</span>
<span class="term-fg32">+                } else {</span>
<span class="term-fg32">+                    Some(Decodable::decode(data)?)</span>
<span class="term-fg32">+                },</span>
<span class="term-fg32">+                value: Decodable::decode(data)?,</span>
<span class="term-fg32">+                input: Decodable::decode(data)?,</span>
<span class="term-fg32">+                gas_limit: Decodable::decode(data)?,</span>
<span class="term-fg32">+                is_system_transaction: Decodable::decode(data)?,</span>
             }),
             _ =&gt; return Err(DecodeError::Custom(&quot;unsupported typed transaction type&quot;)),
         };</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6db234346642ab2bf9058c3b" role="button"
                   aria-expanded="false" aria-controls="id-6db234346642ab2bf9058c3b">
                    <code>crates/primitives/src/transaction/optimism.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/transaction/optimism.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+84</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6db234346642ab2bf9058c3b"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;optimism.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;optimism.rs</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..546a6300b6b8e8eedf3e293f0b25731ff2b83051</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;optimism.rs</span>
<span class="term-fg36">@@ -0,0 +1,84 @@</span>
<span class="term-fg32">+use crate::{Address, Bytes, TransactionKind, H256};</span>
<span class="term-fg32">+use reth_codecs::{main_codec, Compact};</span>
<span class="term-fg32">+use reth_rlp::{Encodable, EMPTY_STRING_CODE};</span>
<span class="term-fg32">+use std::mem;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; EIP-2718 transaction type selector.</span>
<span class="term-fg32">+pub const DEPOSIT_TX_TYPE: u8 = 126;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; A versioned byte sequence to enable the protocol to upgrade the deposit transaction type without</span>
<span class="term-fg32">+&#47;&#47;&#47; changing the transaction type selector.</span>
<span class="term-fg32">+pub const DEPOSIT_VERSION: u8 = 0;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Deposited transactions, also known as deposits are transactions which are initiated on L1, and</span>
<span class="term-fg32">+&#47;&#47;&#47; executed on L2. This document outlines a new transaction type for deposits. It also describes</span>
<span class="term-fg32">+&#47;&#47;&#47; how deposits are initiated on L1, along with the authorization and validation conditions on L2.</span>
<span class="term-fg32">+#[main_codec]</span>
<span class="term-fg32">+#[derive(Debug, Clone, PartialEq, Eq, Hash, Default)]</span>
<span class="term-fg32">+pub struct TxDeposit {</span>
<span class="term-fg32">+    &#47;&#47;&#47; Hash that uniquely identifies the source of the deposit.</span>
<span class="term-fg32">+    pub source_hash: H256,</span>
<span class="term-fg32">+    &#47;&#47;&#47; The address of the sender account.</span>
<span class="term-fg32">+    pub from: Address,</span>
<span class="term-fg32">+    &#47;&#47;&#47; The address of the recipient account, or the null (zero-length) address if the deposited</span>
<span class="term-fg32">+    &#47;&#47;&#47; transaction is a contract creation.</span>
<span class="term-fg32">+    pub to: TransactionKind,</span>
<span class="term-fg32">+    &#47;&#47;&#47; The ETH value to mint on L2.</span>
<span class="term-fg32">+    pub mint: Option&lt;u128&gt;,</span>
<span class="term-fg32">+    &#47;&#47;&#47;  The ETH value to send to the recipient account.</span>
<span class="term-fg32">+    pub value: u128,</span>
<span class="term-fg32">+    &#47;&#47;&#47; The gas limit for the L2 transaction.</span>
<span class="term-fg32">+    pub gas_limit: u64,</span>
<span class="term-fg32">+    &#47;&#47;&#47; Field indicating if this transaction is exempt from the L2 gas limit.</span>
<span class="term-fg32">+    pub is_system_transaction: bool,</span>
<span class="term-fg32">+    &#47;&#47;&#47; Input has two uses depending if transaction is Create or Call (if `to` field is None or</span>
<span class="term-fg32">+    &#47;&#47;&#47; Some).</span>
<span class="term-fg32">+    pub input: Bytes,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+impl TxDeposit {</span>
<span class="term-fg32">+    &#47;&#47;&#47; Calculates a heuristic for the in-memory size of the [TxDeposit] transaction.</span>
<span class="term-fg32">+    #[inline]</span>
<span class="term-fg32">+    pub fn size(&amp;self) -&gt; usize {</span>
<span class="term-fg32">+        mem::size_of::&lt;H256&gt;() + &#47;&#47; source_hash</span>
<span class="term-fg32">+        mem::size_of::&lt;Address&gt;() + &#47;&#47; from</span>
<span class="term-fg32">+        self.to.size() + &#47;&#47; to</span>
<span class="term-fg32">+        mem::size_of::&lt;Option&lt;u128&gt;&gt;() + &#47;&#47; mint</span>
<span class="term-fg32">+        mem::size_of::&lt;u128&gt;() + &#47;&#47; value</span>
<span class="term-fg32">+        mem::size_of::&lt;u64&gt;() + &#47;&#47; gas_limit</span>
<span class="term-fg32">+        mem::size_of::&lt;bool&gt;() + &#47;&#47; is_system_transaction</span>
<span class="term-fg32">+        self.input.len() &#47;&#47; input</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Outputs the length of the transaction&#39;s fields, without a RLP header or length of the</span>
<span class="term-fg32">+    &#47;&#47;&#47; eip155 fields.</span>
<span class="term-fg32">+    pub(crate) fn fields_len(&amp;self) -&gt; usize {</span>
<span class="term-fg32">+        let mut len = 0;</span>
<span class="term-fg32">+        len += self.source_hash.length();</span>
<span class="term-fg32">+        len += self.from.length();</span>
<span class="term-fg32">+        len += self.to.length();</span>
<span class="term-fg32">+        len += self.mint.map_or(1, |mint| mint.length());</span>
<span class="term-fg32">+        len += self.value.length();</span>
<span class="term-fg32">+        len += self.input.0.length();</span>
<span class="term-fg32">+        len += self.gas_limit.length();</span>
<span class="term-fg32">+        len += self.is_system_transaction.length();</span>
<span class="term-fg32">+        len</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Encodes only the transaction&#39;s fields into the desired buffer, without a RLP header.</span>
<span class="term-fg32">+    &#47;&#47;&#47; &lt;https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;blob&#47;develop&#47;specs&#47;deposits.md#the-deposited-transaction-type&gt;</span>
<span class="term-fg32">+    pub(crate) fn encode_fields(&amp;self, out: &amp;mut dyn bytes::BufMut) {</span>
<span class="term-fg32">+        self.source_hash.encode(out);</span>
<span class="term-fg32">+        self.from.encode(out);</span>
<span class="term-fg32">+        self.to.encode(out);</span>
<span class="term-fg32">+        if let Some(mint) = self.mint {</span>
<span class="term-fg32">+            mint.encode(out);</span>
<span class="term-fg32">+        } else {</span>
<span class="term-fg32">+            out.put_u8(EMPTY_STRING_CODE);</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+        self.value.encode(out);</span>
<span class="term-fg32">+        self.input.encode(out);</span>
<span class="term-fg32">+        self.gas_limit.encode(out);</span>
<span class="term-fg32">+        self.is_system_transaction.encode(out);</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-19c0a46ffe153a3ad8d0cfc0" role="button"
                   aria-expanded="false" aria-controls="id-19c0a46ffe153a3ad8d0cfc0">
                    <code>crates/primitives/src/transaction/signature.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/transaction/signature.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/transaction/signature.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-19c0a46ffe153a3ad8d0cfc0"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;signature.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;signature.rs</span>
<span class="term-fg1">index 6977d8c261824cb200dbfa62778f274eeca4edfe..eff0c56b3921fb6865ecd0c5e46e09b7bd401c43 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;signature.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;signature.rs</span>
<span class="term-fg36">@@ -61,6 +61,11 @@</span>
     &#47;&#47;&#47; Output the `v` of the signature depends on chain_id
     #[inline]
     pub fn v(&amp;self, chain_id: Option&lt;u64&gt;) -&gt; u64 {
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        if self.r == U256::ZERO &amp;&amp; self.s == U256::ZERO {</span>
<span class="term-fg32">+            return 0</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+</span>
         if let Some(chain_id) = chain_id {
             &#47;&#47; EIP-155: v = {0, 1} + CHAIN_ID * 2 + 35
             self.odd_y_parity as u64 + chain_id * 2 + 35</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6aaba8ed715a8b345ca2a20a" role="button"
                   aria-expanded="false" aria-controls="id-6aaba8ed715a8b345ca2a20a">
                    <code>crates/primitives/src/transaction/tx_type.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/primitives/src/transaction/tx_type.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/primitives/src/transaction/tx_type.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+16</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6aaba8ed715a8b345ca2a20a"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;tx_type.rs anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;tx_type.rs</span>
<span class="term-fg1">index 428e06f4534780381100e10dd20e96b43509a765..3fcca61a7742409c74c8781a292afc44679cf1cf 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;tx_type.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;primitives&#47;src&#47;transaction&#47;tx_type.rs</span>
<span class="term-fg36">@@ -12,6 +12,10 @@</span>
 &#47;&#47;&#47; Identifier for [TxEip1559](crate::TxEip1559) transaction.
 pub const EIP1559_TX_TYPE_ID: u8 = 2;
&nbsp;
<span class="term-fg32">+&#47;&#47;&#47; Identifier for [TxDeposit](crate::TxDeposit) transaction.</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+use crate::DEPOSIT_TX_TYPE;</span>
<span class="term-fg32">+</span>
 &#47;&#47;&#47; Transaction Type
 #[derive_arbitrary(compact)]
 #[derive(Clone, Copy, Debug, PartialEq, Eq, PartialOrd, Ord, Default, Serialize, Deserialize)]
<span class="term-fg36">@@ -23,6 +27,9 @@</span>     &#47;&#47;&#47; AccessList transaction
     EIP2930 = 1_isize,
     &#47;&#47;&#47; Transaction with Priority fee
     EIP1559 = 2_isize,
<span class="term-fg32">+    &#47;&#47;&#47; OP Deposit transaction.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    DEPOSIT = DEPOSIT_TX_TYPE as isize,</span>
 }
&nbsp;
 impl From&lt;TxType&gt; for u8 {
<span class="term-fg36">@@ -31,6 +38,8 @@</span>         match value {
             TxType::Legacy =&gt; LEGACY_TX_TYPE_ID,
             TxType::EIP2930 =&gt; EIP2930_TX_TYPE_ID,
             TxType::EIP1559 =&gt; EIP1559_TX_TYPE_ID,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            TxType::DEPOSIT =&gt; DEPOSIT_TX_TYPE,</span>
         }
     }
 }
<span class="term-fg36">@@ -47,9 +56,11 @@</span>     where
         B: bytes::BufMut + AsMut&lt;[u8]&gt;,
     {
         match self {
<span class="term-fg31">-            TxType::Legacy =&gt; 0,</span>
<span class="term-fg31">-            TxType::EIP2930 =&gt; 1,</span>
<span class="term-fg31">-            TxType::EIP1559 =&gt; 2,</span>
<span class="term-fg32">+            TxType::Legacy =&gt; LEGACY_TX_TYPE_ID as usize,</span>
<span class="term-fg32">+            TxType::EIP2930 =&gt; EIP2930_TX_TYPE_ID as usize,</span>
<span class="term-fg32">+            TxType::EIP1559 =&gt; EIP1559_TX_TYPE_ID as usize,</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            TxType::DEPOSIT =&gt; DEPOSIT_TX_TYPE as usize,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -58,6 +69,8 @@</span>         (
             match identifier {
                 0 =&gt; TxType::Legacy,
                 1 =&gt; TxType::EIP2930,
<span class="term-fg32">+                #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                126 =&gt; TxType::DEPOSIT,</span>
                 _ =&gt; TxType::EIP1559,
             },
             buf,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f37a4176915c52f3c5425c56" role="button"
                   aria-expanded="false" aria-controls="id-f37a4176915c52f3c5425c56">
                    <code>crates/revm/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/revm/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/revm/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f37a4176915c52f3c5425c56"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;revm&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;revm&#47;Cargo.toml</span>
<span class="term-fg1">index e80ab708c0f3635638deb2e5e6fd14e986dd719c..31622ab3a1fbb1c1dce24d76b412cfb3b9d7e3e1 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;revm&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;revm&#47;Cargo.toml</span>
<span class="term-fg36">@@ -26,3 +26,6 @@</span>
 [dev-dependencies]
 reth-rlp = { workspace = true }
 once_cell = &quot;1.17.0&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [&quot;reth-primitives&#47;optimism&quot;, &quot;reth-revm-primitives&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e9fdbf9e1bea7f4757c3974b" role="button"
                   aria-expanded="false" aria-controls="id-e9fdbf9e1bea7f4757c3974b">
                    <code>crates/revm/revm-primitives/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/revm/revm-primitives/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/revm/revm-primitives/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e9fdbf9e1bea7f4757c3974b"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;revm&#47;revm-primitives&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;revm&#47;revm-primitives&#47;Cargo.toml</span>
<span class="term-fg1">index 96efb46ff864c51f860e843a992a48e82ca1ec0a..85c66da26fd4be8bd48ed3e036fc275d90d0909f 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;revm&#47;revm-primitives&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;revm&#47;revm-primitives&#47;Cargo.toml</span>
<span class="term-fg36">@@ -9,7 +9,10 @@</span> repository.workspace = true
 description = &quot;core reth specific revm utilities&quot;
&nbsp;
 [dependencies]
<span class="term-fg31">-# reth </span>
<span class="term-fg32">+# reth</span>
 reth-primitives = { workspace = true }
&nbsp;
 revm = { workspace = true }
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [&quot;reth-primitives&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2f76c2b25897763d3293d94f" role="button"
                   aria-expanded="false" aria-controls="id-2f76c2b25897763d3293d94f">
                    <code>crates/revm/revm-primitives/src/env.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/revm/revm-primitives/src/env.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/revm/revm-primitives/src/env.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+17</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2f76c2b25897763d3293d94f"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;revm&#47;revm-primitives&#47;src&#47;env.rs anton-rs&#47;op-reth&#47;crates&#47;revm&#47;revm-primitives&#47;src&#47;env.rs</span>
<span class="term-fg1">index 4a3ee3239282d9f12f402eb1e508de293d17a448..b1d15f2529e413ca432a01d2125941470cbb9e86 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;revm&#47;revm-primitives&#47;src&#47;env.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;revm&#47;revm-primitives&#47;src&#47;env.rs</span>
<span class="term-fg36">@@ -5,6 +5,9 @@</span>     TransactionSignedEcRecovered, TxEip1559, TxEip2930, TxLegacy, U256,
 };
 use revm::primitives::{AnalysisKind, BlockEnv, CfgEnv, SpecId, TransactTo, TxEnv};
&nbsp;
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+use reth_primitives::TxDeposit;</span>
<span class="term-fg32">+</span>
 &#47;&#47;&#47; Convenience function to call both [fill_cfg_env] and [fill_block_env]
 pub fn fill_cfg_and_block_env(
     cfg: &amp;mut CfgEnv,
<span class="term-fg36">@@ -211,6 +214,20 @@</span>                             .collect(),
                     )
                 })
                 .collect();
<span class="term-fg32">+        }</span>
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        Transaction::Deposit(TxDeposit { to, value, gas_limit, input, .. }) =&gt; {</span>
<span class="term-fg32">+            tx_env.gas_limit = *gas_limit;</span>
<span class="term-fg32">+            tx_env.gas_price = U256::ZERO;</span>
<span class="term-fg32">+            tx_env.gas_priority_fee = None;</span>
<span class="term-fg32">+            match to {</span>
<span class="term-fg32">+                TransactionKind::Call(to) =&gt; tx_env.transact_to = TransactTo::Call(*to),</span>
<span class="term-fg32">+                TransactionKind::Create =&gt; tx_env.transact_to = TransactTo::create(),</span>
<span class="term-fg32">+            }</span>
<span class="term-fg32">+            tx_env.value = U256::from(*value);</span>
<span class="term-fg32">+            tx_env.data = input.0.clone();</span>
<span class="term-fg32">+            tx_env.chain_id = None;</span>
<span class="term-fg32">+            tx_env.nonce = None;</span>
         }
     }
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4e1e18a5b8e4456b3631c3e0" role="button"
                   aria-expanded="false" aria-controls="id-4e1e18a5b8e4456b3631c3e0">
                    <code>crates/revm/src/executor.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/revm/src/executor.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/revm/src/executor.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+167</span></div>
                        <div class="text-start"><span class="text-danger">-24</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4e1e18a5b8e4456b3631c3e0"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;revm&#47;src&#47;executor.rs anton-rs&#47;op-reth&#47;crates&#47;revm&#47;src&#47;executor.rs</span>
<span class="term-fg1">index 5ce714521fba0eef77b35e55cf57a97610df95db..d76eb644295235e228019ef2c02e03268f00d87c 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;revm&#47;src&#47;executor.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;revm&#47;src&#47;executor.rs</span>
<span class="term-fg36">@@ -26,6 +26,9 @@</span>     collections::{BTreeMap, HashMap},
     sync::Arc,
 };
&nbsp;
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+use crate::optimism;</span>
<span class="term-fg32">+</span>
 &#47;&#47;&#47; Main block executor
 pub struct Executor&lt;DB&gt;
 where
<span class="term-fg36">@@ -227,6 +230,9 @@</span>         let senders = self.recover_senders(&amp;block.body, senders)?;
&nbsp;
         self.init_env(&amp;block.header, total_difficulty);
&nbsp;
<span class="term-fg32">+        #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+        let mut l1_block_info = optimism::L1BlockInfo::try_from(block)?;</span>
<span class="term-fg32">+</span>
         let mut cumulative_gas_used = 0;
         let mut post_state = PostState::with_tx_capacity(block.number, block.body.len());
         for (transaction, sender) in block.body.iter().zip(senders) {
<span class="term-fg36">@@ -240,33 +246,170 @@</span>                     block_available_gas,
                 }
                 .into())
             }
<span class="term-fg31">-            &#47;&#47; Execute transaction.</span>
<span class="term-fg31">-            let ResultAndState { result, state } = self.transact(transaction, sender)?;</span>
&nbsp;
<span class="term-fg31">-            &#47;&#47; commit changes</span>
<span class="term-fg31">-            self.commit_changes(</span>
<span class="term-fg31">-                block.number,</span>
<span class="term-fg31">-                state,</span>
<span class="term-fg31">-                self.chain_spec.fork(Hardfork::SpuriousDragon).active_at_block(block.number),</span>
<span class="term-fg31">-                &amp;mut post_state,</span>
<span class="term-fg31">-            );</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            {</span>
<span class="term-fg32">+                let db = self.db();</span>
<span class="term-fg32">+                let l1_cost = l1_block_info.calculate_tx_l1_cost(transaction);</span>
&nbsp;
<span class="term-fg31">-            &#47;&#47; append gas used</span>
<span class="term-fg31">-            cumulative_gas_used += result.gas_used();</span>
<span class="term-fg32">+                let sender_account =</span>
<span class="term-fg32">+                    db.load_account(sender).map_err(|_| BlockExecutionError::ProviderError)?;</span>
<span class="term-fg32">+                let old_sender_info = to_reth_acc(&amp;sender_account.info);</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                if let Some(m) = transaction.mint() {</span>
<span class="term-fg32">+                    &#47;&#47; Add balance to the caler account equal to the minted amount.</span>
<span class="term-fg32">+                    &#47;&#47; Note: This is unconditional, and will not be reverted if the tx fails</span>
<span class="term-fg32">+                    &#47;&#47; (unless the block can&#39;t be built at all due to gas limit constraints)</span>
<span class="term-fg32">+                    sender_account.info.balance += U256::from(m);</span>
<span class="term-fg32">+                }</span>
&nbsp;
<span class="term-fg31">-            &#47;&#47; Push transaction changeset and calculate header bloom filter for receipt.</span>
<span class="term-fg31">-            post_state.add_receipt(</span>
<span class="term-fg31">-                block.number,</span>
<span class="term-fg31">-                Receipt {</span>
<span class="term-fg31">-                    tx_type: transaction.tx_type(),</span>
<span class="term-fg31">-                    &#47;&#47; Success flag was added in `EIP-658: Embedding transaction status code in</span>
<span class="term-fg31">-                    &#47;&#47; receipts`.</span>
<span class="term-fg31">-                    success: result.is_success(),</span>
<span class="term-fg31">-                    cumulative_gas_used,</span>
<span class="term-fg31">-                    &#47;&#47; convert to reth log</span>
<span class="term-fg31">-                    logs: result.into_logs().into_iter().map(into_reth_log).collect(),</span>
<span class="term-fg31">-                },</span>
<span class="term-fg31">-            );</span>
<span class="term-fg32">+                &#47;&#47; Check if the sender balance can cover the L1 cost.</span>
<span class="term-fg32">+                &#47;&#47; Deposits pay for their gas directly on L1 so they are exempt from the L2 tx fee.</span>
<span class="term-fg32">+                if !transaction.is_deposit() {</span>
<span class="term-fg32">+                    if sender_account.info.balance.cmp(&amp;l1_cost) == std::cmp::Ordering::Less {</span>
<span class="term-fg32">+                        return Err(BlockExecutionError::InsufficientFundsForL1Cost {</span>
<span class="term-fg32">+                            have: sender_account.info.balance.to::&lt;u64&gt;(),</span>
<span class="term-fg32">+                            want: l1_cost.to::&lt;u64&gt;(),</span>
<span class="term-fg32">+                        })</span>
<span class="term-fg32">+                    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    &#47;&#47; Safely take l1_cost from sender (the rest will be deducted by the</span>
<span class="term-fg32">+                    &#47;&#47; internal EVM execution and included in result.gas_used())</span>
<span class="term-fg32">+                    &#47;&#47; TODO: need to handle calls with `disable_balance_check` flag set?</span>
<span class="term-fg32">+                    sender_account.info.balance -= l1_cost;</span>
<span class="term-fg32">+                }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                let new_sender_info = to_reth_acc(&amp;sender_account.info);</span>
<span class="term-fg32">+                post_state.change_account(block.number, sender, old_sender_info, new_sender_info);</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; Execute transaction.</span>
<span class="term-fg32">+                let ResultAndState { result, state } = self.transact(transaction, sender)?;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                if transaction.is_deposit() &amp;&amp; !result.is_success() {</span>
<span class="term-fg32">+                    &#47;&#47; If the Deposited transaction failed, the deposit must still be included.</span>
<span class="term-fg32">+                    &#47;&#47; In this case, we need to increment the sender nonce and disregard the</span>
<span class="term-fg32">+                    &#47;&#47; state changes. The transaction is also recorded as using all gas.</span>
<span class="term-fg32">+                    let db = self.db();</span>
<span class="term-fg32">+                    let sender_account =</span>
<span class="term-fg32">+                        db.load_account(sender).map_err(|_| BlockExecutionError::ProviderError)?;</span>
<span class="term-fg32">+                    let old_sender_info = to_reth_acc(&amp;sender_account.info);</span>
<span class="term-fg32">+                    sender_account.info.nonce += 1;</span>
<span class="term-fg32">+                    let new_sender_info = to_reth_acc(&amp;sender_account.info);</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    post_state.change_account(</span>
<span class="term-fg32">+                        block.number,</span>
<span class="term-fg32">+                        sender,</span>
<span class="term-fg32">+                        old_sender_info,</span>
<span class="term-fg32">+                        new_sender_info,</span>
<span class="term-fg32">+                    );</span>
<span class="term-fg32">+                    if !transaction.is_system_transaction() {</span>
<span class="term-fg32">+                        cumulative_gas_used += transaction.gas_limit();</span>
<span class="term-fg32">+                    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                    post_state.add_receipt(</span>
<span class="term-fg32">+                        block.number,</span>
<span class="term-fg32">+                        Receipt {</span>
<span class="term-fg32">+                            tx_type: transaction.tx_type(),</span>
<span class="term-fg32">+                            success: false,</span>
<span class="term-fg32">+                            cumulative_gas_used,</span>
<span class="term-fg32">+                            logs: vec![],</span>
<span class="term-fg32">+                            deposit_nonce: Some(transaction.nonce()),</span>
<span class="term-fg32">+                        },</span>
<span class="term-fg32">+                    );</span>
<span class="term-fg32">+                    continue</span>
<span class="term-fg32">+                }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; commit changes</span>
<span class="term-fg32">+                self.commit_changes(</span>
<span class="term-fg32">+                    block.number,</span>
<span class="term-fg32">+                    state,</span>
<span class="term-fg32">+                    self.chain_spec.fork(Hardfork::SpuriousDragon).active_at_block(block.number),</span>
<span class="term-fg32">+                    &amp;mut post_state,</span>
<span class="term-fg32">+                );</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                if !transaction.is_system_transaction() {</span>
<span class="term-fg32">+                    &#47;&#47; After Regolith, deposits are reported as using the actual gas used instead of</span>
<span class="term-fg32">+                    &#47;&#47; all the gas. System transactions are not reported as using any gas.</span>
<span class="term-fg32">+                    cumulative_gas_used += result.gas_used()</span>
<span class="term-fg32">+                }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; Route the l1 cost and base fee to the appropriate optimism vaults</span>
<span class="term-fg32">+                self.increment_account_balance(</span>
<span class="term-fg32">+                    block.number,</span>
<span class="term-fg32">+                    optimism::l1_cost_recipient(),</span>
<span class="term-fg32">+                    l1_cost,</span>
<span class="term-fg32">+                    &amp;mut post_state,</span>
<span class="term-fg32">+                )?;</span>
<span class="term-fg32">+                self.increment_account_balance(</span>
<span class="term-fg32">+                    block.number,</span>
<span class="term-fg32">+                    optimism::base_fee_recipient(),</span>
<span class="term-fg32">+                    U256::from(</span>
<span class="term-fg32">+                        block</span>
<span class="term-fg32">+                            .base_fee_per_gas</span>
<span class="term-fg32">+                            .unwrap_or_default()</span>
<span class="term-fg32">+                            .saturating_mul(result.gas_used()),</span>
<span class="term-fg32">+                    ),</span>
<span class="term-fg32">+                    &amp;mut post_state,</span>
<span class="term-fg32">+                )?;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; cast revm logs to reth logs</span>
<span class="term-fg32">+                let logs = result.logs().into_iter().map(into_reth_log).collect();</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; Push transaction changeset and calculate header bloom filter for receipt.</span>
<span class="term-fg32">+                post_state.add_receipt(</span>
<span class="term-fg32">+                    block.number,</span>
<span class="term-fg32">+                    Receipt {</span>
<span class="term-fg32">+                        tx_type: transaction.tx_type(),</span>
<span class="term-fg32">+                        &#47;&#47; Success flag was added in `EIP-658: Embedding transaction status code in</span>
<span class="term-fg32">+                        &#47;&#47; receipts`.</span>
<span class="term-fg32">+                        success: result.is_success(),</span>
<span class="term-fg32">+                        cumulative_gas_used,</span>
<span class="term-fg32">+                        logs,</span>
<span class="term-fg32">+                        deposit_nonce: Some(transaction.nonce()),</span>
<span class="term-fg32">+                    },</span>
<span class="term-fg32">+                );</span>
<span class="term-fg32">+            }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+            #[cfg(not(feature = &quot;optimism&quot;))]</span>
<span class="term-fg32">+            {</span>
<span class="term-fg32">+                &#47;&#47; The sum of the transaction’s gas limit, Tg, and the gas utilised in this block</span>
<span class="term-fg32">+                &#47;&#47; prior, must be no greater than the block’s gasLimit.</span>
<span class="term-fg32">+                let block_available_gas = block.header.gas_limit - cumulative_gas_used;</span>
<span class="term-fg32">+                if transaction.gas_limit() &gt; block_available_gas {</span>
<span class="term-fg32">+                    return Err(BlockValidationError::TransactionGasLimitMoreThanAvailableBlockGas {</span>
<span class="term-fg32">+                        transaction_gas_limit: transaction.gas_limit(),</span>
<span class="term-fg32">+                        block_available_gas,</span>
<span class="term-fg32">+                    }</span>
<span class="term-fg32">+                    .into())</span>
<span class="term-fg32">+                }</span>
<span class="term-fg32">+                &#47;&#47; Execute transaction.</span>
<span class="term-fg32">+                let ResultAndState { result, state } = self.transact(transaction, sender)?;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; commit changes</span>
<span class="term-fg32">+                self.commit_changes(</span>
<span class="term-fg32">+                    block.number,</span>
<span class="term-fg32">+                    state,</span>
<span class="term-fg32">+                    self.chain_spec.fork(Hardfork::SpuriousDragon).active_at_block(block.number),</span>
<span class="term-fg32">+                    &amp;mut post_state,</span>
<span class="term-fg32">+                );</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; append gas used</span>
<span class="term-fg32">+                cumulative_gas_used += result.gas_used();</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+                &#47;&#47; Push transaction changeset and calculate header bloom filter for receipt.</span>
<span class="term-fg32">+                post_state.add_receipt(</span>
<span class="term-fg32">+                    block.number,</span>
<span class="term-fg32">+                    Receipt {</span>
<span class="term-fg32">+                        tx_type: transaction.tx_type(),</span>
<span class="term-fg32">+                        &#47;&#47; Success flag was added in `EIP-658: Embedding transaction status code in</span>
<span class="term-fg32">+                        &#47;&#47; receipts`.</span>
<span class="term-fg32">+                        success: result.is_success(),</span>
<span class="term-fg32">+                        cumulative_gas_used,</span>
<span class="term-fg32">+                        &#47;&#47; convert to reth log</span>
<span class="term-fg32">+                        logs: result.into_logs().into_iter().map(into_reth_log).collect(),</span>
<span class="term-fg32">+                    },</span>
<span class="term-fg32">+                );</span>
<span class="term-fg32">+            }</span>
         }
&nbsp;
         Ok((post_state, cumulative_gas_used))</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b73624b84638e176c416668e" role="button"
                   aria-expanded="false" aria-controls="id-b73624b84638e176c416668e">
                    <code>crates/revm/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/revm/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/revm/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b73624b84638e176c416668e"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;revm&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;revm&#47;src&#47;lib.rs</span>
<span class="term-fg1">index 6a99b020381d0629e72c7a38dce665f0d308279f..612a0f6482c013ed59dcd890c3ca7da75bf4a03a 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;revm&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;revm&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -33,3 +33,7 @@</span> pub use revm;
&nbsp;
 &#47;&#47;&#47; Etereum DAO hardfork state change data.
 pub mod eth_dao_fork;
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Optimism-specific utilities for the executor</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+pub mod optimism;</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8d1d14dd3b3600bad2a97e15" role="button"
                   aria-expanded="false" aria-controls="id-8d1d14dd3b3600bad2a97e15">
                    <code>crates/revm/src/optimism.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/revm/src/optimism.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+113</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8d1d14dd3b3600bad2a97e15"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;revm&#47;src&#47;optimism.rs anton-rs&#47;op-reth&#47;crates&#47;revm&#47;src&#47;optimism.rs</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..deeb9dcc684929b0fc14bd599bc0a877863dfb49</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;revm&#47;src&#47;optimism.rs</span>
<span class="term-fg36">@@ -0,0 +1,113 @@</span>
<span class="term-fg32">+use std::str::FromStr;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+use reth_interfaces::executor;</span>
<span class="term-fg32">+use reth_primitives::{Address, Block, TransactionKind, TransactionSigned, U256};</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const L1_FEE_RECIPIENT: &amp;str = &quot;0x420000000000000000000000000000000000001A&quot;;</span>
<span class="term-fg32">+const BASE_FEE_RECIPIENT: &amp;str = &quot;0x4200000000000000000000000000000000000019&quot;;</span>
<span class="term-fg32">+const L1_BLOCK_CONTRACT: &amp;str = &quot;0x4200000000000000000000000000000000000015&quot;;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const ZERO_BYTE_COST: u64 = 4;</span>
<span class="term-fg32">+const NON_ZERO_BYTE_COST: u64 = 16;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; L1 block info</span>
<span class="term-fg32">+&#47;&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;&#47; We can extract L1 epoch data from each L2 block, by looking at the `setL1BlockValues`</span>
<span class="term-fg32">+&#47;&#47;&#47; transaction data. This data is then used to calculate the L1 cost of a transaction.</span>
<span class="term-fg32">+&#47;&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;&#47; Here is the format of the `setL1BlockValues` transaction data:</span>
<span class="term-fg32">+&#47;&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;&#47; setL1BlockValues(uint64 _number, uint64 _timestamp, uint256 _basefee, bytes32 _hash,</span>
<span class="term-fg32">+&#47;&#47;&#47; uint64 _sequenceNumber, bytes32 _batcherHash, uint256 _l1FeeOverhead, uint256 _l1FeeScalar)</span>
<span class="term-fg32">+&#47;&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;&#47; For now, we only care about the fields necessary for L1 cost calculation.</span>
<span class="term-fg32">+pub struct L1BlockInfo {</span>
<span class="term-fg32">+    l1_base_fee: U256,</span>
<span class="term-fg32">+    l1_fee_overhead: U256,</span>
<span class="term-fg32">+    l1_fee_scalar: U256,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+impl TryFrom&lt;&amp;Block&gt; for L1BlockInfo {</span>
<span class="term-fg32">+    type Error = executor::BlockExecutionError;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    fn try_from(block: &amp;Block) -&gt; Result&lt;Self, Self::Error&gt; {</span>
<span class="term-fg32">+        let l1_block_contract = Address::from_str(L1_BLOCK_CONTRACT).unwrap();</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        let l1_info_tx_data = block</span>
<span class="term-fg32">+            .body</span>
<span class="term-fg32">+            .iter()</span>
<span class="term-fg32">+            .find(|tx| matches!(tx.kind(), TransactionKind::Call(to) if to == &amp;l1_block_contract))</span>
<span class="term-fg32">+            .ok_or(executor::BlockExecutionError::L1BlockInfoError {</span>
<span class="term-fg32">+                message: &quot;could not find l1 block info tx in the L2 block&quot;.to_string(),</span>
<span class="term-fg32">+            })</span>
<span class="term-fg32">+            .and_then(|tx| {</span>
<span class="term-fg32">+                tx.input().get(4..).ok_or(executor::BlockExecutionError::L1BlockInfoError {</span>
<span class="term-fg32">+                    message: &quot;could not get l1 block info tx calldata bytes&quot;.to_string(),</span>
<span class="term-fg32">+                })</span>
<span class="term-fg32">+            })?;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        &#47;&#47; The setL1BlockValues tx calldata must be exactly 184 bytes long, considering that</span>
<span class="term-fg32">+        &#47;&#47; we already removed the first 4 bytes (the function selector). Detailed breakdown:</span>
<span class="term-fg32">+        &#47;&#47;   8  bytes for the block number</span>
<span class="term-fg32">+        &#47;&#47; + 8  bytes for the block timestamp</span>
<span class="term-fg32">+        &#47;&#47; + 32 bytes for the base fee</span>
<span class="term-fg32">+        &#47;&#47; + 32 bytes for the block hash</span>
<span class="term-fg32">+        &#47;&#47; + 8  bytes for the block sequence number</span>
<span class="term-fg32">+        &#47;&#47; + 32 bytes for the batcher hash</span>
<span class="term-fg32">+        &#47;&#47; + 32 bytes for the fee overhead</span>
<span class="term-fg32">+        &#47;&#47; + 32 bytes for the fee scalar</span>
<span class="term-fg32">+        if l1_info_tx_data.len() != 184 {</span>
<span class="term-fg32">+            return Err(executor::BlockExecutionError::L1BlockInfoError {</span>
<span class="term-fg32">+                message: &quot;unexpected l1 block info tx calldata length found&quot;.to_string(),</span>
<span class="term-fg32">+            })</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        let l1_base_fee = U256::try_from_le_slice(&amp;l1_info_tx_data[16..48]).ok_or(</span>
<span class="term-fg32">+            executor::BlockExecutionError::L1BlockInfoError {</span>
<span class="term-fg32">+                message: &quot;could not convert l1 base fee&quot;.to_string(),</span>
<span class="term-fg32">+            },</span>
<span class="term-fg32">+        )?;</span>
<span class="term-fg32">+        let l1_fee_overhead = U256::try_from_le_slice(&amp;l1_info_tx_data[120..152]).ok_or(</span>
<span class="term-fg32">+            executor::BlockExecutionError::L1BlockInfoError {</span>
<span class="term-fg32">+                message: &quot;could not convert l1 fee overhead&quot;.to_string(),</span>
<span class="term-fg32">+            },</span>
<span class="term-fg32">+        )?;</span>
<span class="term-fg32">+        let l1_fee_scalar = U256::try_from_le_slice(&amp;l1_info_tx_data[152..184]).ok_or(</span>
<span class="term-fg32">+            executor::BlockExecutionError::L1BlockInfoError {</span>
<span class="term-fg32">+                message: &quot;could not convert l1 fee scalar&quot;.to_string(),</span>
<span class="term-fg32">+            },</span>
<span class="term-fg32">+        )?;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        Ok(Self { l1_base_fee, l1_fee_overhead, l1_fee_scalar })</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+impl L1BlockInfo {</span>
<span class="term-fg32">+    &#47;&#47;&#47; Calculate the gas cost of a transaction based on L1 block data posted on L2</span>
<span class="term-fg32">+    pub fn calculate_tx_l1_cost(&amp;mut self, tx: &amp;TransactionSigned) -&gt; U256 {</span>
<span class="term-fg32">+        let rollup_data_gas_cost = U256::from(tx.input().iter().fold(0, |acc, byte| {</span>
<span class="term-fg32">+            acc + if *byte == 0x00 { ZERO_BYTE_COST } else { NON_ZERO_BYTE_COST }</span>
<span class="term-fg32">+        }));</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        if tx.is_deposit() || rollup_data_gas_cost == U256::ZERO {</span>
<span class="term-fg32">+            return U256::ZERO</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+        rollup_data_gas_cost</span>
<span class="term-fg32">+            .saturating_add(self.l1_fee_overhead)</span>
<span class="term-fg32">+            .saturating_mul(self.l1_base_fee)</span>
<span class="term-fg32">+            .saturating_mul(self.l1_fee_scalar)</span>
<span class="term-fg32">+            .checked_div(U256::from(1_000_000))</span>
<span class="term-fg32">+            .unwrap_or_default()</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Get the base fee recipient address</span>
<span class="term-fg32">+pub fn base_fee_recipient() -&gt; Address {</span>
<span class="term-fg32">+    Address::from_str(BASE_FEE_RECIPIENT).unwrap()</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;&#47; Get the L1 cost recipient address</span>
<span class="term-fg32">+pub fn l1_cost_recipient() -&gt; Address {</span>
<span class="term-fg32">+    Address::from_str(L1_FEE_RECIPIENT).unwrap()</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-75abff6a7ded9371a0df98c1" role="button"
                   aria-expanded="false" aria-controls="id-75abff6a7ded9371a0df98c1">
                    <code>crates/rpc/rpc-api/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-api/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-api/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-75abff6a7ded9371a0df98c1"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;lib.rs</span>
<span class="term-fg1">index 073631c986e7d6395bb19e9b2c5f2ca4df648268..7fba5adba9e0a5aed62a567daa760c17ae666392 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -26,7 +26,6 @@</span> mod eth;
 mod eth_filter;
 mod eth_pubsub;
 mod net;
<span class="term-fg31">-mod otterscan;</span>
 mod reth;
 mod rpc;
 mod trace;
<span class="term-fg36">@@ -46,7 +45,6 @@</span>         eth::EthApiServer,
         eth_filter::EthFilterApiServer,
         eth_pubsub::EthPubSubApiServer,
         net::NetApiServer,
<span class="term-fg31">-        otterscan::OtterscanServer,</span>
         reth::RethApiServer,
         rpc::RpcApiServer,
         trace::TraceApiServer,
<span class="term-fg36">@@ -68,7 +66,6 @@</span>         debug::DebugApiClient,
         engine::{EngineApiClient, EngineEthApiClient},
         eth::EthApiClient,
         net::NetApiClient,
<span class="term-fg31">-        otterscan::OtterscanClient,</span>
         rpc::RpcApiServer,
         trace::TraceApiClient,
         txpool::TxPoolApiClient,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f3084f8c18298cc7383186d7" role="button"
                   aria-expanded="false" aria-controls="id-f3084f8c18298cc7383186d7">
                    <code>crates/rpc/rpc-api/src/otterscan.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-api/src/otterscan.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-85</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f3084f8c18298cc7383186d7"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;otterscan.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;otterscan.rs</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index 9ac585991fed2f05fb4bf1636ac30375e3dabb53..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;otterscan.rs</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,85 +0,0 @@</span>
<span class="term-fg31">-use jsonrpsee::{core::RpcResult, proc_macros::rpc};</span>
<span class="term-fg31">-use reth_primitives::{Address, BlockId, BlockNumberOrTag, TxHash, H256};</span>
<span class="term-fg31">-use reth_rpc_types::{</span>
<span class="term-fg31">-    BlockDetails, ContractCreator, InternalOperation, OtsBlockTransactions, TraceEntry,</span>
<span class="term-fg31">-    Transaction, TransactionsWithReceipts,</span>
<span class="term-fg31">-};</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Otterscan rpc interface.</span>
<span class="term-fg31">-#[cfg_attr(not(feature = &quot;client&quot;), rpc(server, namespace = &quot;ots&quot;))]</span>
<span class="term-fg31">-#[cfg_attr(feature = &quot;client&quot;, rpc(server, client, namespace = &quot;ots&quot;))]</span>
<span class="term-fg31">-pub trait Otterscan {</span>
<span class="term-fg31">-    &#47;&#47;&#47; Check if a certain address contains a deployed code.</span>
<span class="term-fg31">-    #[method(name = &quot;hasCode&quot;)]</span>
<span class="term-fg31">-    async fn has_code(&amp;self, address: Address, block_number: Option&lt;BlockId&gt;) -&gt; RpcResult&lt;bool&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Very simple API versioning scheme. Every time we add a new capability, the number is</span>
<span class="term-fg31">-    &#47;&#47;&#47; incremented. This allows for Otterscan to check if the node contains all API it</span>
<span class="term-fg31">-    &#47;&#47;&#47; needs.</span>
<span class="term-fg31">-    #[method(name = &quot;getApiLevel&quot;)]</span>
<span class="term-fg31">-    async fn get_api_level(&amp;self) -&gt; RpcResult&lt;u64&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Return the internal ETH transfers inside a transaction.</span>
<span class="term-fg31">-    #[method(name = &quot;getInternalOperations&quot;)]</span>
<span class="term-fg31">-    async fn get_internal_operations(&amp;self, tx_hash: TxHash) -&gt; RpcResult&lt;Vec&lt;InternalOperation&gt;&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Given a transaction hash, returns its raw revert reason.</span>
<span class="term-fg31">-    #[method(name = &quot;getTransactionError&quot;)]</span>
<span class="term-fg31">-    async fn get_transaction_error(&amp;self, tx_hash: TxHash) -&gt; RpcResult&lt;String&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Extract all variations of calls, contract creation and self-destructs and returns a call</span>
<span class="term-fg31">-    &#47;&#47;&#47; tree.</span>
<span class="term-fg31">-    #[method(name = &quot;traceTransaction&quot;)]</span>
<span class="term-fg31">-    async fn trace_transaction(&amp;self, tx_hash: TxHash) -&gt; RpcResult&lt;TraceEntry&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Tailor-made and expanded version of eth_getBlockByNumber for block details page in</span>
<span class="term-fg31">-    &#47;&#47;&#47; Otterscan.</span>
<span class="term-fg31">-    #[method(name = &quot;getBlockDetails&quot;)]</span>
<span class="term-fg31">-    async fn get_block_details(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;Option&lt;BlockDetails&gt;&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Tailor-made and expanded version of eth_getBlockByHash for block details page in Otterscan.</span>
<span class="term-fg31">-    #[method(name = &quot;getBlockDetailsByHash&quot;)]</span>
<span class="term-fg31">-    async fn get_block_details_by_hash(&amp;self, block_hash: H256) -&gt; RpcResult&lt;Option&lt;BlockDetails&gt;&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Get paginated transactions for a certain block. Also remove some verbose fields like logs.</span>
<span class="term-fg31">-    #[method(name = &quot;getBlockTransactions&quot;)]</span>
<span class="term-fg31">-    async fn get_block_transactions(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-        page_number: usize,</span>
<span class="term-fg31">-        page_size: usize,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;OtsBlockTransactions&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Gets paginated inbound&#47;outbound transaction calls for a certain address.</span>
<span class="term-fg31">-    #[method(name = &quot;searchTransactionsBefore&quot;)]</span>
<span class="term-fg31">-    async fn search_transactions_before(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        address: Address,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-        page_size: usize,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;TransactionsWithReceipts&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Gets paginated inbound&#47;outbound transaction calls for a certain address.</span>
<span class="term-fg31">-    #[method(name = &quot;searchTransactionsAfter&quot;)]</span>
<span class="term-fg31">-    async fn search_transactions_after(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        address: Address,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-        page_size: usize,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;TransactionsWithReceipts&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Gets the transaction hash for a certain sender address, given its nonce.</span>
<span class="term-fg31">-    #[method(name = &quot;getTransactionBySenderAndNonce&quot;)]</span>
<span class="term-fg31">-    async fn get_transaction_by_sender_and_nonce(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        sender: Address,</span>
<span class="term-fg31">-        nonce: u64,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;Option&lt;Transaction&gt;&gt;;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Gets the transaction hash and the address who created a contract.</span>
<span class="term-fg31">-    #[method(name = &quot;getContractCreator&quot;)]</span>
<span class="term-fg31">-    async fn get_contract_creator(&amp;self, address: Address) -&gt; RpcResult&lt;Option&lt;ContractCreator&gt;&gt;;</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7a0c9cfce2efedded5aa745c" role="button"
                   aria-expanded="false" aria-controls="id-7a0c9cfce2efedded5aa745c">
                    <code>crates/rpc/rpc-api/src/trace.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-api/src/trace.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-api/src/trace.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7a0c9cfce2efedded5aa745c"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;trace.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;trace.rs</span>
<span class="term-fg1">index d38af056d79e009e2ef90c1697cfb72179c36f46..ab4f36758deea9f6ef0435021bc9284b8fd248b5 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;trace.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-api&#47;src&#47;trace.rs</span>
<span class="term-fg36">@@ -71,11 +71,6 @@</span>     #[method(name = &quot;filter&quot;)]
     async fn trace_filter(&amp;self, filter: TraceFilter) -&gt; RpcResult&lt;Vec&lt;LocalizedTransactionTrace&gt;&gt;;
&nbsp;
     &#47;&#47;&#47; Returns transaction trace at given index.
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; `indices` represent the index positions of the traces.</span>
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; Note: This expects a list of indices but only one is supported since this function returns a</span>
<span class="term-fg31">-    &#47;&#47;&#47; single [LocalizedTransactionTrace].</span>
     #[method(name = &quot;get&quot;)]
     async fn trace_get(
         &amp;self,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-65df5f1fcb11dd21d077afb4" role="button"
                   aria-expanded="false" aria-controls="id-65df5f1fcb11dd21d077afb4">
                    <code>crates/rpc/rpc-builder/src/constants.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-builder/src/constants.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-builder/src/constants.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+7</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-65df5f1fcb11dd21d077afb4"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;constants.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;constants.rs</span>
<span class="term-fg1">index a1b2bc36a82d4b4b1aabd6b38d8f8427b6dd798f..6768ca62a659f9c8008a9a8285fa3dbbd99118e2 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;constants.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;constants.rs</span>
<span class="term-fg36">@@ -7,6 +7,13 @@</span>
 &#47;&#47;&#47; The default port for the auth server.
 pub const DEFAULT_AUTH_PORT: u16 = 8551;
&nbsp;
<span class="term-fg32">+&#47;&#47;&#47; The default gas limit for eth_call and adjacent calls.</span>
<span class="term-fg32">+&#47;&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;&#47; This is different from the default to regular 30M block gas limit</span>
<span class="term-fg32">+&#47;&#47;&#47; [ETHEREUM_BLOCK_GAS_LIMIT](reth_primitives::constants::ETHEREUM_BLOCK_GAS_LIMIT) to allow for</span>
<span class="term-fg32">+&#47;&#47;&#47; more complex calls.</span>
<span class="term-fg32">+pub const RPC_DEFAULT_GAS_CAP: u64 = 50_000_000;</span>
<span class="term-fg32">+</span>
 &#47;&#47;&#47; The default IPC endpoint
 #[cfg(windows)]
 pub const DEFAULT_IPC_ENDPOINT: &amp;str = r&quot;\\.\pipe\reth.ipc&quot;;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ea6bffc1e63384d640f0ab10" role="button"
                   aria-expanded="false" aria-controls="id-ea6bffc1e63384d640f0ab10">
                    <code>crates/rpc/rpc-builder/src/eth.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-builder/src/eth.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-builder/src/eth.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ea6bffc1e63384d640f0ab10"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;eth.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;eth.rs</span>
<span class="term-fg1">index 34ec4989c62b59d302c6843562ec45140f174fba..5b2d6780a5315d1aa5de777517ccfa1bef131cf2 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;eth.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;eth.rs</span>
<span class="term-fg36">@@ -1,8 +1,8 @@</span>
<span class="term-fg32">+use crate::constants::RPC_DEFAULT_GAS_CAP;</span>
 use reth_rpc::{
     eth::{
         cache::{EthStateCache, EthStateCacheConfig},
         gas_oracle::GasPriceOracleConfig,
<span class="term-fg31">-        RPC_DEFAULT_GAS_CAP,</span>
     },
     EthApi, EthFilter, EthPubSub,
 };
<span class="term-fg36">@@ -51,7 +51,7 @@</span>             cache: EthStateCacheConfig::default(),
             gas_oracle: GasPriceOracleConfig::default(),
             max_tracing_requests: DEFAULT_MAX_TRACING_REQUESTS,
             max_logs_per_response: DEFAULT_MAX_LOGS_PER_RESPONSE,
<span class="term-fg31">-            rpc_gas_cap: RPC_DEFAULT_GAS_CAP.into(),</span>
<span class="term-fg32">+            rpc_gas_cap: RPC_DEFAULT_GAS_CAP,</span>
         }
     }
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9eb7a3b520ac2f1a6663410d" role="button"
                   aria-expanded="false" aria-controls="id-9eb7a3b520ac2f1a6663410d">
                    <code>crates/rpc/rpc-builder/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-builder/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-builder/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-12</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9eb7a3b520ac2f1a6663410d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;lib.rs</span>
<span class="term-fg1">index 8737519fa81b60a4a0395a0d1f837a399b0ff08b..368960517b7cb6db3148ecaf3ca4d3bd84e04abe 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-builder&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -122,7 +122,7 @@</span>         cache::{cache_new_blocks_task, EthStateCache},
         gas_oracle::GasPriceOracle,
     },
     AdminApi, DebugApi, EngineEthApi, EthApi, EthFilter, EthPubSub, EthSubscriptionIdProvider,
<span class="term-fg31">-    NetApi, OtterscanApi, RPCApi, RethApi, TraceApi, TracingCallGuard, TxPoolApi, Web3Api,</span>
<span class="term-fg32">+    NetApi, RPCApi, RethApi, TraceApi, TracingCallGuard, TxPoolApi, Web3Api,</span>
 };
 use reth_rpc_api::{servers::*, EngineApiServer};
 use reth_tasks::{TaskSpawner, TokioTaskExecutor};
<span class="term-fg36">@@ -651,8 +651,6 @@</span>     &#47;&#47;&#47; `rpc_` module
     Rpc,
     &#47;&#47;&#47; `reth_` module
     Reth,
<span class="term-fg31">-    &#47;&#47;&#47; `ots_` module</span>
<span class="term-fg31">-    Ots,</span>
 }
&nbsp;
 &#47;&#47; === impl RethRpcModule ===
<span class="term-fg36">@@ -778,13 +776,6 @@</span>     &#47;&#47;&#47; Register Eth Namespace
     pub fn register_eth(&amp;mut self) -&gt; &amp;mut Self {
         let eth_api = self.eth_api();
         self.modules.insert(RethRpcModule::Eth, eth_api.into_rpc().into());
<span class="term-fg31">-        self</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Register Otterscan Namespace</span>
<span class="term-fg31">-    pub fn register_ots(&amp;mut self) -&gt; &amp;mut Self {</span>
<span class="term-fg31">-        let eth_api = self.eth_api();</span>
<span class="term-fg31">-        self.modules.insert(RethRpcModule::Ots, OtterscanApi::new(eth_api).into_rpc().into());</span>
         self
     }
&nbsp;
<span class="term-fg36">@@ -945,7 +936,6 @@</span>                                 .collect(),
                         )
                         .into_rpc()
                         .into(),
<span class="term-fg31">-                        RethRpcModule::Ots =&gt; OtterscanApi::new(eth_api.clone()).into_rpc().into(),</span>
                         RethRpcModule::Reth =&gt; {
                             RethApi::new(self.provider.clone(), Box::new(self.executor.clone()))
                                 .into_rpc()
<span class="term-fg36">@@ -1784,7 +1774,6 @@</span>                 &quot;net&quot; =&gt;  RethRpcModule::Net,
                 &quot;trace&quot; =&gt;  RethRpcModule::Trace,
                 &quot;web3&quot; =&gt;  RethRpcModule::Web3,
                 &quot;rpc&quot; =&gt; RethRpcModule::Rpc,
<span class="term-fg31">-                &quot;ots&quot; =&gt; RethRpcModule::Ots,</span>
                 &quot;reth&quot; =&gt; RethRpcModule::Reth,
             );
     }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-96c715ae5e0b2c5f58f2e40c" role="button"
                   aria-expanded="false" aria-controls="id-96c715ae5e0b2c5f58f2e40c">
                    <code>crates/rpc/rpc-engine-api/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-engine-api/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-engine-api/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-96c715ae5e0b2c5f58f2e40c"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;Cargo.toml</span>
<span class="term-fg1">index 219edaca6f4b7f2cb3e8ea3e81247f6873ff2ea6..162c801e19a02e57bfa07ce2a8a2c229da6b4589 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;Cargo.toml</span>
<span class="term-fg36">@@ -34,3 +34,6 @@</span> reth-interfaces = { workspace = true, features = [&quot;test-utils&quot;] }
 reth-provider = { workspace = true, features = [&quot;test-utils&quot;] }
 reth-payload-builder = { workspace = true, features = [&quot;test-utils&quot;] }
 assert_matches = &quot;1.5.0&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [&quot;reth-primitives&#47;optimism&quot;, &quot;reth-rpc-types&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6e48e66fc4435da7056ebe3b" role="button"
                   aria-expanded="false" aria-controls="id-6e48e66fc4435da7056ebe3b">
                    <code>crates/rpc/rpc-engine-api/src/error.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-engine-api/src/error.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-engine-api/src/error.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6e48e66fc4435da7056ebe3b"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;src&#47;error.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;src&#47;error.rs</span>
<span class="term-fg1">index 26c29916c300024991076633886ad0b07d0dc92c..b6dfca1b68c1525adb74d4bc4415079961b11913 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;src&#47;error.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-engine-api&#47;src&#47;error.rs</span>
<span class="term-fg36">@@ -75,6 +75,11 @@</span>     Internal(Box&lt;dyn std::error::Error + Send + Sync&gt;),
     &#47;&#47;&#47; Fetching the payload failed
     #[error(transparent)]
     GetPayloadError(#[from] PayloadBuilderError),
<span class="term-fg32">+    &#47;&#47;&#47; If the optimism feature flag is enabled, the payload attributes must have a present</span>
<span class="term-fg32">+    &#47;&#47;&#47; gas limit for the forkchoice updated method.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    #[error(&quot;Missing gas limit in payload attributes&quot;)]</span>
<span class="term-fg32">+    MissingGasLimitInPayloadAttributes,</span>
 }
&nbsp;
 impl From&lt;EngineApiError&gt; for jsonrpsee_types::error::ErrorObject&lt;&#39;static&gt; {
<span class="term-fg36">@@ -102,6 +107,9 @@</span>             EngineApiError::TerminalTD { .. } |
             EngineApiError::TerminalBlockHash { .. } |
             EngineApiError::Internal(_) |
             EngineApiError::GetPayloadError(_) =&gt; INTERNAL_ERROR_CODE,
<span class="term-fg32">+            &#47;&#47; Optimism errors</span>
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            EngineApiError::MissingGasLimitInPayloadAttributes =&gt; INVALID_PARAMS_CODE,</span>
         };
         jsonrpsee_types::error::ErrorObject::owned(code, error.to_string(), None::&lt;()&gt;)
     }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-031f5efa205e30cf3811baf0" role="button"
                   aria-expanded="false" aria-controls="id-031f5efa205e30cf3811baf0">
                    <code>crates/rpc/rpc-types/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-types/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-types/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-031f5efa205e30cf3811baf0"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;Cargo.toml</span>
<span class="term-fg1">index 5db05498bac253a59763ee4c514ac1c28af5f01b..0e06fc3e35e664444ff40083603a085b7433a9dc 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;Cargo.toml</span>
<span class="term-fg36">@@ -31,3 +31,6 @@</span> # misc
 rand = { workspace = true }
 assert_matches = &quot;1.5&quot;
 similar-asserts = &quot;1.4&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [&quot;reth-primitives&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-494562d2611129cc56df1b67" role="button"
                   aria-expanded="false" aria-controls="id-494562d2611129cc56df1b67">
                    <code>crates/rpc/rpc-types/src/eth/engine/payload.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-types/src/eth/engine/payload.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-types/src/eth/engine/payload.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+16</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-494562d2611129cc56df1b67"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;engine&#47;payload.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;engine&#47;payload.rs</span>
<span class="term-fg1">index 5b63e1b8cc5c8af01caf58ca0a6302bd82793ffa..3a0fcc4b9ecae6fc28573441bf1f99d44a52bd23 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;engine&#47;payload.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;engine&#47;payload.rs</span>
<span class="term-fg36">@@ -255,6 +255,22 @@</span>     &#47;&#47;&#47; Array of [`Withdrawal`] enabled with V2
     &#47;&#47;&#47; See &lt;https:&#47;&#47;github.com&#47;ethereum&#47;execution-apis&#47;blob&#47;6452a6b194d7db269bf1dbd087a267251d3cc7f8&#47;src&#47;engine&#47;shanghai.md#payloadattributesv2&gt;
     #[serde(default, skip_serializing_if = &quot;Option::is_none&quot;)]
     pub withdrawals: Option&lt;Vec&lt;Withdrawal&gt;&gt;,
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; Transactions is a field for rollups: the transactions list is forced into the block</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    #[serde(default, skip_serializing_if = &quot;Option::is_none&quot;)]</span>
<span class="term-fg32">+    pub transactions: Option&lt;Vec&lt;Bytes&gt;&gt;,</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; If true, the no transactions are taken out of the tx-pool, only transactions from the above</span>
<span class="term-fg32">+    &#47;&#47;&#47; Transactions list will be included.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    #[serde(default, skip_serializing_if = &quot;Option::is_none&quot;)]</span>
<span class="term-fg32">+    pub no_tx_pool: Option&lt;bool&gt;,</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    &#47;&#47;&#47; If set, this sets the exact gas limit the block produced with.</span>
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    #[serde(default, skip_serializing_if = &quot;Option::is_none&quot;)]</span>
<span class="term-fg32">+    pub gas_limit: Option&lt;u64&gt;,</span>
 }
&nbsp;
 &#47;&#47;&#47; This structure contains the result of processing a payload or fork choice update.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-34f02776fed01c8bb0c91a9d" role="button"
                   aria-expanded="false" aria-controls="id-34f02776fed01c8bb0c91a9d">
                    <code>crates/rpc/rpc-types/src/eth/fee.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-types/src/eth/fee.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-types/src/eth/fee.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-34f02776fed01c8bb0c91a9d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;fee.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;fee.rs</span>
<span class="term-fg1">index c7f93f6eaf6b7db370d556c5924fb3cef3b1cc3b..6463e7b433c10d3ab1f717742b68b7d4a3c8f8f9 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;fee.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;fee.rs</span>
<span class="term-fg36">@@ -12,7 +12,10 @@</span> }
&nbsp;
 impl PartialOrd for TxGasAndReward {
     fn partial_cmp(&amp;self, other: &amp;Self) -&gt; Option&lt;std::cmp::Ordering&gt; {
<span class="term-fg31">-        Some(self.cmp(other))</span>
<span class="term-fg32">+        &#47;&#47; compare only the reward</span>
<span class="term-fg32">+        &#47;&#47; see:</span>
<span class="term-fg32">+        &#47;&#47; &lt;https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;blob&#47;ee8e83fa5f6cb261dad2ed0a7bbcde4930c41e6c&#47;eth&#47;gasprice&#47;feehistory.go#L85&gt;</span>
<span class="term-fg32">+        self.reward.partial_cmp(&amp;other.reward)</span>
     }
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2055fb26742b2889e66dab9d" role="button"
                   aria-expanded="false" aria-controls="id-2055fb26742b2889e66dab9d">
                    <code>crates/rpc/rpc-types/src/eth/trace/parity.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-types/src/eth/trace/parity.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-types/src/eth/trace/parity.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2055fb26742b2889e66dab9d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;trace&#47;parity.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;trace&#47;parity.rs</span>
<span class="term-fg1">index f3fa4eb9b1f6bb8ac91cee28967c73ceaf7c839e..fcc5e54bbbb80b5406cb91d8e3b317ee38ff21dc 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;trace&#47;parity.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;trace&#47;parity.rs</span>
<span class="term-fg36">@@ -264,18 +264,18 @@</span> #[serde(rename_all = &quot;camelCase&quot;)]
 pub struct LocalizedTransactionTrace {
     #[serde(flatten)]
     pub trace: TransactionTrace,
<span class="term-fg31">-    &#47;&#47;&#47; Hash of the block, if not pending</span>
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; Note: this deviates from &lt;https:&#47;&#47;openethereum.github.io&#47;JSONRPC-trace-module#trace_transaction&gt; which always returns a block number</span>
<span class="term-fg31">-    pub block_hash: Option&lt;H256&gt;,</span>
<span class="term-fg32">+    &#47;&#47;&#47; Transaction index within the block, None if pending.</span>
<span class="term-fg32">+    pub transaction_position: Option&lt;u64&gt;,</span>
<span class="term-fg32">+    &#47;&#47;&#47; Hash of the transaction</span>
<span class="term-fg32">+    pub transaction_hash: Option&lt;H256&gt;,</span>
     &#47;&#47;&#47; Block number the transaction is included in, None if pending.
     &#47;&#47;&#47;
     &#47;&#47;&#47; Note: this deviates from &lt;https:&#47;&#47;openethereum.github.io&#47;JSONRPC-trace-module#trace_transaction&gt; which always returns a block number
     pub block_number: Option&lt;u64&gt;,
<span class="term-fg31">-    &#47;&#47;&#47; Hash of the transaction</span>
<span class="term-fg31">-    pub transaction_hash: Option&lt;H256&gt;,</span>
<span class="term-fg31">-    &#47;&#47;&#47; Transaction index within the block, None if pending.</span>
<span class="term-fg31">-    pub transaction_position: Option&lt;u64&gt;,</span>
<span class="term-fg32">+    &#47;&#47;&#47; Hash of the block, if not pending</span>
<span class="term-fg32">+    &#47;&#47;&#47;</span>
<span class="term-fg32">+    &#47;&#47;&#47; Note: this deviates from &lt;https:&#47;&#47;openethereum.github.io&#47;JSONRPC-trace-module#trace_transaction&gt; which always returns a block number</span>
<span class="term-fg32">+    pub block_hash: Option&lt;H256&gt;,</span>
 }
&nbsp;
 &#47;&#47;&#47; A record of a full VM trace for a CALL&#47;CREATE.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e94773fa2390ce3c7f612936" role="button"
                   aria-expanded="false" aria-controls="id-e94773fa2390ce3c7f612936">
                    <code>crates/rpc/rpc-types/src/eth/transaction/mod.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-types/src/eth/transaction/mod.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-types/src/eth/transaction/mod.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e94773fa2390ce3c7f612936"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;transaction&#47;mod.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;transaction&#47;mod.rs</span>
<span class="term-fg1">index 24005376c82fbb68907d7795bf48da30d6aae2f7..109257909a1c37a727de219590ab042f0af20b0c 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;transaction&#47;mod.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;eth&#47;transaction&#47;mod.rs</span>
<span class="term-fg36">@@ -123,10 +123,14 @@</span>                     .unwrap_or_else(|| signed_tx.max_fee_per_gas());
&nbsp;
                 (Some(U128::from(gas_price)), Some(U128::from(signed_tx.max_fee_per_gas())))
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            TxType::DEPOSIT =&gt; (None, None),</span>
         };
&nbsp;
         let chain_id = signed_tx.chain_id().map(U64::from);
         let access_list = match &amp;signed_tx.transaction {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            PrimitiveTransaction::Deposit(_) =&gt; None,</span>
             PrimitiveTransaction::Legacy(_) =&gt; None,
             PrimitiveTransaction::Eip2930(tx) =&gt; Some(
                 tx.access_list</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ae4c626e525d317e4b8e1628" role="button"
                   aria-expanded="false" aria-controls="id-ae4c626e525d317e4b8e1628">
                    <code>crates/rpc/rpc-types/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-types/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc-types/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ae4c626e525d317e4b8e1628"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;lib.rs</span>
<span class="term-fg1">index 8b3542e6d35fe78bab95a6a4e3971a1529f137ae..64d6537291e3952ef39dfb5bf8347ecba5e32d52 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -17,10 +17,8 @@</span> &#47;&#47;! Provides all relevant types for the various RPC endpoints, grouped by namespace.
&nbsp;
 mod admin;
 mod eth;
<span class="term-fg31">-mod otterscan;</span>
 mod rpc;
&nbsp;
 pub use admin::*;
 pub use eth::*;
<span class="term-fg31">-pub use otterscan::*;</span>
 pub use rpc::*;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1e9e8e68776e8ffe9cea47c8" role="button"
                   aria-expanded="false" aria-controls="id-1e9e8e68776e8ffe9cea47c8">
                    <code>crates/rpc/rpc-types/src/otterscan.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc-types/src/otterscan.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-97</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1e9e8e68776e8ffe9cea47c8"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;otterscan.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;otterscan.rs</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index 57e12e8bf12341bf55b9d798d396b4f708dc63c8..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc-types&#47;src&#47;otterscan.rs</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,97 +0,0 @@</span>
<span class="term-fg31">-use crate::{Block, Transaction, TransactionReceipt};</span>
<span class="term-fg31">-use reth_primitives::{Address, Bytes, U256};</span>
<span class="term-fg31">-use serde::{Deserialize, Serialize};</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Operation type enum for `InternalOperation` struct</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-pub enum OperationType {</span>
<span class="term-fg31">-    &#47;&#47;&#47; Operation Transfer</span>
<span class="term-fg31">-    OpTransfer = 0,</span>
<span class="term-fg31">-    &#47;&#47;&#47; Operation Contract self destruct</span>
<span class="term-fg31">-    OpSelfDestruct = 1,</span>
<span class="term-fg31">-    &#47;&#47;&#47; Operation Create</span>
<span class="term-fg31">-    OpCreate = 2,</span>
<span class="term-fg31">-    &#47;&#47;&#47; Operation Create2</span>
<span class="term-fg31">-    OpCreate2 = 3,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom struct for otterscan `getInternalOperations` RPC response</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-pub struct InternalOperation {</span>
<span class="term-fg31">-    r#type: OperationType,</span>
<span class="term-fg31">-    from: Address,</span>
<span class="term-fg31">-    to: Address,</span>
<span class="term-fg31">-    value: u128,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom struct for otterscan `traceTransaction` RPC response</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-pub struct TraceEntry {</span>
<span class="term-fg31">-    r#type: String,</span>
<span class="term-fg31">-    depth: u32,</span>
<span class="term-fg31">-    from: Address,</span>
<span class="term-fg31">-    to: Address,</span>
<span class="term-fg31">-    value: u128,</span>
<span class="term-fg31">-    input: Bytes,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Internal issuance struct for `BlockDetails` struct</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-#[serde(rename_all = &quot;camelCase&quot;)]</span>
<span class="term-fg31">-pub struct InternalIssuance {</span>
<span class="term-fg31">-    block_reward: U256,</span>
<span class="term-fg31">-    uncle_reward: U256,</span>
<span class="term-fg31">-    issuance: U256,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom `Block` struct that includes transaction count for Otterscan responses</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-#[serde(rename_all = &quot;camelCase&quot;)]</span>
<span class="term-fg31">-pub struct OtsBlock {</span>
<span class="term-fg31">-    #[serde(flatten)]</span>
<span class="term-fg31">-    block: Block,</span>
<span class="term-fg31">-    transaction_count: usize,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom struct for otterscan `getBlockDetails` RPC response</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-#[serde(rename_all = &quot;camelCase&quot;)]</span>
<span class="term-fg31">-pub struct BlockDetails {</span>
<span class="term-fg31">-    block: OtsBlock,</span>
<span class="term-fg31">-    issuance: InternalIssuance,</span>
<span class="term-fg31">-    total_fees: U256,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom transaction receipt struct for otterscan `OtsBlockTransactions` struct</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-#[serde(rename_all = &quot;camelCase&quot;)]</span>
<span class="term-fg31">-pub struct OtsTransactionReceipt {</span>
<span class="term-fg31">-    #[serde(flatten)]</span>
<span class="term-fg31">-    receipt: TransactionReceipt,</span>
<span class="term-fg31">-    timestamp: u64,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom struct for otterscan `getBlockTransactions` RPC response</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-pub struct OtsBlockTransactions {</span>
<span class="term-fg31">-    fullblock: OtsBlock,</span>
<span class="term-fg31">-    receipts: Vec&lt;OtsTransactionReceipt&gt;,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom struct for otterscan `searchTransactionsAfter`and `searchTransactionsBefore` RPC</span>
<span class="term-fg31">-&#47;&#47;&#47; responses</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-#[serde(rename_all = &quot;camelCase&quot;)]</span>
<span class="term-fg31">-pub struct TransactionsWithReceipts {</span>
<span class="term-fg31">-    txs: Vec&lt;Transaction&gt;,</span>
<span class="term-fg31">-    receipts: Vec&lt;OtsTransactionReceipt&gt;,</span>
<span class="term-fg31">-    first_page: bool,</span>
<span class="term-fg31">-    last_page: bool,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Custom struct for otterscan `getContractCreator` RPC responses</span>
<span class="term-fg31">-#[derive(Clone, Debug, Eq, PartialEq, Serialize, Deserialize)]</span>
<span class="term-fg31">-pub struct ContractCreator {</span>
<span class="term-fg31">-    tx: Transaction,</span>
<span class="term-fg31">-    creator: Address,</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c3dda65a3055a892631c027c" role="button"
                   aria-expanded="false" aria-controls="id-c3dda65a3055a892631c027c">
                    <code>crates/rpc/rpc/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c3dda65a3055a892631c027c"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;Cargo.toml</span>
<span class="term-fg1">index 11111cafbc6984f435d7b9f34c2963e14d4675d1..8c804ce56f7ac95525914abbeeb0afbd9c4a7e4f 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;Cargo.toml</span>
<span class="term-fg36">@@ -66,3 +66,6 @@</span> jsonrpsee = { version = &quot;0.18&quot;, features = [&quot;client&quot;] }
 assert_matches = &quot;1.5.0&quot;
 tempfile = &quot;3.5.0&quot;
 reth-interfaces = { workspace = true, features = [&quot;test-utils&quot;] }
<span class="term-fg32">+</span>
<span class="term-fg32">+[features]</span>
<span class="term-fg32">+optimism = [&quot;reth-primitives&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-65af77b24cd56c2f1d471f2d" role="button"
                   aria-expanded="false" aria-controls="id-65af77b24cd56c2f1d471f2d">
                    <code>crates/rpc/rpc/src/eth/api/mod.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc/src/eth/api/mod.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc/src/eth/api/mod.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-31</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-65af77b24cd56c2f1d471f2d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;mod.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;mod.rs</span>
<span class="term-fg1">index de5d12f8d105c151de812c508338bd4e2a4b097f..e68dd3686ef7d51f6844ec799de212e68532f790 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;mod.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;mod.rs</span>
<span class="term-fg36">@@ -87,7 +87,7 @@</span>         pool: Pool,
         network: Network,
         eth_cache: EthStateCache,
         gas_oracle: GasPriceOracle&lt;Provider&gt;,
<span class="term-fg31">-        gas_cap: impl Into&lt;GasCap&gt;,</span>
<span class="term-fg32">+        gas_cap: u64,</span>
     ) -&gt; Self {
         Self::with_spawner(
             provider,
<span class="term-fg36">@@ -95,7 +95,7 @@</span>             pool,
             network,
             eth_cache,
             gas_oracle,
<span class="term-fg31">-            gas_cap.into().into(),</span>
<span class="term-fg32">+            gas_cap,</span>
             Box::&lt;TokioTaskExecutor&gt;::default(),
         )
     }
<span class="term-fg36">@@ -367,35 +367,6 @@</span>         } else {
             SyncStatus::None
         };
         Ok(status)
<span class="term-fg31">-    }</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; The default gas limit for eth_call and adjacent calls.</span>
<span class="term-fg31">-&#47;&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47;&#47; This is different from the default to regular 30M block gas limit</span>
<span class="term-fg31">-&#47;&#47;&#47; [ETHEREUM_BLOCK_GAS_LIMIT](reth_primitives::constants::ETHEREUM_BLOCK_GAS_LIMIT) to allow for</span>
<span class="term-fg31">-&#47;&#47;&#47; more complex calls.</span>
<span class="term-fg31">-pub const RPC_DEFAULT_GAS_CAP: GasCap = GasCap(50_000_000);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; The wrapper type for gas limit</span>
<span class="term-fg31">-#[derive(Debug, Clone, Copy)]</span>
<span class="term-fg31">-pub struct GasCap(u64);</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-impl Default for GasCap {</span>
<span class="term-fg31">-    fn default() -&gt; Self {</span>
<span class="term-fg31">-        RPC_DEFAULT_GAS_CAP</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-impl From&lt;u64&gt; for GasCap {</span>
<span class="term-fg31">-    fn from(gas_cap: u64) -&gt; Self {</span>
<span class="term-fg31">-        Self(gas_cap)</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-impl From&lt;GasCap&gt; for u64 {</span>
<span class="term-fg31">-    fn from(gas_cap: GasCap) -&gt; Self {</span>
<span class="term-fg31">-        gas_cap.0</span>
     }
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b452ef5157aeb3a665ac6aea" role="button"
                   aria-expanded="false" aria-controls="id-b452ef5157aeb3a665ac6aea">
                    <code>crates/rpc/rpc/src/eth/api/pending_block.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc/src/eth/api/pending_block.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc/src/eth/api/pending_block.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b452ef5157aeb3a665ac6aea"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;pending_block.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;pending_block.rs</span>
<span class="term-fg1">index a427df3279a1f8b9af5ba21242eeaf578ea6f147..d5fc4ce6295d7a75125983620d0adf638c519491 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;pending_block.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;api&#47;pending_block.rs</span>
<span class="term-fg36">@@ -110,6 +110,8 @@</span>                     tx_type: tx.tx_type(),
                     success: result.is_success(),
                     cumulative_gas_used,
                     logs: result.logs().into_iter().map(into_reth_log).collect(),
<span class="term-fg32">+                    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+                    deposit_nonce: None,</span>
                 },
             );
             &#47;&#47; append transaction to the list of executed transactions</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d28ca2ce7306a0003850796d" role="button"
                   aria-expanded="false" aria-controls="id-d28ca2ce7306a0003850796d">
                    <code>crates/rpc/rpc/src/eth/mod.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc/src/eth/mod.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc/src/eth/mod.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d28ca2ce7306a0003850796d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;mod.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;mod.rs</span>
<span class="term-fg1">index 0a9efc560257de8d2af9d345e3eecec5447b6b70..bff4361e4868c42d47e8c31bb6d01c7e975a7cbb 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;mod.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;eth&#47;mod.rs</span>
<span class="term-fg36">@@ -12,7 +12,7 @@</span> pub mod revm_utils;
 mod signer;
 pub(crate) mod utils;
&nbsp;
<span class="term-fg31">-pub use api::{EthApi, EthApiSpec, EthTransactions, TransactionSource, RPC_DEFAULT_GAS_CAP};</span>
<span class="term-fg32">+pub use api::{EthApi, EthApiSpec, EthTransactions, TransactionSource};</span>
 pub use filter::EthFilter;
 pub use id_provider::EthSubscriptionIdProvider;
 pub use pubsub::EthPubSub;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-38843f73796228ede3820a85" role="button"
                   aria-expanded="false" aria-controls="id-38843f73796228ede3820a85">
                    <code>crates/rpc/rpc/src/lib.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc/src/lib.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc/src/lib.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-38843f73796228ede3820a85"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;lib.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;lib.rs</span>
<span class="term-fg1">index b885608139a7cb9f8fe7dc2d15e7968bdc710d08..64083f746b2be062d78d9c7cab7adb71178d7cb6 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;lib.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;lib.rs</span>
<span class="term-fg36">@@ -37,7 +37,6 @@</span> mod engine;
 pub mod eth;
 mod layers;
 mod net;
<span class="term-fg31">-mod otterscan;</span>
 mod reth;
 mod rpc;
 mod trace;
<span class="term-fg36">@@ -51,7 +50,6 @@</span> pub use engine::{EngineApi, EngineEthApi};
 pub use eth::{EthApi, EthApiSpec, EthFilter, EthPubSub, EthSubscriptionIdProvider};
 pub use layers::{AuthLayer, AuthValidator, Claims, JwtAuthValidator, JwtError, JwtSecret};
 pub use net::NetApi;
<span class="term-fg31">-pub use otterscan::OtterscanApi;</span>
 pub use reth::RethApi;
 pub use rpc::RPCApi;
 pub use trace::TraceApi;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-46b3e6993b553d20b44da512" role="button"
                   aria-expanded="false" aria-controls="id-46b3e6993b553d20b44da512">
                    <code>crates/rpc/rpc/src/otterscan.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc/src/otterscan.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-111</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-46b3e6993b553d20b44da512"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;otterscan.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;otterscan.rs</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index 93d0ba167e244876f0e96880f3c58326d8ea61dc..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;otterscan.rs</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,111 +0,0 @@</span>
<span class="term-fg31">-#![allow(dead_code, unused_variables)]</span>
<span class="term-fg31">-use crate::result::internal_rpc_err;</span>
<span class="term-fg31">-use async_trait::async_trait;</span>
<span class="term-fg31">-use jsonrpsee::core::RpcResult;</span>
<span class="term-fg31">-use reth_primitives::{Address, BlockId, BlockNumberOrTag, TxHash, H256};</span>
<span class="term-fg31">-use reth_rpc_api::{EthApiServer, OtterscanServer};</span>
<span class="term-fg31">-use reth_rpc_types::{</span>
<span class="term-fg31">-    BlockDetails, ContractCreator, InternalOperation, OtsBlockTransactions, TraceEntry,</span>
<span class="term-fg31">-    Transaction, TransactionsWithReceipts,</span>
<span class="term-fg31">-};</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;&#47; Otterscan Api</span>
<span class="term-fg31">-#[derive(Debug)]</span>
<span class="term-fg31">-pub struct OtterscanApi&lt;Eth&gt; {</span>
<span class="term-fg31">-    eth: Eth,</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-impl&lt;Eth&gt; OtterscanApi&lt;Eth&gt; {</span>
<span class="term-fg31">-    &#47;&#47;&#47; Creates a new instance of `Otterscan`.</span>
<span class="term-fg31">-    pub fn new(eth: Eth) -&gt; Self {</span>
<span class="term-fg31">-        Self { eth }</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-#[async_trait]</span>
<span class="term-fg31">-impl&lt;Eth&gt; OtterscanServer for OtterscanApi&lt;Eth&gt;</span>
<span class="term-fg31">-where</span>
<span class="term-fg31">-    Eth: EthApiServer,</span>
<span class="term-fg31">-{</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `ots_hasCode`</span>
<span class="term-fg31">-    async fn has_code(&amp;self, address: Address, block_number: Option&lt;BlockId&gt;) -&gt; RpcResult&lt;bool&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `ots_getApiLevel`</span>
<span class="term-fg31">-    async fn get_api_level(&amp;self) -&gt; RpcResult&lt;u64&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `ots_getInternalOperations`</span>
<span class="term-fg31">-    async fn get_internal_operations(&amp;self, tx_hash: TxHash) -&gt; RpcResult&lt;Vec&lt;InternalOperation&gt;&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `ots_getTransactionError`</span>
<span class="term-fg31">-    async fn get_transaction_error(&amp;self, tx_hash: TxHash) -&gt; RpcResult&lt;String&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `ots_traceTransaction`</span>
<span class="term-fg31">-    async fn trace_transaction(&amp;self, tx_hash: TxHash) -&gt; RpcResult&lt;TraceEntry&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `ots_getBlockDetails`</span>
<span class="term-fg31">-    async fn get_block_details(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;Option&lt;BlockDetails&gt;&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `getBlockDetailsByHash`</span>
<span class="term-fg31">-    async fn get_block_details_by_hash(&amp;self, block_hash: H256) -&gt; RpcResult&lt;Option&lt;BlockDetails&gt;&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `getBlockTransactions`</span>
<span class="term-fg31">-    async fn get_block_transactions(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-        page_number: usize,</span>
<span class="term-fg31">-        page_size: usize,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;OtsBlockTransactions&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `searchTransactionsBefore`</span>
<span class="term-fg31">-    async fn search_transactions_before(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        address: Address,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-        page_size: usize,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;TransactionsWithReceipts&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `searchTransactionsAfter`</span>
<span class="term-fg31">-    async fn search_transactions_after(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        address: Address,</span>
<span class="term-fg31">-        block_number: BlockNumberOrTag,</span>
<span class="term-fg31">-        page_size: usize,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;TransactionsWithReceipts&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `getTransactionBySenderAndNonce`</span>
<span class="term-fg31">-    async fn get_transaction_by_sender_and_nonce(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        sender: Address,</span>
<span class="term-fg31">-        nonce: u64,</span>
<span class="term-fg31">-    ) -&gt; RpcResult&lt;Option&lt;Transaction&gt;&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Handler for `getContractCreator`</span>
<span class="term-fg31">-    async fn get_contract_creator(&amp;self, address: Address) -&gt; RpcResult&lt;Option&lt;ContractCreator&gt;&gt; {</span>
<span class="term-fg31">-        Err(internal_rpc_err(&quot;unimplemented&quot;))</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-524175fff020bc0ed097a999" role="button"
                   aria-expanded="false" aria-controls="id-524175fff020bc0ed097a999">
                    <code>crates/rpc/rpc/src/trace.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/rpc/rpc/src/trace.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/rpc/rpc/src/trace.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-23</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-524175fff020bc0ed097a999"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;trace.rs anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;trace.rs</span>
<span class="term-fg1">index ff2d09e50c731c0beb5afd24df87f21aa248a579..2fcf2d237b7d59c940fa6ed52a6351f73098fc1d 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;trace.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;rpc&#47;rpc&#47;src&#47;trace.rs</span>
<span class="term-fg36">@@ -268,36 +268,17 @@</span>         })
         .await
     }
&nbsp;
<span class="term-fg31">-    &#47;&#47;&#47; Returns transaction trace objects at the given index</span>
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; Note: For compatibility reasons this only supports 1 single index, since this method is</span>
<span class="term-fg31">-    &#47;&#47;&#47; supposed to return a single trace. See also: &lt;https:&#47;&#47;github.com&#47;ledgerwatch&#47;erigon&#47;blob&#47;862faf054b8a0fa15962a9c73839b619886101eb&#47;turbo&#47;jsonrpc&#47;trace_filtering.go#L114-L133&gt;</span>
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; This returns `None` if `indices` is empty</span>
<span class="term-fg32">+    &#47;&#47;&#47; Returns transaction trace with the given address.</span>
     pub async fn trace_get(
         &amp;self,
         hash: H256,
<span class="term-fg31">-        indices: Vec&lt;usize&gt;,</span>
<span class="term-fg31">-    ) -&gt; EthResult&lt;Option&lt;LocalizedTransactionTrace&gt;&gt; {</span>
<span class="term-fg31">-        if indices.len() != 1 {</span>
<span class="term-fg31">-            &#47;&#47; The OG impl failed if it gets more than a single index</span>
<span class="term-fg31">-            return Ok(None)</span>
<span class="term-fg31">-        }</span>
<span class="term-fg31">-        self.trace_get_index(hash, indices[0]).await</span>
<span class="term-fg31">-    }</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-    &#47;&#47;&#47; Returns transaction trace object at the given index.</span>
<span class="term-fg31">-    &#47;&#47;&#47;</span>
<span class="term-fg31">-    &#47;&#47;&#47; Returns `None` if the trace object at that index does not exist</span>
<span class="term-fg31">-    pub async fn trace_get_index(</span>
<span class="term-fg31">-        &amp;self,</span>
<span class="term-fg31">-        hash: H256,</span>
<span class="term-fg31">-        index: usize,</span>
<span class="term-fg32">+        trace_address: Vec&lt;usize&gt;,</span>
     ) -&gt; EthResult&lt;Option&lt;LocalizedTransactionTrace&gt;&gt; {
         match self.trace_transaction(hash).await? {
             None =&gt; Ok(None),
             Some(traces) =&gt; {
<span class="term-fg31">-                let trace = traces.into_iter().nth(index);</span>
<span class="term-fg32">+                let trace =</span>
<span class="term-fg32">+                    traces.into_iter().find(|trace| trace.trace.trace_address == trace_address);</span>
                 Ok(trace)
             }
         }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9bb3957aa12f71da9cb14e76" role="button"
                   aria-expanded="false" aria-controls="id-9bb3957aa12f71da9cb14e76">
                    <code>crates/storage/codecs/derive/src/arbitrary.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/storage/codecs/derive/src/arbitrary.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/storage/codecs/derive/src/arbitrary.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9bb3957aa12f71da9cb14e76"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;storage&#47;codecs&#47;derive&#47;src&#47;arbitrary.rs anton-rs&#47;op-reth&#47;crates&#47;storage&#47;codecs&#47;derive&#47;src&#47;arbitrary.rs</span>
<span class="term-fg1">index 82d35c6e624ca00d520d750be6ec23eab10abc27..455a034c2fd221331a844eb6a6fd7b3afcc7a7c2 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;storage&#47;codecs&#47;derive&#47;src&#47;arbitrary.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;storage&#47;codecs&#47;derive&#47;src&#47;arbitrary.rs</span>
<span class="term-fg36">@@ -26,7 +26,7 @@</span>                 {
                     let mut buf = vec![];
                     let len = field.clone().to_compact(&amp;mut buf);
                     let (decoded, _) = super::#type_ident::from_compact(&amp;buf, len);
<span class="term-fg31">-                    assert!(field == decoded);</span>
<span class="term-fg32">+                    assert_eq!(field, decoded);</span>
                 }
             });
         } else if arg.to_string() == &quot;rlp&quot; {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3aa4526df7607d1fe9234088" role="button"
                   aria-expanded="false" aria-controls="id-3aa4526df7607d1fe9234088">
                    <code>crates/storage/provider/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/storage/provider/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/storage/provider/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3aa4526df7607d1fe9234088"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;storage&#47;provider&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;storage&#47;provider&#47;Cargo.toml</span>
<span class="term-fg1">index 07a2a9a02f209f0e6be4436dfa90f26cc15acfd5..0cde0e6c2145a17f5ab8e7a29987873d5f11e3a8 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;storage&#47;provider&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;storage&#47;provider&#47;Cargo.toml</span>
<span class="term-fg36">@@ -43,3 +43,8 @@</span> tempfile = &quot;3.3&quot;
&nbsp;
 [features]
 test-utils = [&quot;reth-rlp&quot;]
<span class="term-fg32">+optimism = [</span>
<span class="term-fg32">+  &quot;reth-primitives&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-interfaces&#47;optimism&quot;,</span>
<span class="term-fg32">+  &quot;reth-revm-primitives&#47;optimism&quot;</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b246fb923e39747a0474c329" role="button"
                   aria-expanded="false" aria-controls="id-b246fb923e39747a0474c329">
                    <code>crates/storage/provider/src/test_utils/blocks.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/storage/provider/src/test_utils/blocks.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/storage/provider/src/test_utils/blocks.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b246fb923e39747a0474c329"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;storage&#47;provider&#47;src&#47;test_utils&#47;blocks.rs anton-rs&#47;op-reth&#47;crates&#47;storage&#47;provider&#47;src&#47;test_utils&#47;blocks.rs</span>
<span class="term-fg1">index 7df40d45e00c0c6e455f2504c5944bb0d915f9cd..6752a0cfb72111d9b19af3898f183ecad1613d2d 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;storage&#47;provider&#47;src&#47;test_utils&#47;blocks.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;storage&#47;provider&#47;src&#47;test_utils&#47;blocks.rs</span>
<span class="term-fg36">@@ -125,6 +125,8 @@</span>                 address: H160([0x60; 20]),
                 topics: vec![H256::from_low_u64_be(1), H256::from_low_u64_be(2)],
                 data: Bytes::default(),
             }],
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            deposit_nonce: None,</span>
         },
     );
&nbsp;
<span class="term-fg36">@@ -168,6 +170,8 @@</span>                 address: H160([0x61; 20]),
                 topics: vec![H256::from_low_u64_be(3), H256::from_low_u64_be(4)],
                 data: Bytes::default(),
             }],
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            deposit_nonce: None,</span>
         },
     );
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-77b0a470c19d51c767922f95" role="button"
                   aria-expanded="false" aria-controls="id-77b0a470c19d51c767922f95">
                    <code>crates/transaction-pool/Cargo.toml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/transaction-pool/Cargo.toml" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/transaction-pool/Cargo.toml" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-77b0a470c19d51c767922f95"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;Cargo.toml anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;Cargo.toml</span>
<span class="term-fg1">index c562df71cf5e5f7ba8333b9c0751f32115a08457..f506f75147485e7eac56641980276bd4200d3948 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;Cargo.toml</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;Cargo.toml</span>
<span class="term-fg36">@@ -53,3 +53,4 @@</span> [features]
 default = [&quot;serde&quot;]
 serde = [&quot;dep:serde&quot;]
 test-utils = [&quot;rand&quot;, &quot;paste&quot;, &quot;serde&quot;]
<span class="term-fg32">+optimism = [&quot;reth-primitives&#47;optimism&quot;]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b572b33d511572e30e13f049" role="button"
                   aria-expanded="false" aria-controls="id-b572b33d511572e30e13f049">
                    <code>crates/transaction-pool/src/test_utils/mock.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/transaction-pool/src/test_utils/mock.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/transaction-pool/src/test_utils/mock.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+72</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b572b33d511572e30e13f049"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;src&#47;test_utils&#47;mock.rs anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;src&#47;test_utils&#47;mock.rs</span>
<span class="term-fg1">index 13ec9b5af010f3a9597701be3cbd6a3a117f8711..081d0efbb5076e009c36cefe63b37463c1f287be 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;src&#47;test_utils&#47;mock.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;src&#47;test_utils&#47;mock.rs</span>
<span class="term-fg36">@@ -22,6 +22,15 @@</span> pub(crate) type MockTxPool = TxPool&lt;MockOrdering&gt;;
&nbsp;
 pub type MockValidTx = ValidPoolTransaction&lt;MockTransaction&gt;;
&nbsp;
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+use reth_primitives::DEPOSIT_TX_TYPE;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+use reth_primitives::TxDeposit;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+#[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+use reth_primitives::Bytes;</span>
<span class="term-fg32">+</span>
 &#47;&#47;&#47; Create an empty `TxPool`
 pub(crate) fn mock_tx_pool() -&gt; MockTxPool {
     MockTxPool::new(Default::default(), Default::default())
<span class="term-fg36">@@ -32,6 +41,10 @@</span> macro_rules! set_value {
     ($this:ident =&gt; $field:ident) =&gt; {
         let new_value = $field;
         match $this {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { ref mut $field, .. } =&gt; {</span>
<span class="term-fg32">+                *$field = new_value;</span>
<span class="term-fg32">+            }</span>
             MockTransaction::Legacy { ref mut $field, .. } =&gt; {
                 *$field = new_value;
             }
<span class="term-fg36">@@ -46,6 +59,8 @@</span> &#47;&#47;&#47; Sets the value fo the field
 macro_rules! get_value {
     ($this:ident =&gt; $field:ident) =&gt; {
         match $this {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { $field, .. } =&gt; $field,</span>
             MockTransaction::Legacy { $field, .. } =&gt; $field,
             MockTransaction::Eip1559 { $field, .. } =&gt; $field,
         }
<span class="term-fg36">@@ -99,6 +114,18 @@</span>         gas_limit: u64,
         to: TransactionKind,
         value: U256,
     },
<span class="term-fg32">+    #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+    DepositTx {</span>
<span class="term-fg32">+        hash: H256,</span>
<span class="term-fg32">+        sender: Address,</span>
<span class="term-fg32">+        nonce: u64,</span>
<span class="term-fg32">+        to: TransactionKind,</span>
<span class="term-fg32">+        mint: Option&lt;u128&gt;,</span>
<span class="term-fg32">+        gas_limit: u64,</span>
<span class="term-fg32">+        is_system_transaction: bool,</span>
<span class="term-fg32">+        input: Bytes,</span>
<span class="term-fg32">+        value: U256,</span>
<span class="term-fg32">+    },</span>
 }
&nbsp;
 &#47;&#47; === impl MockTransaction ===
<span class="term-fg36">@@ -185,6 +212,8 @@</span>     }
&nbsp;
     pub fn set_gas_price(&amp;mut self, val: u128) -&gt; &amp;mut Self {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; {}</span>
             MockTransaction::Legacy { gas_price, .. } =&gt; {
                 *gas_price = val;
             }
<span class="term-fg36">@@ -198,6 +227,8 @@</span>     }
&nbsp;
     pub fn with_gas_price(mut self, val: u128) -&gt; Self {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; {}</span>
             MockTransaction::Legacy { ref mut gas_price, .. } =&gt; {
                 *gas_price = val;
             }
<span class="term-fg36">@@ -215,6 +246,8 @@</span>     }
&nbsp;
     pub fn get_gas_price(&amp;self) -&gt; u128 {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; 0,</span>
             MockTransaction::Legacy { gas_price, .. } =&gt; *gas_price,
             MockTransaction::Eip1559 { max_fee_per_gas, .. } =&gt; *max_fee_per_gas,
         }
<span class="term-fg36">@@ -299,6 +332,8 @@</span>
 impl PoolTransaction for MockTransaction {
     fn hash(&amp;self) -&gt; &amp;TxHash {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { hash, .. } =&gt; hash,</span>
             MockTransaction::Legacy { hash, .. } =&gt; hash,
             MockTransaction::Eip1559 { hash, .. } =&gt; hash,
         }
<span class="term-fg36">@@ -306,6 +341,8 @@</span>     }
&nbsp;
     fn sender(&amp;self) -&gt; Address {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { sender, .. } =&gt; *sender,</span>
             MockTransaction::Legacy { sender, .. } =&gt; *sender,
             MockTransaction::Eip1559 { sender, .. } =&gt; *sender,
         }
<span class="term-fg36">@@ -313,6 +350,8 @@</span>     }
&nbsp;
     fn nonce(&amp;self) -&gt; u64 {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { nonce, .. } =&gt; *nonce,</span>
             MockTransaction::Legacy { nonce, .. } =&gt; *nonce,
             MockTransaction::Eip1559 { nonce, .. } =&gt; *nonce,
         }
<span class="term-fg36">@@ -320,6 +359,8 @@</span>     }
&nbsp;
     fn cost(&amp;self) -&gt; U256 {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; U256::ZERO,</span>
             MockTransaction::Legacy { gas_price, value, gas_limit, .. } =&gt; {
                 U256::from(*gas_limit) * U256::from(*gas_price) + *value
             }
<span class="term-fg36">@@ -337,6 +378,8 @@</span>             }
             MockTransaction::Eip1559 { max_fee_per_gas, gas_limit, .. } =&gt; {
                 U256::from(*gas_limit) * U256::from(*max_fee_per_gas)
             }
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; U256::ZERO,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -348,11 +391,15 @@</span>     fn max_fee_per_gas(&amp;self) -&gt; u128 {
         match self {
             MockTransaction::Legacy { gas_price, .. } =&gt; *gas_price,
             MockTransaction::Eip1559 { max_fee_per_gas, .. } =&gt; *max_fee_per_gas,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; 0,</span>
         }
     }
&nbsp;
     fn max_priority_fee_per_gas(&amp;self) -&gt; Option&lt;u128&gt; {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; None,</span>
             MockTransaction::Legacy { .. } =&gt; None,
             MockTransaction::Eip1559 { max_priority_fee_per_gas, .. } =&gt; {
                 Some(*max_priority_fee_per_gas)
<span class="term-fg36">@@ -362,6 +409,8 @@</span>     }
&nbsp;
     fn kind(&amp;self) -&gt; &amp;TransactionKind {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { to, .. } =&gt; to,</span>
             MockTransaction::Legacy { to, .. } =&gt; to,
             MockTransaction::Eip1559 { to, .. } =&gt; to,
         }
<span class="term-fg36">@@ -373,6 +422,8 @@</span>     }
&nbsp;
     fn tx_type(&amp;self) -&gt; u8 {
         match self {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            MockTransaction::DepositTx { .. } =&gt; TxType::DEPOSIT.into(),</span>
             MockTransaction::Legacy { .. } =&gt; TxType::Legacy.into(),
             MockTransaction::Eip1559 { .. } =&gt; TxType::EIP1559.into(),
         }
<span class="term-fg36">@@ -393,6 +444,27 @@</span>         let sender = tx.signer();
         let transaction = tx.into_signed();
         let hash = transaction.hash();
         match transaction.transaction {
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(TxDeposit {</span>
<span class="term-fg32">+                source_hash,</span>
<span class="term-fg32">+                from,</span>
<span class="term-fg32">+                to,</span>
<span class="term-fg32">+                mint,</span>
<span class="term-fg32">+                value,</span>
<span class="term-fg32">+                gas_limit,</span>
<span class="term-fg32">+                is_system_transaction,</span>
<span class="term-fg32">+                input,</span>
<span class="term-fg32">+            }) =&gt; MockTransaction::DepositTx {</span>
<span class="term-fg32">+                nonce: 0u64,</span>
<span class="term-fg32">+                hash: source_hash,</span>
<span class="term-fg32">+                sender: from,</span>
<span class="term-fg32">+                to,</span>
<span class="term-fg32">+                mint,</span>
<span class="term-fg32">+                value: U256::from(value),</span>
<span class="term-fg32">+                gas_limit,</span>
<span class="term-fg32">+                is_system_transaction,</span>
<span class="term-fg32">+                input,</span>
<span class="term-fg32">+            },</span>
             Transaction::Legacy(TxLegacy {
                 chain_id,
                 nonce,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-441cfcc49eede38ed7264e08" role="button"
                   aria-expanded="false" aria-controls="id-441cfcc49eede38ed7264e08">
                    <code>crates/transaction-pool/src/traits.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/transaction-pool/src/traits.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/transaction-pool/src/traits.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-441cfcc49eede38ed7264e08"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;src&#47;traits.rs anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;src&#47;traits.rs</span>
<span class="term-fg1">index d44c25f1b5211ccf8874147390f7f3e57d248eb2..5af49270ab7c260d3847bcc6cab027aaa146b105 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;src&#47;traits.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;src&#47;traits.rs</span>
<span class="term-fg36">@@ -585,6 +585,8 @@</span>         match &amp;self.transaction.transaction {
             Transaction::Legacy(tx) =&gt; tx.gas_price,
             Transaction::Eip2930(tx) =&gt; tx.gas_price,
             Transaction::Eip1559(tx) =&gt; tx.max_fee_per_gas,
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; 0,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -596,6 +598,8 @@</span>         match &amp;self.transaction.transaction {
             Transaction::Legacy(_) =&gt; None,
             Transaction::Eip2930(_) =&gt; None,
             Transaction::Eip1559(tx) =&gt; Some(tx.max_priority_fee_per_gas),
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; None,</span>
         }
     }
&nbsp;
<span class="term-fg36">@@ -632,6 +636,12 @@</span>         let gas_cost = match &amp;tx.transaction {
             Transaction::Legacy(t) =&gt; U256::from(t.gas_price) * U256::from(t.gas_limit),
             Transaction::Eip2930(t) =&gt; U256::from(t.gas_price) * U256::from(t.gas_limit),
             Transaction::Eip1559(t) =&gt; U256::from(t.max_fee_per_gas) * U256::from(t.gas_limit),
<span class="term-fg32">+            #[cfg(feature = &quot;optimism&quot;)]</span>
<span class="term-fg32">+            Transaction::Deposit(_) =&gt; {</span>
<span class="term-fg32">+                &#47;&#47; Gas price is always set to 0 for deposits in order to zero out ETH refunds,</span>
<span class="term-fg32">+                &#47;&#47; because they already pay for their gas on L1.</span>
<span class="term-fg32">+                U256::ZERO</span>
<span class="term-fg32">+            }</span>
         };
         let cost = gas_cost + U256::from(tx.value());
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d834f71edc33bfa468bb962d" role="button"
                   aria-expanded="false" aria-controls="id-d834f71edc33bfa468bb962d">
                    <code>crates/transaction-pool/src/validate/mod.rs</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/crates/transaction-pool/src/validate/mod.rs" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/crates/transaction-pool/src/validate/mod.rs" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d834f71edc33bfa468bb962d"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;src&#47;validate&#47;mod.rs anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;src&#47;validate&#47;mod.rs</span>
<span class="term-fg1">index d2f95de1da1316a6a89a82e30679224eb825380f..f63c08c334c28a911fbb780860658fd165e0ef71 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;crates&#47;transaction-pool&#47;src&#47;validate&#47;mod.rs</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;crates&#47;transaction-pool&#47;src&#47;validate&#47;mod.rs</span>
<span class="term-fg36">@@ -13,7 +13,7 @@</span>
 mod eth;
 mod task;
&nbsp;
<span class="term-fg31">-&#47;&#47;&#47; A `TransactionValidator` implementation that validates ethereum transaction.</span>
<span class="term-fg32">+&#47;&#47;&#47; A [TransactionValidator] implementation that validates ethereum transaction.</span>
 pub use eth::{EthTransactionValidator, EthTransactionValidatorBuilder};
&nbsp;
 &#47;&#47;&#47; A spawnable task that performs transaction validation.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-733e2d044515480df5e549da" role="button"
                   aria-expanded="false" aria-controls="id-733e2d044515480df5e549da">
                    <code>etc/grafana/dashboards/overview.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/paradigmxyz/reth/blob/0b012ab6640f7627a0f9fe11ea9eec10d479de72/etc/grafana/dashboards/overview.json" target="_blank">paradigmxyz/reth <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/anton-rs/op-reth/blob/e8adc973e93bee63e3201d3fac8c89b85d67a0ef/etc/grafana/dashboards/overview.json" target="_blank">anton-rs/op-reth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+18</span></div>
                        <div class="text-start"><span class="text-danger">-18</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-733e2d044515480df5e549da"><span class="term-fg1">diff --git paradigmxyz&#47;reth&#47;etc&#47;grafana&#47;dashboards&#47;overview.json anton-rs&#47;op-reth&#47;etc&#47;grafana&#47;dashboards&#47;overview.json</span>
<span class="term-fg1">index 0ca8bd3d9d13c259d6fcf1817d4f9e635fb81d0b..4e11ec203aa309cd61fb403279d527501aaab10c 100644</span>
<span class="term-fg1">--- paradigmxyz&#47;reth&#47;etc&#47;grafana&#47;dashboards&#47;overview.json</span>
<span class="term-fg1">+++ anton-rs&#47;op-reth&#47;etc&#47;grafana&#47;dashboards&#47;overview.json</span>
<span class="term-fg36">@@ -27,7 +27,7 @@</span>     {
       &quot;type&quot;: &quot;grafana&quot;,
       &quot;id&quot;: &quot;grafana&quot;,
       &quot;name&quot;: &quot;Grafana&quot;,
<span class="term-fg31">-      &quot;version&quot;: &quot;10.0.2&quot;</span>
<span class="term-fg32">+      &quot;version&quot;: &quot;9.5.3&quot;</span>
     },
     {
       &quot;type&quot;: &quot;panel&quot;,
<span class="term-fg36">@@ -100,7 +100,7 @@</span>       &quot;id&quot;: 96,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Overview&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Overview ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -159,7 +159,7 @@</span>         },
         &quot;showThresholdLabels&quot;: false,
         &quot;showThresholdMarkers&quot;: true
       },
<span class="term-fg31">-      &quot;pluginVersion&quot;: &quot;10.0.2&quot;,</span>
<span class="term-fg32">+      &quot;pluginVersion&quot;: &quot;9.5.3&quot;,</span>
       &quot;targets&quot;: [
         {
           &quot;datasource&quot;: {
<span class="term-fg36">@@ -226,7 +226,7 @@</span>         },
         &quot;showUnfilled&quot;: true,
         &quot;valueMode&quot;: &quot;color&quot;
       },
<span class="term-fg31">-      &quot;pluginVersion&quot;: &quot;10.0.2&quot;,</span>
<span class="term-fg32">+      &quot;pluginVersion&quot;: &quot;9.5.3&quot;,</span>
       &quot;targets&quot;: [
         {
           &quot;datasource&quot;: {
<span class="term-fg36">@@ -441,7 +441,7 @@</span>       &quot;id&quot;: 38,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Database&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Database ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -609,7 +609,7 @@</span>           &quot;reverse&quot;: false,
           &quot;unit&quot;: &quot;percentunit&quot;
         }
       },
<span class="term-fg31">-      &quot;pluginVersion&quot;: &quot;10.0.2&quot;,</span>
<span class="term-fg32">+      &quot;pluginVersion&quot;: &quot;9.5.3&quot;,</span>
       &quot;targets&quot;: [
         {
           &quot;datasource&quot;: {
<span class="term-fg36">@@ -1006,7 +1006,7 @@</span>           &quot;show&quot;: false
         },
         &quot;showHeader&quot;: true
       },
<span class="term-fg31">-      &quot;pluginVersion&quot;: &quot;10.0.2&quot;,</span>
<span class="term-fg32">+      &quot;pluginVersion&quot;: &quot;9.5.3&quot;,</span>
       &quot;targets&quot;: [
         {
           &quot;datasource&quot;: {
<span class="term-fg36">@@ -1038,7 +1038,7 @@</span>       &quot;id&quot;: 46,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Stage: Execution&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Stage: Execution ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -1179,7 +1179,7 @@</span>       &quot;id&quot;: 6,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Networking&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Networking ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -1705,7 +1705,7 @@</span>       &quot;id&quot;: 24,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Downloader: Headers&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Downloader: Headers ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -2097,7 +2097,7 @@</span>       &quot;id&quot;: 32,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Downloader: Bodies&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Downloader: Bodies ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -2792,7 +2792,7 @@</span>       &quot;id&quot;: 89,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Transaction Pool&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Transaction Pool ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -3428,7 +3428,7 @@</span>       &quot;id&quot;: 79,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Blockchain Tree&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Blockchain Tree ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -3725,7 +3725,7 @@</span>       &quot;id&quot;: 87,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Engine API&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Engine API ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -4031,7 +4031,7 @@</span>       &quot;id&quot;: 68,
       &quot;panels&quot;: [],
       &quot;repeat&quot;: &quot;instance&quot;,
       &quot;repeatDirection&quot;: &quot;h&quot;,
<span class="term-fg31">-      &quot;title&quot;: &quot;Payload Builder&quot;,</span>
<span class="term-fg32">+      &quot;title&quot;: &quot;Payload Builder ($instance)&quot;,</span>
       &quot;type&quot;: &quot;row&quot;
     },
     {
<span class="term-fg36">@@ -4786,8 +4786,8 @@</span>           &quot;uid&quot;: &quot;${DS_PROMETHEUS}&quot;
         },
         &quot;definition&quot;: &quot;query_result(up)&quot;,
         &quot;hide&quot;: 0,
<span class="term-fg31">-        &quot;includeAll&quot;: false,</span>
<span class="term-fg31">-        &quot;multi&quot;: false,</span>
<span class="term-fg32">+        &quot;includeAll&quot;: true,</span>
<span class="term-fg32">+        &quot;multi&quot;: true,</span>
         &quot;name&quot;: &quot;instance&quot;,
         &quot;options&quot;: [],
         &quot;query&quot;: {
<span class="term-fg36">@@ -4810,6 +4810,6 @@</span>   &quot;timepicker&quot;: {},
   &quot;timezone&quot;: &quot;&quot;,
   &quot;title&quot;: &quot;reth&quot;,
   &quot;uid&quot;: &quot;2k8BXz24x&quot;,
<span class="term-fg31">-  &quot;version&quot;: 3,</span>
<span class="term-fg32">+  &quot;version&quot;: 2,</span>
   &quot;weekStart&quot;: &quot;&quot;
 }
\ No newline at end of file</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

                
            </div>
        </main>
    </div>

    <footer class="col-xl-10 col-xxl-8 mx-auto px-3 pt-5 my-5 text-muted border-top">
        <p><a href="https://github.com/protolambda/forkdiff">Fork-diff</a> overview of <a href="https://github.com/anton-rs/op-reth">op-reth</a>, a fork of <a href="https://github.com/paradigmxyz/reth">reth</a> and execution-engine of the <a href="https://github.com/ethereum-optimism/optimism">OP Stack</a>.</p>

    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
    <script type="text/javascript">
        const storedTheme = localStorage.getItem('theme')

        // Get the preferred theme from the user's OS
        const getPreferredTheme = () => {
            if (storedTheme) {
                return storedTheme
            }

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        }

        // Set the bootstrap theme
        const setTheme = function (theme) {
            document.documentElement.setAttribute('data-bs-theme', theme)
            if (theme === 'dark') {
                document.getElementById('dark-mode-toggle').setAttribute('checked', true)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-high-fill', 'bi-brightness-low')
            } else {
                document.getElementById('dark-mode-toggle').setAttribute('checked', false)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-low', 'bi-brightness-high-fill')
            }
        }

        // Returns true if the current theme is dark
        const isDark = () => {
            return document.documentElement.getAttribute('data-bs-theme') === 'dark'
        }

        // Toggles dark mode
        const toggleDarkMode = () => {
            const newTheme = isDark() ? 'light' : 'dark'
            setTheme(newTheme)
            localStorage.setItem('theme', newTheme)
        }

        // Set the preferred theme on page load
        window.onload = () => {
            // Set preferred theme
            setTheme(getPreferredTheme());
            // Initialize tooltips
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
        }

        // Toggle dark mode when the toggle button is clicked
        addEventListener("click", (event) => {
            if (event.target.id === 'dark-mode-toggle') {
                toggleDarkMode();
                // De-focus the toggle
                document.activeElement.blur()
            }
        });
    </script>
</body>
</html>
